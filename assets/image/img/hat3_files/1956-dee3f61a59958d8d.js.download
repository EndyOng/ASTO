try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="516f309d-a006-40e9-b529-79be3b382ddf",e._sentryDebugIdIdentifier="sentry-dbid-516f309d-a006-40e9-b529-79be3b382ddf")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1956,8830],{95:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(3740);let l=e=>(0,i.jsx)(r.Icon,{width:"5",height:"5",viewBox:"0 0 16 16",...e,children:(0,i.jsx)("path",{d:"M15.5725 2.98422C15.2004 2.50747 14.6027 2.21095 13.7953 2.10109L5.93573 1.03847C5.12827 0.928615 4.47268 1.05426 3.98002 1.41254C3.48587 1.77154 3.17778 2.34809 3.06466 3.12568L2.95519 3.86962H2.54294C0.903457 3.86962 0 4.74055 0 6.32302V12.5466C0 14.1291 0.903457 15 2.54294 15H10.4821C11.9028 15 12.7683 14.3437 12.9752 13.1403C14.1354 13.0499 14.8744 12.3232 15.0671 11.0316L15.9594 4.87124C16.0748 4.09509 15.9438 3.46025 15.5725 2.98422ZM2.54294 4.94662H10.4821C11.4957 4.94662 11.9095 5.3451 11.9095 6.32302V9.9705L9.36205 7.51273C8.88427 7.05249 8.10881 7.05321 7.63326 7.51273L4.52772 10.509L4.06932 10.0659C3.59154 9.60491 2.81608 9.60634 2.34053 10.0659L1.1163 11.247V6.32302C1.1163 5.3451 1.53008 4.94662 2.54294 4.94662ZM10.4821 13.923H2.54294C1.60822 13.923 1.18849 13.5776 1.12821 12.7577L3.12934 10.827C3.16953 10.7889 3.23802 10.7882 3.27969 10.827L3.90189 11.4272C4.2472 11.7611 4.81055 11.7596 5.15437 11.4272L8.42289 8.27385C8.46456 8.23508 8.53305 8.23579 8.57324 8.27385L11.9095 11.4926V12.5466C11.9095 13.5245 11.4957 13.923 10.4821 13.923ZM14.8543 4.72119L13.962 10.8808C13.8541 11.6031 13.5713 11.9671 13.0258 12.0568V6.32302C13.0258 4.74055 12.1223 3.86962 10.4821 3.86962H4.08194L4.16906 3.27731C4.24051 2.79194 4.40196 2.45364 4.65127 2.2727C4.89835 2.09249 5.27863 2.03513 5.77948 2.10477L13.6398 3.1674C14.1428 3.23633 14.4926 3.39211 14.6801 3.63192C14.8677 3.87102 14.9257 4.23726 14.8543 4.72119ZM3.17549 7.64051C3.17549 7.24418 3.50519 6.92252 3.91524 6.92252H3.92124C4.3313 6.92252 4.6639 7.24418 4.6639 7.64051C4.6639 8.03685 4.3313 8.35851 3.92124 8.35851C3.51193 8.35851 3.17549 8.03685 3.17549 7.64051Z",fill:"currentColor"})})},2102:(e,t,n)=>{n.d(t,{eG:()=>i});let i=()=>{window.scrollTo({top:0,behavior:"smooth"})}},3038:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(27593);let l=e=>(0,i.jsx)("svg",{width:"calc(".concat(r.fb," * 0.8750)"),height:"calc(".concat(r.fb," * 0.8750)"),viewBox:"0 0 14 14",fill:"white",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0.495575C0 0.221877 0.221877 0 0.495575 0H3.09735C3.37104 0 3.59292 0.221877 3.59292 0.495575V2.60156H5.20354V0.495575C5.20354 0.221877 5.42542 0 5.69912 0H8.30089C8.57458 0 8.79646 0.221877 8.79646 0.495575V3.09735C8.79646 3.37104 8.57458 3.59292 8.30089 3.59292H6.19469V5.20312H8.30089C8.57458 5.20312 8.79646 5.425 8.79646 5.6987V7.80469H10.4071V5.6987C10.4071 5.425 10.629 5.20312 10.9027 5.20312H13.5044C13.7781 5.20312 14 5.425 14 5.6987V8.30047C14 8.57417 13.7781 8.79605 13.5044 8.79605H11.3982V10.4062H13.5044C13.7781 10.4062 14 10.6281 14 10.9018V13.5036C14 13.7773 13.7781 13.9992 13.5044 13.9992H10.9027C10.629 13.9992 10.4071 13.7773 10.4071 13.5036V11.3976H8.30089C8.02719 11.3976 7.80531 11.1757 7.80531 10.902V8.79605H6.19469V10.902C6.19469 11.1757 5.97281 11.3976 5.69912 11.3976H3.59292V13.5036C3.59292 13.7773 3.37104 13.9992 3.09735 13.9992H0.495575C0.221877 13.9992 0 13.7773 0 13.5036V10.9018C0 10.6281 0.221877 10.4062 0.495575 10.4062H2.60177V8.79605H0.495575C0.221877 8.79605 0 8.57417 0 8.30047V5.6987C0 5.425 0.221877 5.20312 0.495575 5.20312H2.60177V3.59292H0.495575C0.221877 3.59292 0 3.37104 0 3.09735V0.495575ZM6.19469 7.80489V6.19428H7.80531V7.80489H6.19469ZM3.59292 6.19448H5.20354V7.80469H3.59292V6.19448ZM5.20354 5.20312H3.59292V3.59271H5.20354V5.20312ZM0.99115 0.99115V2.60177H2.60177V0.99115H0.99115ZM3.59292 10.4065V8.79605H5.20354V10.4065H3.59292ZM2.60177 6.19428H0.99115V7.80489H2.60177V6.19428ZM0.99115 13.008V11.3974H2.60177V13.008H0.99115ZM6.19469 2.60177V0.99115H7.80531V2.60177H6.19469ZM8.79646 8.79584V10.4065H10.4071V8.79584H8.79646ZM11.3982 7.80489V6.19428H13.0088V7.80489H11.3982ZM11.3982 11.3974V13.008H13.0088V11.3974H11.3982ZM10.9027 0C10.629 0 10.4071 0.221877 10.4071 0.495575V3.09735C10.4071 3.37104 10.629 3.59292 10.9027 3.59292H13.5044C13.7781 3.59292 14 3.37104 14 3.09735V0.495575C14 0.221877 13.7781 0 13.5044 0H10.9027ZM11.3982 2.60177V0.99115H13.0088V2.60177H11.3982Z",fill:"white"})})},10225:(e,t,n)=>{n.d(t,{T:()=>r,X:()=>i});var i=function(e){return e.ULTRA="ultraUpscaler",e.PHOENIX_IMAGE_GUIDANCE="phoenixImageGuidance",e.PHOENIX_IMAGE_GUIDANCE_CHARACTER_REFERENCE="phoenixImageGuidanceCharacterReference",e.PHOENIX_IMAGE_GUIDANCE_CONTENT_REFERENCE="phoenixImageGuidanceContentReference",e.FLUX_IMAGE_GUIDANCE_CONTENT_REFERENCE="fluxImageGuidanceContentReference",e.FLUX_IMAGE_GUIDANCE_STYLE_REFERENCE="fluxImageGuidanceStyleReference",e.FLUX_IMAGE_GUIDANCE_IMAGE_TO_IMAGE="fluxImageGuidanceImageToImage",e.LIGHTNING_STREAM="lightningStream",e.LIGHTNING_STREAM_COST="lightningStreamCost",e.LIGHTNING_STREAM_FREE_CREDITS="lightningStreamFreeCredits",e.VIDEO_GENERATION="video",e.MOTION_V3="motionV3",e}({});let r=e=>{let t="".concat(e,":features-acknowledged"),n=()=>{try{let e=localStorage.getItem(t);return e?JSON.parse(e):{}}catch(e){return console.error("Error parsing stored features acknowledged:",e),{}}},i=e=>{localStorage.setItem(t,JSON.stringify(e))};return{isAcknowledged:e=>!!n()[e],setAcknowledged:(e,t)=>{let r=n();r[e]=t,i(r)},resetAcknowledgments:()=>{i({})}}}},11819:(e,t,n)=>{n.d(t,{A:()=>C});var i=n(88095),r=n(5138),l=n(62105),a=n(78547),o=n(20690),s=n(958),d=n(91073),c=n(64478),u=n(34853);let m=e=>{let{teamId:t}=e,{handleGenError:n}=(0,o.B)(),m=(0,d.A)(),g=(0,c.w)(),[p,{loading:h}]=(0,i.n)(s.eRU,{onError:e=>{!((0,u.V)(e)&&(0,u.o)({error:e,onError:n}))&&m({title:"Error",description:"Failed to add images to collection",type:d.k.error})}}),[v]=(0,r._)(s.g1F);async function x(e,t){if(0===e.length||!t)return e;try{let{data:{collection_image:n=[]}={}}=await v({fetchPolicy:"network-only",variables:{collectionId:t,generatedImageId:{_in:e}}}),i=n.map(e=>e.generatedImageId),r=new Set(i);return e.filter(e=>!r.has(e))}catch(n){throw l.wd("Unable to check images in a collection",{extra:{error:n,collectionId:t,imageIds:e}}),n}}return{createCollectionImages:async function(e){var n;let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=i?[...(0,a.U)({teamId:t,userId:g}),"GetCollectionDescendants","GetCollectionParents","GetCollections"]:[],l=await x(e.map(e=>e.generatedImageId),null===(n=e[0])||void 0===n?void 0:n.collectionId);if(0===l.length)return;let o=l.map(t=>({collectionId:e[0].collectionId,generatedImageId:t}));return await p({variables:{objects:o},refetchQueries:r,optimisticResponse:{__typename:"mutation_root",insert_collection_image:{__typename:"collection_image_mutation_response",affected_rows:o.length,returning:[]}},update(e){e.modify({fields:{collection_images(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e,...o.map(e=>({__typename:"collection_images",id:e.generatedImageId,...e}))]}}})}})},isCreatingCollectionImages:h}};var g=n(15707);let p=()=>{let[e,{loading:t}]=(0,i.n)(s.GD8);return{deleteCollectionImages:async t=>{await e({variables:{where:{_or:t}},update(e,t){var n,i;let r=null===(i=t.data)||void 0===i?void 0:null===(n=i.delete_collection_image)||void 0===n?void 0:n.returning;if(Array.isArray(r)){for(let t of r)t.id&&(t.collectionId&&t.generatedImageId&&Object.keys(e.extract().ROOT_QUERY||{}).forEach(n=>{if(n.startsWith("generated_images:")){var i,r,l;let a=JSON.parse(n.slice(n.indexOf(":")+1));(null==a?void 0:null===(l=a.where)||void 0===l?void 0:null===(r=l.collection_images)||void 0===r?void 0:null===(i=r.collectionId)||void 0===i?void 0:i._eq)===t.collectionId.toString()&&e.modify({id:"ROOT_QUERY",fields:{[n.replace("ROOT_QUERY.","")]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{readField:n}=arguments.length>1?arguments[1]:void 0;return e.filter(e=>{var i;let r=n("id",e);return(null==r?void 0:r.toString())!==(null===(i=t.generatedImageId)||void 0===i?void 0:i.toString())})}}})}}),e.evict({id:e.identify({__typename:"collection_image",id:t.id.toString()})}));e.gc()}}})},isDeletingCollectionImages:t}};var h=n(30345),v=n(69122);let x=()=>{let{handleGenError:e}=(0,o.B)(),t=(0,d.A)(),{userSelectedTeam:n}=(0,v.s)(),r=n(),[l,{loading:a}]=(0,i.n)(s.EFU);return{moveCollection:async function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,c=n.id?String(n.id):null,m=i.length>0,g=a.length>0;if(m&&s&&await s(n,i),g){let s=a.map(e=>Number(e.id)),m=r.id?{ids:s,parentCollectionId:c,contextTeamId:r.id}:{ids:s,parentCollectionId:c};try{await l({variables:{arg1:m},refetchQueries:()=>["GetCollections","GetCollectionDescendants"],optimisticResponse:{__typename:"mutation_root",updateCollections:{__typename:"UpdateCollectionsOutput",count:s.length}},update:e=>{s.forEach(t=>{e.modify({id:"collection:".concat(t),fields:{parentCollectionId:()=>c}})})}}),null==o||o(h.Le.MOVE,i.length,n,a.length)}catch(n){if((0,u.V)(n)&&(0,u.o)({error:n,onError:e}))return;return t({title:"Error",description:"Failed to update collection",type:d.k.error})}}},isMovingCollection:a}},f=()=>{let{userSelectedTeam:e}=(0,v.s)(),t=e(),{deleteCollectionImages:n,isDeletingCollectionImages:i}=p(),{createCollectionImages:r,isCreatingCollectionImages:l}=m({teamId:t.id});return{moveCollectionImages:async function(e,t,i){let l=e.id?String(e.id):null,a=t.map(e=>({_and:[{collectionId:{_eq:l},generatedImageId:{_eq:e.id}}]}));await n(a);let o=t.map(e=>({collectionId:l,generatedImageId:e.id}));await r(o,0===e.collection_images.length),null==i||i(h.Le.MOVE,t.length,e,0)},isMovingCollectionImages:i||l}},C=()=>{let{userSelectedTeam:e}=(0,v.s)(),t=e(),{deleteCollectionImages:n,isDeletingCollectionImages:r}=p(),{deleteCollection:l,isDeletingCollection:a}=(0,g.j)({teamId:t.id}),{createCollectionImages:o,isCreatingCollectionImages:d}=m({teamId:t.id}),[c,{loading:u}]=(0,i.n)(s.EFU),{moveCollectionImages:C,isMovingCollectionImages:I}=f(),{moveCollection:b}=x();async function y(e,t,n){let i=[];i=Array.isArray(t)?t.map(t=>({collectionId:String(e.id),generatedImageId:t.id})):[{collectionId:String(e.id),generatedImageId:t.id}],await o(i,!0);let r=Array.isArray(t)?t.length:1;null==n||n(h.Le.ADD,r,e)}async function _(e,t,i){let r=[];r=Array.isArray(t)?t.map(t=>({_and:[{collectionId:{_eq:String(e.id)},generatedImageId:{_eq:t.id}}]})):[{_and:[{collectionId:{_eq:String(e.id)},generatedImageId:{_eq:t.id}}]}],await n(r);let l=Array.isArray(t)?t.length:1;null==i||i(h.Le.REMOVE,l,e)}return{teamId:t.id,inTeam:!!t.id,handleAddCollectionImage:y,handleRemoveCollectionImage:_,handleMoveImages:C,handleMoveCollection:b,deleteCollection:l,createCollectionImages:o,deleteCollectionImages:n,isDeletingCollection:a,isMovingCollectionImages:I,isCreatingCollectionImages:d,isDeletingCollectionImages:r,isUpdatingCollectionsLoading:u}}},13050:(e,t,n)=>{n.d(t,{o:()=>C});var i=n(95155),r=n(74466),l=n(12115),a=n(56671),o=n(26420),s=n(4158),d=n(89405),c=n(81222),u=n(73280),m=n(19114),g=n(59434);let p=(0,r.F)("relative flex max-w-[600px] min-w-[300px] flex-col gap-1 rounded-lg border p-3.5 text-sm **:data-[slot=toast-icon]:size-5",{variants:{variant:{solid:"text-primary-foreground **:data-[slot=toast-description]:text-primary-foreground **:data-[slot=toast-icon]:text-primary-foreground border-transparent **:data-[slot=toast-description]:font-medium",outline:"bg-primary text-primary-foreground **:data-[slot=toast-description]:text-secondary-foreground border"},status:{success:"",warning:"",info:"",critical:""}},compoundVariants:[{variant:"solid",status:"success",className:["bg-positive"]},{variant:"solid",status:"info",className:["bg-info"]},{variant:"solid",status:"critical",className:["bg-negative"]},{variant:"solid",status:"warning",className:["bg-warning"]},{variant:"outline",status:"success",className:["border-positive **:data-[slot=toast-icon]:text-positive"]},{variant:"outline",status:"info",className:["border-notification **:data-[slot=toast-icon]:text-notification"]},{variant:"outline",status:"critical",className:["border-negative **:data-[slot=toast-icon]:text-negative"]},{variant:"outline",status:"warning",className:["border-warning **:data-[slot=toast-icon]:text-warning-foreground"]}],defaultVariants:{variant:"solid",status:"info"}}),h={success:(0,i.jsx)(d._,{"data-slot":"toast-icon"}),info:(0,i.jsx)(c.Y,{"data-slot":"toast-icon"}),critical:(0,i.jsx)(c.Y,{"data-slot":"toast-icon"}),warning:(0,i.jsx)(m.P,{"data-slot":"toast-icon"})},v=["hover:border-primary hover:bg-white hover:text-primary-inverse-foreground","disabled:opacity-70","active:border-primary active:bg-white/75"],x=(e,t,n,r)=>(0,i.jsx)(o.$,{size:"xs",variant:r?"outline":"solid"===t?"outline":"primary",className:(0,g.cn)("solid"===t&&["border-white",...v]),onClick:t=>{e.onClick(t),n()},children:e.label}),f=e=>{let{id:t,title:n,description:r,action:o,cancel:d,variant:c="solid",status:m="info",closeButton:f=!0,className:C,style:I,onDismiss:b}=e,y=(0,l.useMemo)(()=>h[m],[m]),_=()=>{a.oR.dismiss(t),b&&b({id:t,title:n,description:r,action:o,cancel:d,type:"critical"===m?"error":m||"default"})};return(0,i.jsxs)("div",{className:(0,g.cn)(p({variant:c,status:m}),C),style:I,role:"alert","aria-live":"critical"===m?"assertive":"polite",children:[(0,i.jsxs)("div",{className:"relative flex items-center gap-x-2 overflow-hidden",children:[y,(0,i.jsx)("div",{className:"flex-1 truncate pr-8 font-semibold",children:"function"==typeof n?n():n})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)("div",{className:"[&_p]:leading-relaxed","data-slot":"toast-description",children:"function"==typeof r?r():r}),(o||d)&&(0,i.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[d&&x(d,c,_,!0),o&&x(o,c,_)]})]}),f&&(0,i.jsx)(s.K,{"aria-label":"Dismiss ".concat(m," toast"),variant:"ghost",size:"sm",className:(0,g.cn)("absolute top-1 right-1 rounded-full",...v),onClick:_,children:(0,i.jsx)(u.A,{})})]})};function C(e){let{title:t,description:n,action:r,cancel:l,status:o,variant:s,duration:d,position:c,...u}=e;return a.oR.custom(e=>(0,i.jsx)(f,{id:e,title:t,description:n,action:r,cancel:l,status:o,variant:s,duration:d,position:c}),{duration:d||9e3,position:c||("outline"===s?"top-center":"bottom-right"),...u})}},13801:(e,t,n)=>{n.d(t,{Co:()=>c,Ig:()=>d,Nz:()=>a,_Q:()=>l,w8:()=>s,xS:()=>o});var i=n(3711),r=n.n(i);function l(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.id===t.id?{...e,weight:n}:e):null}function a(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.filter(e=>e.id!==t.id))&&void 0!==n?n:null}function o(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.map(e=>e.id===t.id?{...e,isDisabled:!e.isDisabled}:e))&&void 0!==n?n:null}function s(e,t){return(null==e?void 0:e.length)&&(null==t?void 0:t.length)?null==e?void 0:e.reduce((e,n)=>{let i=t.find(e=>e.id===n.id);return i&&e.push({...i,...n}),e},[]):[]}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t;return n&&(i=[...null!=e?e:[],...t]),r()(i,"id")}function c(e){var t;return(null==e?void 0:e.length)&&null!==(t=e.filter(e=>!e.isDisabled).map(e=>({id:e.id,weight:e.weight,isEnabled:!0})))&&void 0!==t?t:null}},15707:(e,t,n)=>{n.d(t,{j:()=>c});var i=n(88095),r=n(96982),l=n(20690),a=n(958),o=n(68691),s=n(91073),d=n(34853);let c=e=>{let{teamId:t}=e,{handleGenError:n}=(0,l.B)(),c=(0,s.A)(),u=(0,r.p)(),m=(0,o.G)(e=>e.generation.settings),[g,{loading:p}]=(0,i.n)(a.tZz,{onError:e=>{!((0,d.V)(e)&&(0,d.o)({error:e,onError:n}))&&c({title:"Error",description:"Failed to delete collection",type:s.k.error})},refetchQueries:[a.Dhk]});return{deleteCollection:async(e,n)=>{await g({variables:{arg1:{collectionIds:[Number(e)],includeImages:n,contextTeamId:t}},update(t){t.evict({id:t.identify({__typename:"collection",id:e.toString()})});let n=t.extract();Object.keys(n).forEach(i=>{var r;let l=null===(r=n[i])||void 0===r?void 0:r.collectionId;i.startsWith("collection_image:")&&e===l&&t.evict({id:i})}),t.gc()}}),m.collections&&u({collections:m.collections.filter(t=>String(t.id)!==String(e))})},isDeletingCollection:p}}},17403:(e,t,n)=>{n.d(t,{f:()=>i});let i=.5},19022:(e,t,n)=>{n.d(t,{S:()=>u});var i=n(95155),r=n(59279),l=n(74466),a=n(12115),o=n(8446),s=n(84434),d=n(59434);let c=(0,l.F)("border-tertiary bg-input ring-offset-background focus-visible:ring-ring disabled:bg-disabled data-[state=checked]:bg-gradient-primary data-[state=indeterminate]:bg-gradient-primary aria-invalid:data-[state=unchecked]:enabled:border-negative peer shrink-0 rounded-md border transition-colors focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden disabled:cursor-not-allowed disabled:opacity-70 data-[state=checked]:border-0 data-[state=indeterminate]:border-0",{variants:{size:{sm:"size-5 [&_svg]:size-4",default:"size-6 [&_svg]:size-5"}},defaultVariants:{size:"default"}}),u=a.forwardRef((e,t)=>{let{className:n,size:l,checked:a,invalid:u,...m}=e;return(0,i.jsx)(r.bL,{className:(0,d.cn)(c({size:l,className:n})),ref:t,checked:a,"aria-invalid":u,...m,children:(0,i.jsx)(r.C1,{className:"flex items-center justify-center",children:"indeterminate"===a?(0,i.jsx)(s.Q,{}):(0,i.jsx)(o.S,{})})})});u.displayName=r.bL.displayName},19710:(e,t,n)=>{n.d(t,{DE:()=>m,Db:()=>u,EZ:()=>d,Tc:()=>h,_f:()=>s,ky:()=>g,rD:()=>c,vE:()=>p});var i=n(32926),r=n(68655),l=n(35904),a=n(958);function o(e){return e.reduce((e,t)=>{var n;return"string"==typeof t.generatedImageId&&t.generatedImageId&&"string"==typeof(null===(n=t.generated_image)||void 0===n?void 0:n.url)&&t.generated_image.url?[...e,{id:t.generatedImageId,url:t.generated_image.url}]:e},[])}function s(e){return e?e.map(e=>(function e(t){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=[],d="number"==typeof t.id?t.id.toString():t.id;if("child_collections"in t){let n=[...l,t.akUUID];s=t.child_collections.map(t=>e(t,r+1,n))}let c=s.length?Math.max(...s.map(e=>e.maxDescendantDepth+1)):0,u=o(t.collection_images);return{id:d,akUUID:t.akUUID,collectionName:null!==(n=t.collectionName)&&void 0!==n?n:i.XU,depth:r,maxDescendantDepth:c,permission:a.Vmy.Owner,collectionImages:u,thumbnailUrl:u.length>0?u[0].url:null,ancestorIds:l,childCollections:s}})(e)):[]}function d(e){return e?e.map(e=>{let t=new Map;for(let n of e.descendants){let e="number"==typeof n.parentCollectionId?n.parentCollectionId.toString():n.parentCollectionId,i=t.get(e);i?t.set(e,[...i,n]):t.set(e,[n])}return function e(t,n){var r;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=[],s="number"==typeof t.id?t.id.toString():t.id,d=n.get(s);if(d){let i=[...l,t.akUUID];a=d.map(t=>e(t,n,i))}let c=o(t.collection_images);return{id:t.id.toString(),akUUID:t.akUUID,collectionName:null!==(r=t.collectionName)&&void 0!==r?r:i.XU,depth:t.depth,maxDescendantDepth:t.maxDescendantDepth,collectionImages:c,thumbnailUrl:c.length>0?c[0].url:null,ancestorIds:l,permission:t.collection_user_effective_permissions.permission,childCollections:a}}(e,t)}):[]}function c(e){let t=new Map;return(0,l.g$)(e,e=>{t.set(e.id,e),t.set(e.akUUID,e)}),t}function u(e,t,n){return e.map(e=>(function e(t,n,a){let o=[];t.childCollections.length>0&&o.push(...t.childCollections.map(t=>e(t,n,a)));let s=t.depth<i.UU-1&&(0,r.Dr)((0,l.d5)(t),n).isAllowed;return{id:t.akUUID,name:t.collectionName,thumbnailUrl:t.thumbnailUrl,isExpanded:(0,r.qx)(t,a),isCurrent:!!a&&t.id===a.id,canCreate:s,moveValidation:(0,r.Dr)(t,n),children:o}})(e,t,n))}function m(e,t,n){return e.map(e=>(function e(t,n,l){let a=[];return t.childCollections.length>0&&a.push(...t.childCollections.map(t=>e(t,n,l))),{id:t.akUUID,name:t.collectionName,thumbnailUrl:t.thumbnailUrl,selection:(0,r.Ku)(t,n),isExpanded:(0,r.qx)(t,l),isCurrent:!!l&&t.id===l.id,canCreate:t.depth<i.UU-1,children:a}})(e,t,n))}function g(e,t){return e.map(e=>(function e(t,n){let r=[];return t.childCollections.length>0&&r.push(...t.childCollections.map(t=>e(t,n))),{id:t.akUUID,name:t.collectionName,thumbnailUrl:t.thumbnailUrl,selection:n.some(e=>{let{akUUID:n}=e;return n===t.akUUID})?"checked":"unchecked",isExpanded:!1,isCurrent:!1,canCreate:t.depth<i.UU-1,children:r}})(e,t))}function p(e){let t=new Map;return e&&function e(n){for(let i of n)t.set(i.akUUID,i),"child_collections"in i&&i.child_collections.length>0&&e(i.child_collections)}(e),t}function h(e){let t=new Map;if(!e)return t;for(let n of e)t.set(n.akUUID,n),n.descendants.forEach(e=>{t.set(e.akUUID,e)});return t}},21542:(e,t,n)=>{n.d(t,{AY:()=>r,tu:()=>l,v1:()=>i});var i=function(e){return e[e.MOVE=0]="MOVE",e[e.UPDATE=1]="UPDATE",e[e.SELECT=2]="SELECT",e[e.SELECT_FOR_GENERATING=3]="SELECT_FOR_GENERATING",e}({}),r=function(e){return e[e.PERSONAL=0]="PERSONAL",e[e.TEAM=1]="TEAM",e[e.PERSONAL_TEAM=2]="PERSONAL_TEAM",e}({}),l=function(e){return e[e.INTERNAL=0]="INTERNAL",e[e.EXTERNAL=1]="EXTERNAL",e}({})},22613:(e,t,n)=>{n.d(t,{T:()=>o,Y:()=>a});var i=n(95155),r=n(12115);let l=(0,r.createContext)({presets:[]}),a=()=>(0,r.useContext)(l),o=e=>{let{presets:t,children:n}=e,a=(0,r.useMemo)(()=>({presets:t}),[t]);return(0,i.jsx)(l.Provider,{value:a,children:n})}},23653:(e,t,n)=>{n.d(t,{C:()=>p});var i=n(85756),r=n(47437),l=n(78192),a=n(75264);let o=()=>(0,r.tq)({cost:i.VP.UPSCALE_ALCHEMY,generationType:i.s1.VARIATION}),s=()=>(0,r.tq)({cost:i.VP.UPSCALE,generationType:i.s1.VARIATION}),d=()=>(0,r.tq)({cost:i.VP.UNZOOM,generationType:i.s1.VARIATION}),c=()=>(0,r.tq)({cost:i.VP.NOBG,generationType:i.s1.VARIATION}),u=e=>{let{generated_image_variation_generics:t,imageVariationType:n,image:i}=e,{hasHitLimitUpscaleDefault:r,hasHitLimitUpscaleAlternate:u,hasHitLimitUpscaleSmooth:m,hasHitLimitUpscaleHd:g,hasHitLimitUnzoom:p,hasHitLimitNoBg:h}=(0,a.fu)(t),v=i?(0,a.YN)(i):[],x=(0,a.tk)({availableVariations:v,variation:"UPSCALE"}),f=(0,a.tk)({availableVariations:v,variation:"UNZOOM"}),C=(0,a.tk)({availableVariations:v,variation:"NOBG"});switch(n){case l.Jr.ALCHEMY_REFINER:return!o();case l.Jr.UPSCALE_DEFAULT:{let e=s();return r||!e||!x}case l.Jr.UPSCALE_ALTERNATE:{let e=s();return u||!e||!x}case l.Jr.UPSCALE_SMOOTH:{let e=s();return m||!e||!x}case l.Jr.UPSCALE_HD:{let e=s();return g||!e||!x}case l.Jr.UNZOOM:let I=d();return p||!I||!f;case l.Jr.NO_BG:let b=c();return h||!b||!C;default:throw Error("isVariationDisabled: Unhandled image variation type")}},m=e=>{let{generated_image_variation_generics:t,image:n}=e,i=u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.ALCHEMY_REFINER}),r=u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.UPSCALE_DEFAULT}),a=u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.UPSCALE_ALTERNATE}),o=u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.UPSCALE_SMOOTH}),s=u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.UPSCALE_HD});return{isDisabledAlchemyRefiner:i,isDisabledUpscaleDefault:r,isDisabledUpscaleAlternate:a,isDisabledUpscaleSmooth:o,isDisabledUpscaleHd:s,isDisabledUnzoom:u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.UNZOOM}),isDisabledNobg:u({generated_image_variation_generics:t,image:n,imageVariationType:l.Jr.NO_BG})}},g={id:"",transformType:null,upscale_details:[],url:null},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return m({generated_image_variation_generics:e||[],image:t})}},24450:(e,t,n)=>{n.d(t,{a:()=>i});let i=500},26365:(e,t,n)=>{n.d(t,{P:()=>o});var i=n(95155),r=n(31481),l=n(12115),a=n(89867);let o=(0,l.forwardRef)((e,t)=>{let{onChange:n,onInput:l,maxLength:o,...s}=e;return(0,i.jsx)(a.A,{ref:t,size:"xl",placeholder:"Type a prompt ...",maxLength:null!=o?o:r.generationDefaults.prompt.max,variant:"filled",color:"#979797",resize:"none",fontSize:{md:"xl"},bgColor:"old.darkblue",borderColor:"old.greyblue",borderWidth:1,rounded:"lg",lineHeight:"170%",_hover:{bg:"darkbluealt"},py:2.5,px:4,onChange:e=>null==n?void 0:n(e.target.value),onInput:e=>null==l?void 0:l(e),...s})});o.displayName="PromptInput"},28634:(e,t,n)=>{n.d(t,{Sj:()=>D});var i=n(69507),r=n(27807),l=n(12115),a=n(21542),o=n(35904),s=n(958),d=n(83833),c=n(69122),u=n(64478),m=n(15933),g=n(36112);function p(){let e=(0,m._)(["\n	query GetCollectionsSharedWithMe {\n		getSharedCollections {\n			id\n			akUUID\n			collectionName\n			createdAt\n			collection_user_effective_permissions {\n				permission\n			}\n			collection_images(limit: 4) {\n				id\n				collectionId\n				generatedImageId\n				generated_image {\n					id\n					url\n				}\n			}\n		}\n	}\n"]);return p=function(){return e},e}function h(){let e=(0,m._)(["\n	query GetCollectionDescendantsSharedWithMe {\n		getSharedCollections {\n			id\n			collectionName\n			akUUID\n			maxDescendantDepth\n			depth\n			collection_user_effective_permissions {\n				permission\n			}\n			collection_images(limit: 4) {\n				id\n				collectionId\n				generatedImageId\n				generated_image {\n					url\n					id\n				}\n			}\n			descendants {\n				id\n				collectionName\n				parentCollectionId\n				akUUID\n				maxDescendantDepth\n				depth\n				collection_user_effective_permissions {\n					permission\n				}\n				collection_images(limit: 4) {\n					id\n					collectionId\n					generatedImageId\n					generated_image {\n						url\n						id\n					}\n				}\n			}\n		}\n	}\n"]);return h=function(){return e},e}function v(){let e=(0,m._)(["\n	query GetCollectionDescendants($where: collection_bool_exp!, $limit: Int, $offset: Int) {\n		collection(where: $where, limit: $limit, offset: $offset, order_by: [{ collectionName: asc }, { createdAt: asc }]) {\n			id\n			collectionName\n			parentCollectionId\n			akUUID\n			maxDescendantDepth\n			depth\n			collection_user_effective_permissions {\n				permission\n			}\n			collection_images {\n				id\n				collectionId\n				generatedImageId\n				generated_image {\n					url\n					id\n				}\n			}\n			descendants(order_by: { depth: asc, collectionName: asc, createdAt: asc }) {\n				id\n				collectionName\n				parentCollectionId\n				akUUID\n				maxDescendantDepth\n				depth\n				collection_user_effective_permissions {\n					permission\n				}\n				collection_images {\n					id\n					collectionId\n					generatedImageId\n					generated_image {\n						url\n						id\n					}\n				}\n			}\n		}\n	}\n"]);return v=function(){return e},e}function x(){let e=(0,m._)(["\n	query GetCollectionAncestors {\n		getCollectionAncestors {\n			id\n			akUUID\n			collectionName\n			depth\n		}\n	}\n"]);return x=function(){return e},e}function f(){let e=(0,m._)(["\n	query GetCollectionMembers($id: String!) {\n		getCollectionMembers(id: $id) {\n			collectionId\n			email\n			inTeam\n			userId\n			isInherited\n			permission\n			username\n		}\n	}\n"]);return f=function(){return e},e}function C(){let e=(0,m._)(["\n	query GetCollectionTeams($id: String!) {\n		getCollectionTeams(id: $id) {\n			collectionId\n			teamId\n			permission\n			teamName\n			isInherited\n			numMembers\n			teamLogoUrl\n		}\n	}\n"]);return C=function(){return e},e}function I(){let e=(0,m._)(["\n	mutation SetCollectionSharing($input: SetCollectionSharingInput!) {\n		setCollectionSharing(input: $input) {\n			collectionMembers {\n				collectionId\n				email\n				username\n				permission\n				inTeam\n				userId\n				isInherited\n			}\n			collectionTeams {\n				collectionId\n				teamId\n				permission\n				teamName\n				isInherited\n				numMembers\n				teamLogoUrl\n			}\n		}\n	}\n"]);return I=function(){return e},e}let b=(0,g.Ay)(p()),y=(0,g.Ay)(h()),_=(0,g.Ay)(v()),j=(0,g.Ay)(x()),S=(0,g.Ay)(f()),E=(0,g.Ay)(C()),U=(0,g.Ay)(I()),w=[{request:{query:b,variables:{input:{topLevelCollectionsOnly:!0}}},result:{data:{getSharedCollections:[{id:1,akUUID:"collection-1",collectionName:"Shared Collection 1 - Viewer",createdAt:"2024-03-16T12:00:00Z",user:{id:"user-1",username:"user1"},collection_user_effective_permissions:{permission:"viewer"},collection_images:[{id:1,collectionId:1,generatedImageId:"gen-1",generated_image:{id:"gen-1",url:"https://example.com/image1.jpg"}}]},{id:2,akUUID:"collection-2",collectionName:"Shared Collection 2 - Editor",createdAt:"2024-03-16T12:00:00Z",user:{id:"user-2",username:"user2"},collection_user_effective_permissions:{permission:"editor"},collection_images:[{id:2,collectionId:2,generatedImageId:"gen-2",generated_image:{id:"gen-2",url:"https://example.com/image2.jpg"}}]}]}}},{request:{query:b,variables:{input:{topLevelCollectionsOnly:!0,teamId:"mock-team-id"}}},result:{data:{getSharedCollections:[{id:3,akUUID:"collection-3",collectionName:"Shared Team Collection 3 - Viewer",createdAt:"2024-03-16T12:00:00Z",user:{id:"user-3",username:"user3"},collection_user_effective_permissions:{permission:"viewer"},collection_images:[{id:3,collectionId:3,generatedImageId:"gen-3",generated_image:{id:"gen-3",url:"https://example.com/image3.jpg"}}]},{id:4,akUUID:"collection-4",collectionName:"Shared Team Collection 4 - Editor",createdAt:"2024-03-16T12:00:00Z",user:{id:"user-4",username:"user4"},collection_user_effective_permissions:{permission:"editor"},collection_images:[{id:4,collectionId:4,generatedImageId:"gen-4",generated_image:{id:"gen-4",url:"https://example.com/image4.jpg"}}]}]}}},{request:{query:y,variables:{input:{teamId:"mock-user-id"}}},result:{data:{getSharedCollections:[{id:1,collectionName:"Parent Collection - Root",akUUID:"collection-1",maxDescendantDepth:2,depth:0,collection_user_effective_permissions:{permission:"editor"},collection_images:[{id:1,collectionId:1,generatedImageId:"gen-1",generated_image:{url:"https://example.com/image1.jpg",id:"gen-1"}}],descendants:[{id:5,collectionName:"Child Collection",parentCollectionId:1,akUUID:"collection-5",maxDescendantDepth:1,depth:1,collection_user_effective_permissions:{permission:"editor"},collection_images:[]},{id:6,collectionName:"Grandchild Collection",parentCollectionId:5,akUUID:"collection-6",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"editor"},collection_images:[]},{id:7,collectionName:"Child Collection 2",parentCollectionId:1,akUUID:"collection-7",maxDescendantDepth:0,depth:1,collection_user_effective_permissions:{permission:"editor"},collection_images:[]}]},{id:2,collectionName:"Parent Collection - Not Root",akUUID:"collection-2",maxDescendantDepth:1,depth:1,collection_user_effective_permissions:{permission:"viewer"},collection_images:[],descendants:[{id:8,collectionName:"Child Collection",parentCollectionId:2,akUUID:"collection-8",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"viewer"},collection_images:[]},{id:9,collectionName:"Child Collection 2",parentCollectionId:2,akUUID:"collection-9",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"viewer"},collection_images:[]}]}]}}},{request:{query:y,variables:{input:{teamId:"mock-team-id"}}},result:{data:{getSharedCollections:[{id:3,collectionName:"Parent Collection - Root",akUUID:"collection-3",maxDescendantDepth:2,depth:0,collection_user_effective_permissions:{permission:"editor"},collection_images:[{id:3,collectionId:3,generatedImageId:"gen-3",generated_image:{url:"https://example.com/image3.jpg",id:"gen-3"}}],descendants:[{id:10,collectionName:"Child Collection",parentCollectionId:3,akUUID:"collection-10",maxDescendantDepth:1,depth:1,collection_user_effective_permissions:{permission:"editor"},collection_images:[]},{id:11,collectionName:"Grandchild Collection",parentCollectionId:10,akUUID:"collection-11",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"editor"},collection_images:[]},{id:12,collectionName:"Child Collection 2",parentCollectionId:3,akUUID:"collection-12",maxDescendantDepth:0,depth:1,collection_user_effective_permissions:{permission:"editor"},collection_images:[]}]},{id:4,collectionName:"Parent Collection - Not Root",akUUID:"collection-4",maxDescendantDepth:1,depth:1,collection_user_effective_permissions:{permission:"viewer"},collection_images:[],descendants:[{id:13,collectionName:"Child Collection",parentCollectionId:4,akUUID:"collection-13",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"viewer"},collection_images:[]},{id:14,collectionName:"Child Collection 2",parentCollectionId:4,akUUID:"collection-14",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"viewer"},collection_images:[]}]}]}}},{request:{query:_,variables:{where:{userId:{_eq:"mock-user-id"}}}},result:{data:{collection:[{id:3,collectionName:"Parent Collection - Root",akUUID:"collection-3",maxDescendantDepth:2,parentCollectionId:null,depth:0,collection_user_effective_permissions:{permission:"editor"},collection_images:[{id:3,collectionId:3,generatedImageId:"gen-3",generated_image:{url:"https://example.com/image3.jpg",id:"gen-3"}}],descendants:[{id:10,collectionName:"Child Collection",parentCollectionId:3,akUUID:"collection-10",maxDescendantDepth:1,depth:1,collection_user_effective_permissions:{permission:"editor"},collection_images:[]},{id:11,collectionName:"Grandchild Collection",parentCollectionId:10,akUUID:"collection-11",maxDescendantDepth:0,depth:2,collection_user_effective_permissions:{permission:"editor"},collection_images:[]},{id:12,collectionName:"Child Collection 2",parentCollectionId:3,akUUID:"collection-12",maxDescendantDepth:0,depth:1,collection_user_effective_permissions:{permission:"editor"},collection_images:[]}]},{id:4,collectionName:"Parent Collection - Root 2",akUUID:"collection-4",maxDescendantDepth:1,depth:0,parentCollectionId:null,collection_user_effective_permissions:{permission:"viewer"},collection_images:[],descendants:[{id:13,collectionName:"Child Collection",parentCollectionId:4,akUUID:"collection-13",maxDescendantDepth:0,depth:1,collection_user_effective_permissions:{permission:"viewer"},collection_images:[]},{id:14,collectionName:"Child Collection 2",parentCollectionId:4,akUUID:"collection-14",maxDescendantDepth:0,depth:1,collection_user_effective_permissions:{permission:"viewer"},collection_images:[]}]}]}}},{request:{query:j,variables:{input:{id:"collection-11"}}},result:{data:{getCollectionAncestors:[{id:3,akUUID:"collection-3",collectionName:"Parent Collection - Root",depth:0},{id:10,akUUID:"collection-10",collectionName:"Child Collection",depth:1}]}}},{request:{query:S,variables:{id:"collection-1"}},result:{data:{getCollectionMembers:[{__typename:"CollectionMember",collectionId:"collection-1",email:"user1@example.com",inTeam:!0,userId:"user-1",isInherited:!1,permission:"VIEWER",username:"user1"},{__typename:"CollectionMember",collectionId:"collection-1",email:"user2@example.com",inTeam:!1,userId:"user-2",isInherited:!1,permission:"EDITOR",username:"user2"},{__typename:"CollectionMember",collectionId:"collection-1",email:"user3@example.com",inTeam:!0,userId:null,isInherited:!0,permission:"VIEWER",username:"user3"},{__typename:"CollectionMember",collectionId:"collection-1",email:"user4@example.com",inTeam:!1,userId:null,isInherited:!0,permission:"VIEWER",username:"user4"},{__typename:"CollectionMember",collectionId:"collection-1",email:"user5@example.com",inTeam:!0,userId:"user-5",isInherited:!1,permission:"OWNER",username:"user5"}]}}},{request:{query:E,variables:{id:"collection-1"}},result:{data:{getCollectionTeams:[{__typename:"CollectionTeam",collectionId:"collection-1",teamId:"team-1",permission:"VIEWER",teamName:"Team 1",isInherited:!1,numMembers:3,teamLogoUrl:null}]}}},{request:{query:U,variables:{input:{collectionId:"collection-1",usersSharing:[{email:"user1@example.com",permission:"EDITOR"}],teamsSharing:[{teamId:"team-1",permission:"EDITOR"}]}}},result:{data:{setCollectionSharing:{collectionMembers:[{__typename:"CollectionMember",userId:"user-1",collectionId:"collection-1",permission:"EDITOR",email:"user1@example.com",username:"user1",inTeam:!0,isInherited:!1}],collectionTeams:[{__typename:"CollectionTeam",teamId:"team-1",collectionId:"collection-1",permission:"EDITOR",teamName:"Team 1",isInherited:!1,numMembers:3,teamLogoUrl:null}]}}}},{request:{query:U,variables:{input:{collectionId:"collection-1",usersSharing:[{email:"user6@example.com",permission:"VIEWER"},{email:"user7@example.com",permission:"VIEWER"}]}}},result:{data:{setCollectionSharing:{collectionMembers:[{__typename:"CollectionMember",userId:"user-6",collectionId:"collection-1",permission:"VIEWER",email:"user6@example.com",username:"user6",inTeam:!0,isInherited:!1},{__typename:"CollectionMember",userId:"user-7",collectionId:"collection-1",permission:"VIEWER",email:"user7@example.com",username:"user7",inTeam:!1,isInherited:!1}],collectionTeams:[]}}}}];function T(e,t,n){let a=(0,l.useRef)(!0),{data:o,fetchMore:s,networkStatus:d}=(0,i.I)(e,{variables:{...t,limit:100},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0});return{collections:(0,l.useMemo)(()=>(null==o?void 0:o[n])||[],[o,n]),onLoadMore:e=>{a.current&&s({variables:{...t,limit:100,offset:e+100},updateQuery:(e,t)=>{let{fetchMoreResult:i}=t;if(!i)return e;let r=e[n]||[],l=i[n]||[];a.current=100===l.length;let o=new Map(r.map(e=>[e.akUUID,e]));l.forEach(e=>{o.has(e.akUUID)||o.set(e.akUUID,e)});let s=Array.from(o.values());return{...e,[n]:s}}})},loadingState:d===r.pT.loading?"loading":d===r.pT.fetchMore?"fetchingMore":"idle"}}function A(e,t){return e?"personal"===t?a.AY.PERSONAL_TEAM:a.AY.TEAM:a.AY.PERSONAL}function D(e){var t,n;let{isSharedCollectionsEnabled:i}=(0,d.D)(),r=(0,u.w)(),{userSelectedTeam:l}=(0,c.s)(),a=l().id,m=function(e,t){let n=A(t,"personal"),i=(0,o.qz)(n,e,t);return T(s.qm9,i,"collection")}(r,a),g=function(e,t){let n=A(t,"team"),i=(0,o.qz)(n,e,t);return T(s.qm9,i,"collection")}(r,a),p={collections:(null===(t=w.find(e=>e.request.query===_))||void 0===t?void 0:t.result.data.collection)||[],onLoadMore:()=>{},loadingState:"idle"},h={collections:(null===(n=w.find(e=>e.request.query===y))||void 0===n?void 0:n.result.data.getSharedCollections)||[],onLoadMore:()=>{},loadingState:"idle"};return i?"personal"===e?p:h:"personal"===e?m:g}},29309:(e,t,n)=>{n.d(t,{a:()=>b});var i=n(88095),r=n(12115),l=n(69122),a=n(5138),o=n(46671),s=n(958),d=n(85756),c=n(78192);let u={},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,{fallbackData:n,onStopPolling:i}=t,[l,m]=(0,r.useState)(!1),[g,{data:p,startPolling:h,stopPolling:v}]=(0,a._)(s.TRe,{variables:{generatedImageId:e},fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,onCompleted:e=>{e.generated_image_variation_generic.some(e=>e.status===d.nE.PENDING)||(m(!1),v(),null==i||i())}}),x=(null==p?void 0:p.generated_image_variation_generic)||n||[],f=(null==x?void 0:x.filter(e=>e.status===d.nE.PENDING).map(e=>{var t;return{status:e.status,transformType:e.transformType,variant:null===(t=e.upscale_details.find(e=>e.oneClicktype))||void 0===t?void 0:t.oneClicktype}}))||[],C=f.some(e=>e.transformType===o.VARIATION_TYPE.UNZOOM),I=f.some(e=>e.transformType===o.VARIATION_TYPE.NOBG),b=f.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER),y=f.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.DEFAULT),_=f.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.ALTERNATE),j=f.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.SMOOTH),S=f.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.HD),E=f.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.ULTRA),U={[c.Jr.UNZOOM]:C,[c.Jr.NO_BG]:I,[c.Jr.ALCHEMY_REFINER]:b,[c.Jr.UPSCALE_DEFAULT]:y,[c.Jr.UPSCALE_ALTERNATE]:_,[c.Jr.UPSCALE_SMOOTH]:j,[c.Jr.UPSCALE_HD]:S,[c.Jr.UPSCALE_ULTRA]:E},w=(0,r.useCallback)(async e=>{m(!0),h(e),await g()},[g,h]);return(0,r.useEffect)(()=>{f.length&&!l&&w(1e4)},[f.length,w,l,v]),[w,{pollingVariations:l,pendingVariations:U}]};var g=n(20690),p=n(40236),h=n(71503),v=n(34853),x=n(38819),f=n(62618);let C=()=>x.Ay.dispatch((0,f.FS)()),I={},b=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,{fallbackData:a,onComplete:o}=n,[d,u]=(0,r.useState)(!1),[x,{pendingVariations:f}]=m(e||"",{fallbackData:a}),{userSelectedTeam:b}=(0,l.s)(),y=b(),_=t||e,j=_===e,S={arg1:{id:_||"",isVariation:!j,...y.id&&{teamId:y.akUUID}}},E=(0,p.A)({mutationImageId:S.arg1.id,imageVariationType:c.Jr.UPSCALE_DEFAULT,originalImageId:e||""}),U={onCompleted:C,refetchQueries:[{query:s.Z7e,variables:{id:e}}]},[w,{loading:T}]=(0,i.n)(s.Dxs,U),[A,{loading:D}]=(0,i.n)(s.P7V,U),[k,{loading:R}]=(0,i.n)(s.yI8,U),[M,{loading:N}]=(0,i.n)(s.yI8,U),[P,{loading:L}]=(0,i.n)(s.yI8,U),[V,{loading:O}]=(0,i.n)(s.yI8,U),{handleGenError:H}=(0,g.B)(),F=T||f[c.Jr.NO_BG],G=D||f[c.Jr.UNZOOM],B=R||f[c.Jr.ALCHEMY_REFINER],z=d||f[c.Jr.UPSCALE_DEFAULT],W=N||f[c.Jr.UPSCALE_ALTERNATE],Y=L||f[c.Jr.UPSCALE_SMOOTH],K=O||f[c.Jr.UPSCALE_HD],q=f[c.Jr.UPSCALE_ULTRA],Z=B||Y||z||W||O||L||q,J=async()=>{await x(1e4)};return{alchemyRefinerLoading:B,upscaleDefaultLoading:z,upscaleAltLoading:W,upscaleHdLoading:K,upscaleSmoothLoading:Y,upscaleLoading:Z,removeBgLoading:F,unzoomLoading:G,upscaleUltraLoading:q,handleUpscaleDefault:async()=>{u(!0),await E(),u(!1),J(),null==o||o("upscale")},handleRemoveBg:async()=>{try{await w({variables:S}),J(),null==o||o("remove-bg")}catch(e){if((0,h.Y)(e)&&(0,h.H)({error:e,onError:H})||(0,v.V)(e)&&(0,v.o)({error:e,onError:H}))return;throw e}},handleUnzoom:async()=>{try{await A({variables:S}),J(),null==o||o("unzoom")}catch(e){if((0,h.Y)(e)&&(0,h.H)({error:e,onError:H})||(0,v.V)(e)&&(0,v.o)({error:e,onError:H}))return;throw e}},handleAlchemyRefiner:async(e,t,n,i)=>{try{await k({variables:{arg1:{...S.arg1,...n&&{id:n},alchemyRefiner:!0,alchemyRefinerCreative:t,alchemyRefinerStrength:e,alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!1}},...i&&{refetchQueries:i}}),await J()}catch(e){if((0,v.V)(e)&&(0,v.o)({error:e,onError:H}))return;throw e}},handleUpscaleAlt:async()=>{await M({variables:{arg1:{...S.arg1,alternativeUpscale:!0,hdUpscale:!1,smoothUpscale:!1}}}),J(),null==o||o("upscale")},handleUpscaleSmooth:async(e,t)=>{try{await P({variables:{arg1:{...S.arg1,...e&&{id:e},alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!0}},...t&&{refetchQueries:t}}),J(),null==o||o("upscale")}catch(e){if((0,h.Y)(e)&&(0,h.H)({error:e,onError:H})||(0,v.V)(e)&&(0,v.o)({error:e,onError:H}))return;throw e}},handleUpscaleHd:async(e,t)=>{try{await V({variables:{arg1:{...S.arg1,...e&&{id:e},alternativeUpscale:!1,hdUpscale:!0,smoothUpscale:!1}},...t&&{refetchQueries:t}}),J(),null==o||o("upscale")}catch(e){if((0,h.Y)(e)&&(0,h.H)({error:e,onError:H})||(0,v.V)(e)&&(0,v.o)({error:e,onError:H}))return;throw e}},handleReport:async()=>{null==o||o("report")},handleDelete:()=>{null==o||o("delete")},openAlchemyRefinerModal:()=>{null==o||o("alchemy-refiner")},startPollingImageVariations:x}}},30345:(e,t,n)=>{n.d(t,{Le:()=>i});let i={ADD_COLLECTION:"ADD_COLLECTION",ADD:"ADD",REMOVE:"REMOVE",MOVE:"MOVE"};[...["DUPLICATE_COLLECTION","LEAVE_COLLECTION","DOWNLOAD_COLLECTION","VIEW_CONTENT","DUPLICATE_CONTENT","DOWNLOAD_CONTENT","RENAME_COLLECTION","ADD_USER","REMOVE_USER","CHANGE_PERMISSION","ADD_TEAM","REMOVE_TEAM","CHANGE_TEAM_PERMISSION","APPEND_TO_COLLECTION","ADD_CONTENT","REMOVE_CONTENT","HIDE_CONTENT","DELETE_CONTENT","TRANSFER_CONTENT"].filter(e=>"LEAVE_COLLECTION"!==e)]},31188:(e,t,n)=>{n.d(t,{$:()=>b});var i,r=n(29319),l=n(31481),a=n(30208),o=n(96729),s=n(80898),d=n(52592),c=n(35936),u=n(31698);let m=e=>{let{context:t}=e;return!((0,c.L7)(t.modelVersion)||(0,c.vT)(t.modelVersion)||(0,c.Ye)(t.modelVersion))};var g=n(89239),p=n(33383);let h=e=>(0,c.CV)(e.modelVersion)?{transparency:!1}:(0,c.L7)(e.modelVersion)||(0,c.vT)(e.modelVersion)?{transparency:!1,photoReal:!1}:(0,c.Ye)(e.modelVersion)?{photoReal:!1}:{},v=e=>e.alchemy?{}:{photoReal:!1};var x=n(13801),f=n(43195),C=n(72681);let I=(0,a.mj)({types:{},guards:{isAlchemyOn:e=>{let{context:t}=e;return t.alchemy},isGenerationModeQuality:(0,r.H)({generationMode:"quality"}),isGenerationModeUltra:(0,r.H)({generationMode:"ultra"}),canUsePremium:e=>{var t;let{event:n}=e;return!(null===(t=n.params)||void 0===t?void 0:t.isUserFreePlan)},canChangePrivate:(e,t)=>!t.isUserFreePlan,canImprovePrompt:e=>{let{context:t}=e;return!!t.prompt&&0!==t.prompt.trim().length&&t.prompt.length>0&&t.prompt.length<=p.Ey},canDescribeImage:(0,r.F)("generatingPrompt"),canUseAspectRatio:(e,t)=>!t.isUserFreePlan||"2.4:1"!==t.aspectRatio,canUseAspectRatioNamed:(e,t)=>!t.isUserFreePlan||"wide"!==t.namedAspectRatioKey,canUseControlNets:e=>{let{context:t}=e;return!(0,c.CV)(t.modelVersion)},canUseCharacterReference:e=>{var t,n;let{context:i,event:r}=e,l=null!==(n=i.modelVersion)&&void 0!==n?n:null,a={controlnetType:d.bd.FaceTransfer},o={isCharacterReferenceForPhoenixEnabled:null===(t=r.params)||void 0===t?void 0:t.isCharacterReferenceForPhoenixEnabled};return(0,c.Kw)(a,l,i.imageGuidanceInputs,o).value},canUseContentReference:e=>{var t,n,i;let{context:r,event:l}=e,a=null!==(i=r.modelVersion)&&void 0!==i?i:null,o={controlnetType:d.bd.ContentTransfer},s={isContentReferenceForFluxEnabled:null===(t=l.params)||void 0===t?void 0:t.isContentReferenceForFluxEnabled,isContentReferenceForPhoenixEnabled:null===(n=l.params)||void 0===n?void 0:n.isContentReferenceForPhoenixEnabled};return(0,c.Kw)(o,a,r.imageGuidanceInputs,s).value},canUseDepthToImage:e=>{var t;let{context:n}=e,i=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:d.bd.Depth};return(0,c.Kw)(r,i,n.imageGuidanceInputs,{}).value},canUseEdgeToImage:e=>{var t;let{context:n}=e,i=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:d.bd.Canny};return(0,c.Kw)(r,i,n.imageGuidanceInputs,{}).value},canUsePoseToImage:e=>{var t;let{context:n}=e,i=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:d.bd.OpenPose};return(0,c.Kw)(r,i,n.imageGuidanceInputs,{}).value},canUseStyleReference:e=>{var t,n;let{context:i,event:r}=e,l=null!==(n=i.modelVersion)&&void 0!==n?n:null,a={controlnetType:d.bd.StyleTransfer},o={isStyleReferenceForFluxEnabled:null===(t=r.params)||void 0===t?void 0:t.isStyleReferenceForFluxEnabled};return(0,c.Kw)(a,l,i.imageGuidanceInputs,o).value},canUseTextImageInput:e=>{var t;let{context:n}=e,i=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:d.bd.Text};return(0,c.Kw)(r,i,n.imageGuidanceInputs,{}).value},canUseCustomResolutions:(e,t)=>!t.isUserFreePlan,canUseElements:e=>{let{context:t}=e;return!((0,c.CV)(t.modelVersion)||(0,c.QB)(t.modelVersion))},canUseUserElements:e=>{let{context:t}=e;return!((0,c.CV)(t.modelVersion)||(0,c.L7)(t.modelVersion)||(0,c.QB)(t.modelVersion))},canUseImageSize:(e,t)=>!t.isUserFreePlan||"High"!==t.imageSize,canUseImageToImage:e=>{var t,n;let{context:i,event:r}=e,l=null!==(n=i.modelVersion)&&void 0!==n?n:null,a={akUUID:u.w.Img2Img},o={isImageToImageForFluxEnabled:null===(t=r.params)||void 0===t?void 0:t.isImageToImageForFluxEnabled};return(0,c.Kw)(a,l,i.imageGuidanceInputs,o).value},canUseNegativePrompt:e=>{let{context:t}=e;return!(0,c.vT)(t.modelVersion)},canUsePhotoReal:m,canUsePromptEnhance:e=>{let{context:t}=e;return!!((0,c.CV)(t.modelVersion)||(0,c.L7)(t.modelVersion)||(0,c.vT)(t.modelVersion))},canUseTransparency:e=>{let{context:t}=e;return!((0,c.CV)(t.modelVersion)||(0,c.L7)(t.modelVersion)||(0,c.vT)(t.modelVersion))},canUseTiling:e=>{let{context:t}=e;return!((0,c.CV)(t.modelVersion)||(0,c.vT)(t.modelVersion))},generatingPrompt:(0,r.G)([(0,r.H)({promptGenerate:"generating"}),(0,r.H)({describeImage:"generating"})]),hasValidPrompt:e=>{let{context:t}=e;return!!t.prompt&&0!==t.prompt.trim().length&&t.prompt.length>0&&t.prompt.length<=l.generationDefaults.prompt.max},isValidModel:e=>{var t;let{event:n}=e;return(0,c.ef)(null===(t=n.params)||void 0===t?void 0:t.modelVersion)},canSubmit:(0,r.E)(["hasValidPrompt",(0,r.F)("generatingPrompt")]),canSubmitWithPromptEnhance:(0,r.F)("generatingPrompt"),canUseContrast:e=>{let{context:t}=e;return!(0,c.vT)(t.modelVersion)},canUseQualityGenerationMode:e=>{let{context:t}=e;return!(0,c.vT)(t.modelVersion)},canUseUltraGenerationMode:e=>{var t;let{context:n}=e,i=null==n?void 0:null===(t=n.preset)||void 0===t?void 0:t.modelId,r=[l.MODEL_IDS.PHOENIX_0_9_4,l.MODEL_IDS.PHOENIX,l.MODEL_IDS.FLUX_DEV,l.MODEL_IDS.FLUX_SCHNELL];return!!((0,c.TC)(i)&&r.includes(i))}},actions:{setAlchemy:(0,o.a)({alchemy:(e,t)=>"boolean"==typeof t.alchemy&&t.alchemy,photoReal:(e,t)=>{var n;let{context:i,event:r}=e;if(!m({context:i,event:r}))return!1;let l=null===(n=i.preset)||void 0===n?void 0:n.payload.generationSettings.photoReal;return!!t.alchemy&&l}}),setUltraUpscaler:(0,o.a)({ultra:(e,t)=>t.ultra,alchemy:!1,photoReal:!1}),setContrast:(0,o.a)({contrast:(e,t)=>t.contrast}),setAspectRatio:(0,o.a)({aspectRatio:(e,t)=>t.aspectRatio,namedAspectRatioKey:null}),setNamedAspectRatio:(0,o.a)({namedAspectRatioKey:(e,t)=>t.namedAspectRatioKey}),setCustomResolution:(0,o.a)((e,t)=>{let{width:n,height:i}=t;return{customWidth:n,customHeight:i}}),setIsUsingCustomResolution:(0,o.a)({isUsingCustomResolution:(e,t)=>t.isUsingCustomResolution}),setImageSize:(0,o.a)({imageSize:(e,t)=>t.imageSize}),setModel:(0,o.a)((e,t)=>{let{context:n}=e,{modelId:i,modelVersion:r}=t;return{modelId:"string"==typeof i?i:n.modelId,modelVersion:r}}),setNegativePrompt:(0,o.a)({negativePrompt:(e,t)=>t.negativePrompt}),setNegativePromptOpen:(0,o.a)({negativePromptOpen:(e,t)=>t.negativePromptOpen}),setNumberOfImages:(0,o.a)({numberOfImages:(e,t)=>t.numberOfImages}),setPhotoReal:(0,o.a)({photoReal:(e,t)=>"boolean"==typeof t.photoReal&&t.photoReal}),setPhotoRealIfValid:(0,o.a)({photoReal:(e,t)=>{let{context:n}=e;return"boolean"!=typeof t.photoReal?n.photoReal:!!n.alchemy&&t.photoReal}}),setPrivate:(0,o.a)({private:(e,t)=>{let{context:n}=e;return"boolean"==typeof t.private?t.private:!n.private}}),setPrompt:(0,o.a)({prompt:(e,t)=>t.prompt||""}),setPromptEnhance:(0,o.a)({promptEnhance:(e,t)=>t.promptEnhance}),setPreset:(0,o.a)({preset:(e,t)=>t.preset}),setPresetId:(0,o.a)({presetId:(e,t)=>t.presetId}),setStyleId:(0,o.a)({styleId:(e,t)=>t.styleId}),setTiling:(0,o.a)({tiling:(e,t)=>"boolean"==typeof t.tiling&&t.tiling}),setTransparency:(0,o.a)({transparency:(e,t)=>"boolean"==typeof t.transparency&&t.transparency}),setFixedSeed:(0,o.a)({fixedSeed:(e,t)=>t.fixedSeed}),setFixedSeedEnabled:(0,o.a)({fixedSeedEnabled:(e,t)=>t.fixedSeedEnabled}),validateModel:(0,o.a)(e=>{let{context:t}=e;return h(t)}),validatePhotoReal:(0,o.a)(e=>{let{context:t}=e;return v(t)}),setElements:(0,o.a)((e,t)=>{let{context:n}=e;return{elements:(0,x.Ig)(n.elements,t.elements,t.append)}}),setElementStrength:(0,o.a)((e,t)=>{let{context:n}=e;return{elements:(0,x._Q)(n.elements,t.element,t.strength)}}),removeElement:(0,o.a)((e,t)=>{let{context:n}=e,{element:i}=t;return{elements:(0,x.Nz)(n.elements,i)}}),toggleDisableElement:(0,o.a)((e,t)=>{let{context:n}=e,{element:i}=t;return{elements:(0,x.xS)(n.elements,i)}}),setUserElements:(0,o.a)((e,t)=>{let{context:n}=e;return{userElements:(0,f.TX)(n.userElements,t.elements,t.append)}}),setUserElementStrength:(0,o.a)((e,t)=>{let{context:n}=e;return{userElements:(0,f.Ry)(n.userElements,t.element,t.strength)}}),removeStyleTransferImageGuidance:(0,o.a)(e=>{var t;let{context:n}=e;return{imageGuidanceInputs:(null===(t=n.imageGuidanceInputs)||void 0===t?void 0:t.length)?n.imageGuidanceInputs.filter(e=>(null==e?void 0:e.controlnetType)!==d.bd.StyleTransfer):null}}),removeUserElement:(0,o.a)((e,t)=>{let{context:n}=e,{element:i}=t;return{userElements:(0,f.M4)(n.userElements,i)}}),toggleDisableUserElement:(0,o.a)((e,t)=>{let{context:n}=e,{element:i}=t;return{userElements:(0,f.wR)(n.userElements,i)}}),inputImageGuidance:(0,o.a)({imageGuidanceInputs:(e,t)=>t.inputs}),setImageGuidanceStrength:(0,o.a)((e,t)=>{let{context:n}=e,{input:i,strength:r}=t;return{imageGuidanceInputs:(0,C.LO)(n.imageGuidanceInputs,i,r)}}),setImageGuidanceStrengthType:(0,o.a)((e,t)=>{let{context:n}=e,{input:i,strengthType:r}=t;return{imageGuidanceInputs:(0,C.bQ)(n.imageGuidanceInputs,i,r)}}),setImageGuidanceInfluence:(0,o.a)((e,t)=>{let{context:n}=e,{input:i,influence:r}=t;return{imageGuidanceInputs:(0,C.Nc)(n.imageGuidanceInputs,i,r)}}),removeImageGuidance:(0,o.a)((e,t)=>{let{context:n}=e,{input:i}=t;return{imageGuidanceInputs:(0,C.Ce)(n.imageGuidanceInputs,i),imageGuidancePendingInputExistingId:null}}),toggleDisableGuidance:(0,o.a)((e,t)=>{let{context:n}=e,{input:i}=t;return{imageGuidanceInputs:(0,C.xU)(n.imageGuidanceInputs,i)}}),resetDefaults:(0,o.a)({aspectRatio:null===p.KY||void 0===p.KY?void 0:p.KY.aspectRatio,contrast:null===p.KY||void 0===p.KY?void 0:p.KY.contrast,elements:null===p.KY||void 0===p.KY?void 0:p.KY.elements,fixedSeed:null===p.KY||void 0===p.KY?void 0:p.KY.fixedSeed,fixedSeedEnabled:null===p.KY||void 0===p.KY?void 0:p.KY.fixedSeedEnabled,imageGuidanceInputs:null===p.KY||void 0===p.KY?void 0:p.KY.imageGuidanceInputs,imageSize:null===p.KY||void 0===p.KY?void 0:p.KY.imageSize,namedAspectRatioKey:null===p.KY||void 0===p.KY?void 0:p.KY.namedAspectRatioKey,negativePrompt:null!==(i=null===p.KY||void 0===p.KY?void 0:p.KY.negativePrompt)&&void 0!==i?i:"",negativePromptOpen:null===p.KY||void 0===p.KY?void 0:p.KY.negativePromptOpen,numberOfImages:null===p.KY||void 0===p.KY?void 0:p.KY.numberOfImages}),reset:(0,o.b)(e=>{let{enqueue:t}=e;t.assign({...p.KY,preset:void 0}),t.raise({type:"generationMode.inputFast"})})},actors:{fetchDescription:(0,s.Sx)(async e=>{let{input:t}=e;return(0,g.p)(t)})}}).createMachine({id:"imageGeneration",type:"parallel",context:{...p.KY},on:{"input.contrast":{guard:{type:"canUseContrast"},actions:{type:"setContrast",params:e=>{let{event:t}=e;return{contrast:t.params.contrast}}}},"input.aspectRatio":{guard:{type:"canUseAspectRatio",params:e=>{let{event:t}=e;return{aspectRatio:t.params.aspectRatio,isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setAspectRatio",params:e=>{let{event:t}=e;return{aspectRatio:t.params.aspectRatio}}},{type:"setIsUsingCustomResolution",params:()=>({isUsingCustomResolution:!1})}]},"input.aspectRatio.named":{guard:{type:"canUseAspectRatioNamed",params:e=>{let{event:t}=e;return{namedAspectRatioKey:t.params.namedAspectRatioKey,isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setNamedAspectRatio",params:e=>{let{event:t}=e;return{namedAspectRatioKey:t.params.namedAspectRatioKey}}}]},"input.customResolution":{guard:{type:"canUseCustomResolutions",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setCustomResolution",params:e=>{let{event:t}=e;return{width:t.params.width,height:t.params.height}}},{type:"setIsUsingCustomResolution",params:()=>({isUsingCustomResolution:!0})}]},"input.toggleIsUsingCustomResolution":{guard:{type:"canUseCustomResolutions",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setIsUsingCustomResolution",params:e=>{let{event:t}=e;return{isUsingCustomResolution:t.params.isUsingCustomResolution}}}]},"input.imageSize":{guard:{type:"canUseImageSize",params:e=>{let{event:t}=e;return{imageSize:t.params.imageSize,isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setImageSize",params:e=>{let{event:t}=e;return{imageSize:t.params.imageSize}}},{type:"setIsUsingCustomResolution",params:()=>({isUsingCustomResolution:!1})}]},"input.model":{guard:"isValidModel",actions:[{type:"setModel",params:e=>{let{event:t}=e;return{modelId:t.params.modelId,modelVersion:t.params.modelVersion}}},{type:"validateModel"}]},"input.negativePrompt":{guard:"canUseNegativePrompt",actions:{type:"setNegativePrompt",params:e=>{let{event:t}=e;return{negativePrompt:t.params.negativePrompt}}}},"input.negativePromptOpen":{guard:"canUseNegativePrompt",actions:{type:"setNegativePromptOpen",params:e=>{let{event:t}=e;return{negativePromptOpen:t.params.negativePromptOpen}}}},"input.numberOfImages":{actions:{type:"setNumberOfImages",params:e=>{let{event:t}=e;return{numberOfImages:t.params.numberOfImages,isUserFreePlan:t.params.isUserFreePlan}}}},"input.photoReal":{guard:"canUsePhotoReal",actions:(0,o.b)(e=>{let{enqueue:t,event:n}=e;n.params.photoReal&&t.raise({type:"generationMode.inputQuality",params:{isUserFreePlan:!!(null==n?void 0:n.params.isPhotoRealAllowed)}}),t({type:"setPhotoReal",params:{photoReal:n.params.photoReal}})})},"input.setPhotoRealIfValid":{guard:{type:"canUsePhotoReal"},actions:[{type:"setPhotoRealIfValid",params:e=>{let{event:t}=e;return{photoReal:t.params.photoReal}}}]},"input.preset":{actions:(0,o.b)(e=>{let{enqueue:t,context:n,check:i,event:r}=e,{preset:a}=r.params;i("isGenerationModeUltra")&&!i("canUseUltraGenerationMode")&&t.raise({type:"generationMode.inputFast"}),t({type:"setPreset",params:e=>{let{event:t}=e;return{preset:t.params.preset}}});let o=(null==a?void 0:a.modelId)===l.MODEL_IDS.PHOENIX,s=(null==a?void 0:a.modelId)===l.MODEL_IDS.FLUX_DEV||(null==a?void 0:a.modelId)===l.MODEL_IDS.FLUX_SCHNELL;o&&!1===r.params.isPhoenixStyleTransferAllowed&&t({type:"removeStyleTransferImageGuidance"}),!o&&!s&&i("isGenerationModeUltra")&&t.raise({type:"generationMode.inputFast"}),s&&(i("isGenerationModeQuality")||i("isGenerationModeUltra"))&&t.raise({type:"generationMode.inputFast"})})},"input.presetId":{actions:{type:"setPresetId",params:e=>{let{event:t}=e;return{presetId:t.params.presetId}}}},"input.prompt":{actions:{type:"setPrompt",params:e=>{let{event:t}=e;return{prompt:t.params.prompt}}}},"input.promptEnhance":{guard:{type:"canUsePromptEnhance"},actions:{type:"setPromptEnhance",params:e=>{let{event:t}=e;return{promptEnhance:t.params.promptEnhance}}}},"input.private":{guard:{type:"canChangePrivate",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan,isUsingTeamAccount:t.params.isUsingTeamAccount}}},actions:{type:"setPrivate",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan,private:t.params.private}}}},"input.styleId":{actions:{type:"setStyleId",params:e=>{let{event:t}=e;return{styleId:t.params.styleId}}}},"input.tiling":{guard:{type:"canUseTiling"},actions:{type:"setTiling",params:e=>{let{event:t}=e;return{tiling:t.params.tiling}}}},"input.transparency":{guard:{type:"canUseTransparency"},actions:{type:"setTransparency",params:e=>{let{event:t}=e;return{transparency:t.params.transparency}}}},"input.userElements":{guard:{type:"canUseUserElements"},actions:{type:"setUserElements",params:e=>{let{event:t}=e;return{elements:t.params.elements,append:t.params.append}}}},"input.userElements.strength":{actions:{type:"setUserElementStrength",params:e=>{let{event:t}=e;return{element:t.params.element,strength:t.params.strength}}}},"input.userElements.remove":{actions:{type:"removeUserElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.userElements.toggleDisabled":{actions:{type:"toggleDisableUserElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.elements":{guard:{type:"canUseElements"},actions:{type:"setElements",params:e=>{let{event:t}=e;return{elements:t.params.elements,append:t.params.append}}}},"input.elements.strength":{actions:{type:"setElementStrength",params:e=>{let{event:t}=e;return{element:t.params.element,strength:t.params.strength}}}},"input.elements.remove":{actions:{type:"removeElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.elements.toggleDisabled":{actions:{type:"toggleDisableElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.imageToImage":{guard:(0,r.G)(["canUseImageToImage","canUseControlNets"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isImageToImageForFluxEnabled:t.params.isImageToImageForFluxEnabled}}}},"input.imageGuidance":{guard:"canUseControlNets",actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.characterReference":{guard:(0,r.E)(["canUseControlNets","canUseCharacterReference"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isCharacterReferenceForPhoenixEnabled:t.params.isCharacterReferenceForPhoenixEnabled}}}},"input.imageGuidance.contentReference":{guard:(0,r.E)(["canUseControlNets","canUseContentReference"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isContentReferenceForFluxEnabled:t.params.isContentReferenceForFluxEnabled,isContentReferenceForPhoenixEnabled:t.params.isContentReferenceForPhoenixEnabled}}}},"input.imageGuidance.depthToImage":{guard:(0,r.E)(["canUseControlNets","canUseDepthToImage"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.edgeToImage":{guard:(0,r.E)(["canUseControlNets","canUseEdgeToImage"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.poseToImage":{guard:(0,r.E)(["canUseControlNets","canUsePoseToImage"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.styleReference":{guard:(0,r.E)(["canUseControlNets","canUseStyleReference"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isStyleReferenceForFluxEnabled:t.params.isStyleReferenceForFluxEnabled}}}},"input.imageGuidance.textImageInput":{guard:(0,r.E)(["canUseControlNets","canUseTextImageInput"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.strength":{actions:{type:"setImageGuidanceStrength",params:e=>{let{event:t}=e;return{input:t.params.input,strength:t.params.strength}}}},"input.imageGuidance.strengthType":{actions:{type:"setImageGuidanceStrengthType",params:e=>{let{event:t}=e;return{input:t.params.input,strengthType:t.params.strengthType}}}},"input.imageGuidance.influence":{actions:{type:"setImageGuidanceInfluence",params:e=>{let{event:t}=e;return{input:t.params.input,influence:t.params.influence}}}},"input.imageGuidance.remove":{actions:{type:"removeImageGuidance",params:e=>{let{event:t}=e;return{input:t.params.input}}}},"input.imageGuidance.toggleDisabled":{actions:{type:"toggleDisableGuidance",params:e=>{let{event:t}=e;return{input:t.params.input}}}},"input.fixedSeed":{actions:{type:"setFixedSeed",params:e=>{let{event:t}=e;return{fixedSeed:t.params.fixedSeed}}}},"input.fixedSeedEnabled":{actions:{type:"setFixedSeedEnabled",params:e=>{let{event:t}=e;return{fixedSeedEnabled:t.params.fixedSeedEnabled}}}},"input.resetDefaults":{actions:{type:"resetDefaults"}},"input.reset":{actions:{type:"reset"}}},states:{form:{initial:"submitDisabled",states:{submitDisabled:{},submitEnabled:{}},always:[{guard:"canSubmit",target:".submitEnabled"},{guard:(0,r.F)("canSubmit"),target:".submitDisabled"}]},promptGenerate:{initial:"idle",states:{failure:{after:{delay:2500,target:"idle"}},idle:{on:{"promptGenerate.improve":{guard:"canImprovePrompt",target:"generating",actions:(0,o.a)({promptSource:l.PromptSource.IMPROVE})},"promptGenerate.random":{target:"generating",actions:(0,o.a)({promptSource:l.PromptSource.RANDOM})},"promptGenerate.aiEnhance":{target:"generating",actions:(0,o.a)({promptSource:l.PromptSource.ENHANCE})}}},generating:{on:{"promptGenerate.fail":"failure","promptGenerate.success":"idle"}}}},generate:{initial:"idle",states:{failure:{after:{delay:2500,target:"idle"},on:{"generate.generate":{guard:"canSubmit",target:"generating"}}},idle:{on:{"generate.generate":{guard:"canSubmit",target:"generating"},"generate.regenerate":{guard:"canSubmitWithPromptEnhance",target:"generating"}}},generating:{on:{"generate.fail":{target:"failure"},"generate.generate":{guard:"canSubmit"},"generate.success":{target:"idle"}}}}},describeImage:{initial:"idle",states:{idle:{on:{"describeImage.generate":{target:"generating",guard:"canDescribeImage"}}},generating:{invoke:{id:"fetchDescription",src:"fetchDescription",input:e=>{var t;let{event:n}=e;return null===(t=n.params)||void 0===t?void 0:t.selectedImage},onDone:{target:"success",actions:(0,o.a)({prompt:e=>{let{event:t}=e;return t.output},promptSource:l.PromptSource.DESCRIBE})},onError:{target:"failure",actions:(0,o.a)({describeImageError:e=>{let{event:t}=e;return t.error instanceof Error?t.error:Error("Sorry! Something went wrong, please try again.")}})}}},success:{on:{"describeImage.generate":{target:"generating"}}},failure:{on:{"describeImage.generate":{target:"generating"}}}}},generationMode:{initial:"fast",states:{fast:{entry:{type:"setAlchemy",params:{alchemy:!1}},on:{"generationMode.inputQuality":[{guard:"isAlchemyOn",target:"fast"},{guard:(0,r.E)(["canUsePremium","canUseQualityGenerationMode"]),target:"quality"}],"generationMode.inputUltra":{guard:"canUseUltraGenerationMode",target:"ultra"}}},quality:{entry:{type:"setAlchemy",params:{alchemy:!0}},on:{"generationMode.inputFast":{target:"fast"},"generationMode.inputQuality":{target:"quality"},"generationMode.inputUltra":{guard:"canUseUltraGenerationMode",target:"ultra"}}},ultra:{entry:{type:"setUltraUpscaler",params:{ultra:!0}},exit:{type:"setUltraUpscaler",params:{ultra:!1}},on:{"generationMode.inputFast":{target:"fast"},"generationMode.inputQuality":{guard:(0,r.E)(["canUsePremium","canUseQualityGenerationMode"]),target:"quality"}}}}}}}),b=(0,r.A)(I);b.start()},32331:(e,t,n)=>{n.d(t,{N:()=>l});var i=n(14331),r=n(69122);let l=()=>{let{userSelectedTeam:e}=(0,r.s)(),t=e(),{hasPermission:n}=(0,i.S)();return t.id||n("collectionsUnlimited","create")?1e3:1}},32926:(e,t,n)=>{n.d(t,{FX:()=>d,UU:()=>u,XU:()=>m,Y6:()=>o,aZ:()=>a,bR:()=>g,g6:()=>l,iT:()=>s,qU:()=>i,u_:()=>r,ug:()=>c});let i="Images cannot be moved to Collections Home",r="Collections already at Collections Home",l="Collections cannot be moved into their own child collection",a="Collections cannot be moved into themselves",o="Root collections cannot be moved to the root",s="Maximum collection depth reached",d="Cannot move to current collection",c="No collections selected",u=3,m="Collection",g={id:null,collectionName:"Collections Home",akUUID:"",child_collections:[],child_collections_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_images:[],collection_images_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},createdAt:"2023-01-01T00:00:00Z",collection_pending_users_share:[],collection_pending_users_share_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_teams_share:[],collection_teams_share_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_users_share:[],collection_users_share_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_hierarchy_ancestor:[],collection_hierarchy_ancestor_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_hierarchy_descendant:[],collection_hierarchy_descendant_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_user_effective_permissions:[],collection_user_effective_permissions_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]},collection_user_effective_permissions_source:[],collection_user_effective_permissions_source_aggregate:{__typename:void 0,aggregate:void 0,nodes:[]}}},33383:(e,t,n)=>{n.d(t,{$R:()=>d,$t:()=>k,BR:()=>T,Ev:()=>V,Ey:()=>b,KK:()=>L,KY:()=>M,LO:()=>_,PD:()=>p,SO:()=>w,T1:()=>C,T7:()=>H,TQ:()=>D,Tb:()=>E,Ui:()=>m,YU:()=>y,_X:()=>I,bG:()=>P,c3:()=>N,ex:()=>R,hO:()=>v,hi:()=>c,iX:()=>j,kW:()=>O,ly:()=>u,qX:()=>f,sO:()=>S,tG:()=>x,wr:()=>A,yB:()=>U});var i=n(31481),r=n(48831),l=n(52592),a=n(12142),o=n(31698);let s=(0,a.Az)(),d=8,c=32,u=32,m={Low:"Low",Medium:"Medium",High:"High"},g={legacyUpscaleMultiplier:1.75,step:8},p={[m.Low]:{...g,upscaleMultiplier:1.25,inputPixelCount:786432,isPremium:!1},[m.Medium]:{...g,upscaleMultiplier:1.75,inputPixelCount:917504,isPremium:!1},[m.High]:{...g,upscaleMultiplier:1.75,inputPixelCount:1048576,isPremium:!0}},h={upscaleMultiplier:1.5,legacyUpscaleMultiplier:1.5,ultraMultiplier:2,step:c},v={[m.Low]:{...h,inputPixelCount:802816,isPremium:!1},[m.Medium]:{...h,inputPixelCount:1048576,isPremium:!1},High:{...h,inputPixelCount:1244160,isPremium:!0}},x=v,f=new Map([["3:1",{long:3,short:1}],["2.4:1",{long:2.39,short:1}],["2:1",{long:2,short:1}],["1.85:1",{long:1.85,short:1}],["16:9",{long:16,short:9}],["3:2",{long:3,short:2}],["4:3",{long:4,short:3}],["5:4",{long:5,short:4}],["6:5",{long:6,short:5}],["1:1",{long:1,short:1}],["4:5",{long:4,short:5}],["5:6",{long:5,short:6}],["3:4",{long:3,short:4}],["2:3",{long:2,short:3}],["9:16",{long:9,short:16}],["1:2",{long:1,short:2}],["1:3",{long:1,short:3}]]),C=new Map([["facebook",{label:"Facebook",ratioId:"16:9",category:"Socials",isPremium:!1}],["instagram",{label:"Instagram",ratioId:"4:5",category:"Socials",isPremium:!1}],["x",{label:"Twitter / X",ratioId:"4:3",category:"Socials",isPremium:!1}],["tiktok",{label:"TikTok",ratioId:"9:16",category:"Socials",isPremium:!1}],["desktop",{label:"Desktop",ratioId:"16:9",category:"Devices",isPremium:!1}],["mobile",{label:"Mobile",ratioId:"9:16",category:"Devices",isPremium:!1}],["tv",{label:"TV",ratioId:"2:1",category:"Devices",isPremium:!1}],["squareDevice",{label:"Square",ratioId:"1:1",category:"Devices",isPremium:!1}],["cinema",{label:"Cinema",ratioId:"1.85:1",category:"Film",isPremium:!1}],["wide",{label:"Wide",ratioId:"2.4:1",category:"Film",isPremium:!0}],["portrait",{label:"2:3",ratioId:"2:3",category:"Basic",isPremium:!1}],["square",{label:"1:1",ratioId:"1:1",category:"Basic",isPremium:!1}],["landscape",{label:"16:9",ratioId:"16:9",category:"Basic",isPremium:!1}]]),I=["Socials","Devices","Film"],b=200,y={weightDefault:0,weightMinimum:-2,weightMaximum:2,weightStep:.1};var _=function(e){return e[e.Off=0]="Off",e[e.Auto=1]="Auto",e[e.On=2]="On",e}({});let j=new Map([["Low",{basic:2.5,lightning:1,phoenix:3}],["Medium",{basic:3.5,lightning:1.3,phoenix:3.5}],["High",{basic:4.5,lightning:1.8,phoenix:4}]]),S="Medium",E=4,U=8,w="372b997f-0041-4a79-8ae2-0e7d490c1ba5",T="cf548be8-5349-4eaf-a8bf-f82597ffed6b",A="111dc692-d470-4eec-b791-3475abac4c46",D=512,k=1920,R=Math.sqrt(p.High.inputPixelCount),M={alchemy:!1,aspectRatio:"1:1",customWidth:R,customHeight:R,isUsingCustomResolution:!1,namedAspectRatioKey:"square",contrast:S,imageSize:"High",modelId:s.modelId,modelVersion:null,negativePrompt:void 0,negativePromptOpen:!1,numberOfImages:E,photoReal:!1,photoRealVersion:i.PhotoRealVersion.V2,presetId:null,private:!1,prompt:"",promptEnhance:1,styleId:A,tiling:!1,transparency:!1,ultra:!1,elements:null,userElements:null,imageGuidanceInputs:null,fixedSeed:null,fixedSeedEnabled:!1,describeImageError:null,promptSource:void 0},N=new Map([[l.bd.StyleTransfer,{shortTitle:"Style",description:"References the aesthetics from an image to influence the output.",isPremium:!1}],[l.bd.FaceTransfer,{shortTitle:"Character",description:"Create a consistent character by providing a reference image.",isPremium:!0}],[l.bd.ContentTransfer,{shortTitle:"Content",description:"Uses the shape & structure of a reference image to influence the output.",isPremium:!0}],[o.w.Img2Img,{shortTitle:"Image to Image",description:"Creative reinterpretation of vibe or structure from a reference image.",isPremium:!1}]]),P={akUUID:o.w.Img2Img,id:1,name:"Image to Image",type:o.w.Img2Img,thumbnailURL:"https://cdn.leonardo.ai/image_guidance_thumbnails/img2img/pre-thumbnail.webp",thumbnailResultURL:"https://cdn.leonardo.ai/image_guidance_thumbnails/img2img/post-thumbnail.webp",displayDescription:"Creative reinterpretation of vibe or structure from a reference image.",isDisabled:!1,isIncompatible:!1,disabledReason:"",limit:(0,r.nD)(o.w.Img2Img,null)},L="image-generation-snapshot",V="image-generation-first-run",O="preference-private",H={guidanceType:"guidanceType",imageId:"imageId"}},35199:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(3740);let l=e=>(0,i.jsx)(r.Icon,{width:4,height:4,viewBox:"0 0 14 14",fill:"currentColor",...e,children:(0,i.jsx)("path",{d:"M11.25 3.16764H5.41667C3.96533 3.16764 3.16667 3.96631 3.16667 5.41764V11.251C3.16667 12.7023 3.96533 13.501 5.41667 13.501H11.25C12.7013 13.501 13.5 12.7023 13.5 11.251V5.41764C13.5 3.96631 12.7013 3.16764 11.25 3.16764ZM12.5 11.251C12.5 12.139 12.138 12.501 11.25 12.501H5.41667C4.52867 12.501 4.16667 12.139 4.16667 11.251V5.41764C4.16667 4.52964 4.52867 4.16764 5.41667 4.16764H11.25C12.138 4.16764 12.5 4.52964 12.5 5.41764V11.251ZM1.5 2.74764V8.58765C1.5 9.38631 1.82206 9.58298 1.92806 9.64832C2.16406 9.79232 2.23726 10.1003 2.09326 10.3357C1.9986 10.4897 1.83468 10.5743 1.66602 10.5743C1.57735 10.5743 1.48661 10.5503 1.40527 10.501C0.804607 10.133 0.5 9.48965 0.5 8.58765V2.74764C0.5 1.31964 1.31941 0.500977 2.74674 0.500977H8.58659C9.70992 0.500977 10.2467 0.993624 10.5 1.40629C10.644 1.64162 10.57 1.94963 10.3346 2.09363C10.0986 2.23829 9.79197 2.16364 9.6473 1.9283C9.58263 1.8223 9.38526 1.50033 8.58659 1.50033H2.74674C1.86141 1.50099 1.5 1.86231 1.5 2.74764Z",fill:"currentColor"})})},35662:(e,t,n)=>{n.d(t,{o:()=>p});var i=n(95155),r=n(59108),l=n(58670),a=n(77700),o=n(12974),s=n(12115),d=n(17973),c=n(68691),u=n(69122),m=n(93658);let g=e=>{let{onDontShowAgain:t}=e;return(0,i.jsxs)(r.Flex,{flexDir:"column",children:[(0,i.jsxs)(r.Flex,{alignItems:"center",mb:2,children:[(0,i.jsx)(d.A,{w:5,h:5,mr:2}),(0,i.jsx)(l.Text,{children:"Images Are Always Visible in Collections"})]}),(0,i.jsxs)(a.Box,{children:["Images added to collections are visible to everyone who has access to the collection."," ",(0,i.jsx)(l.Text,{as:"span",color:"primary.textaccent",_hover:{textDecoration:"underline",cursor:"pointer"},onClick:t,children:"Don't show again."})]})]})},p=()=>{let{userSelectedTeam:e}=(0,u.s)(),t=e(),n=(0,o.useToast)(),r=(0,s.useRef)(null),l=(0,c.j)(),a=(0,c.G)(e=>e.onboarding.shouldHideTeamsCollectionPrivacyWarning),d=()=>{r.current&&n.isActive(r.current)&&(n.close(r.current),l((0,m.E8)(!0)))};return{openCollectionPrivacyWarning:()=>{!(!t.id||r.current&&n.isActive(r.current))&&!a&&(r.current=n({description:(0,i.jsx)(g,{onDontShowAgain:d}),variant:"custom",position:"top",icon:(0,i.jsx)(i.Fragment,{}),isClosable:!0}))}}}},35904:(e,t,n)=>{n.d(t,{Fl:()=>c,LN:()=>u,MK:()=>d,NM:()=>m,d5:()=>h,g$:()=>function e(t,n){t.forEach(t=>{n(t),t.childCollections.length>0&&e(t.childCollections,n)})},jY:()=>function e(t,n){let i=n.toLowerCase();return t.reduce((t,r)=>{let l=r.name.toLowerCase().includes(i),a=e(r.children,n);return(l||a.length>0)&&t.push({...r,children:a}),t},[])},mk:()=>g,oD:()=>v,qz:()=>p,yz:()=>s});var i=n(21542),r=n(68655),l=n(19710),a=n(958),o=n(90824);function s(e){return e.length>0?e[e.length-1]:null}function d(e,t){return t.map(t=>e.get(t.toString())).filter(e=>!!e)}function c(e,t){return t?e.get(t.toString()):void 0}function u(e){return"selection"in e}function m(e){return"moveValidation"in e}function g(e,t,n,r,a){return e===i.v1.MOVE?(0,l.Db)(t,n,a):e===i.v1.SELECT_FOR_GENERATING?(0,l.ky)(t,n):(0,l.DE)(t,(null==r?void 0:r.map(e=>{let{id:t}=e;return t}))||[],a)}let p=(e,t,n)=>{if(!n)return(0,o.Uk)(t);switch(e){case i.AY.PERSONAL:return(0,o.Uk)(t);case i.AY.TEAM:return(0,o.rW)(n);case i.AY.PERSONAL_TEAM:return(0,o.$6)(n,t);default:return(0,o.Uk)(t)}};function h(e){return e?{...e,id:"mock-id",akUUID:"mock-uuid",collectionName:"Mock Collection",depth:e.depth+1,maxDescendantDepth:0,childCollections:[],collectionImages:[],thumbnailUrl:null,ancestorIds:[...e.ancestorIds,e.akUUID]}:{id:"mock-id",akUUID:"mock-uuid",collectionName:"Mock Collection",depth:0,maxDescendantDepth:0,childCollections:[],collectionImages:[],thumbnailUrl:null,ancestorIds:[],permission:a.Vmy.Owner}}function v(e,t){return e!==i.v1.MOVE||(0,r.Dr)(h(),t).isAllowed}},38322:(e,t,n)=>{n.d(t,{L:()=>s,S:()=>d});var i=n(95155),r=n(12115),l=n(96576),a=n(29309);let o=(0,r.createContext)({alchemyRefinerLoading:!1,upscaleDefaultLoading:!1,upscaleAltLoading:!1,upscaleHdLoading:!1,upscaleSmoothLoading:!1,upscaleLoading:!1,removeBgLoading:!1,unzoomLoading:!1,upscaleUltraLoading:!1,handleAlchemyRefiner:async()=>void 0,handleUpscaleDefault:async()=>void 0,handleRemoveBg:async()=>void 0,handleUnzoom:async()=>void 0,handleUpscaleAlt:async()=>void 0,handleUpscaleSmooth:async()=>void 0,handleUpscaleHd:async()=>void 0,handleReport:async()=>void 0,handleDelete:()=>void 0,openAlchemyRefinerModal:()=>void 0,startPollingImageVariations:()=>Promise.resolve()}),s=()=>(0,r.useContext)(o),d=e=>{let{children:t,onCompleteCallback:n=()=>{}}=e,{image:s,selectedImageVariation:d,openConfirmationModal:c}=(0,l.g)(),u=(0,a.a)(null==s?void 0:s.id,null==d?void 0:d.id,{fallbackData:null==s?void 0:s.generated_image_variation_generics,onComplete:e=>{c(e),(null==s?void 0:s.id)&&n(s.id)}}),m=(0,r.useMemo)(()=>u,[u]);return(0,i.jsx)(o.Provider,{value:m,children:t})}},40236:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(15933),r=n(36112),l=n(69122),a=n(20690),o=n(23432),s=n(71503),d=n(34853),c=n(68691),u=n(25634),m=n(75264),g=n(68153),p=n(62618);function h(){let e=(0,i._)(["\n										fragment NewVariation on generated_image_variation_generic {\n											url\n											status\n											createdAt\n											id\n											transformType\n											upscale_details {\n												oneClicktype\n											}\n											__typename\n										}\n									"]);return h=function(){return e},e}let v=e=>{let{generatedImageId:t,id:n,imageVariationType:i}=e,r=(0,m.r2)(i),l=(0,m.KO)(i);return{status:o.P.PENDING,url:null,createdAt:new Date().toISOString(),generatedImageId:t,id:n,transformType:l,upscale_details:[{oneClicktype:r}],__typename:"generated_image_variation_generic"}},x=e=>{let{originalImageId:t,imageVariationType:n,mutationImageId:i,isVariation:o}=e,x=(0,c.j)(),{userSelectedTeam:f}=(0,l.s)(),C=f(),{handleGenError:I}=(0,a.B)();return async e=>{let l=(null==e?void 0:e.originalImageId)||t,a=(null==e?void 0:e.mutationImageId)||i;x((0,g.Vq)({imageId:l,imageVariationType:n}));let c={...(0,m.p1)(n),imageId:a,isVariation:o,...C.id&&{teamId:C.akUUID}},{mutation:f,arg1:b,mutationResponseKey:y}=(0,m.R7)(c);try{await u.Ay.mutate({mutation:f,variables:{arg1:b},update(e,t){let{data:i}=t,a=null==i?void 0:i[y].id;if(!a)throw Error("Error in useGenerateVariation: variationId invalid or undefined.");e.modify({id:e.identify({__typename:"generated_images",id:l}),fields:{generated_image_variation_generics(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{readField:i}=arguments.length>1?arguments[1]:void 0,o=e.writeFragment({data:v({generatedImageId:l,id:a,imageVariationType:n}),fragment:(0,r.J1)(h())});return t.some(e=>i("id",e)===a)?t:[...t,o]}}})}}),x((0,p.FS)())}catch(e){if((0,s.Y)(e)&&(0,s.H)({error:e,onError:I})||(0,d.V)(e)&&(0,d.o)({error:e,onError:I}))return;throw e}}}},43195:(e,t,n)=>{n.d(t,{Db:()=>d,M4:()=>a,Ry:()=>l,TX:()=>s,aN:()=>c,wR:()=>o});var i=n(3711),r=n.n(i);function l(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.id===t.id?{...e,weight:n}:e):null}function a(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.filter(e=>e.id!==t.id))&&void 0!==n?n:null}function o(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.map(e=>e.id===t.id?{...e,isDisabled:!e.isDisabled}:e))&&void 0!==n?n:null}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t;return n&&(i=[...null!=e?e:[],...t]),r()(i,"id")}function d(e){var t;return(null==e?void 0:e.length)&&null!==(t=e.filter(e=>!e.isDisabled).map(e=>({id:e.id,weight:e.weight,isEnabled:!0})))&&void 0!==t?t:null}function c(e,t){return e.filter(e=>t.some(t=>t.id===e.id))}},43298:(e,t,n)=>{n.d(t,{M:()=>i});function i(e,t){if(0===t)return 0;let n=e%t;return Math.abs(n)>=t/2?e+Math.sign(e)*(t-n):e-n}},46016:(e,t,n)=>{n.d(t,{w:()=>t_});var i=n(95155),r=n(5520),l=n(23375),a=n(16299),o=n(24077),s=n(69507),d=n(27807),c=n(6126),u=n(27104),m=n(19782),g=n(58727),p=n(58670),h=n(40988),v=n(96065),x=n(59108),f=n(62833),C=n(93176),I=n(12115),b=n(83157),y=n(5643),_=n(29826),j=n(26418),S=n(77700),E=n(6386),U=n(35490),w=n(30889),T=n(31481),A=n(62177),D=n(17485),k=n(49174),R=n(2044),M=n(85821),N=n(17973),P=n(32102),L=n(68691),V=n(80891),O=n(85756),H=n(5112),F=n(92314);let G=e=>{let{isExistingUpscale:t,isUpscalePending:n,isSubmitting:r,isDisabled:l,isLoading:a,onClose:o,register:s}=e,d=(0,L.j)(),c=e=>{d((0,F.nv)(e))},{isUserFreePlan:u}=(0,V.usePlan)();return(0,i.jsxs)(k.ModalFooter,{gap:3,flexDirection:"column",borderColor:"border.nobleBlack",borderTopWidth:"px",children:[!u&&(0,i.jsx)(i.Fragment,{children:t?(0,i.jsxs)(x.Flex,{gridColumn:"1/-1",fontSize:"sm",mb:1,alignItems:"center",flex:"1 1 100%",children:[(0,i.jsx)(N.A,{mr:2,height:5,width:5}),n?"A refiner variant for these settings is currently generating.":"You've already created a refiner variant with these settings."]}):(0,i.jsx)(x.Flex,{gridColumn:"1/-1",alignItems:"center",flex:"1 1 100%",children:(0,i.jsx)(R.Checkbox,{variant:"alternative",isDisabled:r,...s("closeOnUpscale",{onChange:e=>c(e.target.checked)}),children:(0,i.jsx)(p.Text,{fontSize:"sm",children:"Close this modal after commencing upscale"})})})}),(0,i.jsxs)(x.Flex,{w:"full",gap:4,children:[(0,i.jsx)(M.Button,{onClick:o,flex:1,variant:"outline",background:"background.darkblue",borderColor:"border.greyBlue",children:"Cancel"}),(0,i.jsx)(M.Button,{"data-tracking-id":H.v1q,isLoading:a,isDisabled:l,type:"submit",variant:"gradient",flex:1,rightIcon:(0,i.jsxs)(x.Flex,{alignItems:"center",children:[(0,i.jsx)(P.A,{fill:"white"}),(0,i.jsx)(p.Text,{fontSize:"sm",children:O.VP.UPSCALE_ALCHEMY})]}),children:"Upscale"})]})]})};var B=n(52017),z=n(64982),W=n(55028),Y=n(92636),K=n(90339),q=n(72461);let Z=(0,W.default)(()=>Promise.resolve().then(n.bind(n,5136)).then(e=>e.default),{loadableGenerated:{webpack:()=>[5136]}}),J=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,B.useDisclosure)();return(0,i.jsxs)(Y.A,{rounded:"lg",width:"full",py:3,px:2.5,background:"#090D14",children:[(0,i.jsxs)(x.Flex,{justifyContent:"space-between",alignContent:"center",children:[(0,i.jsxs)(x.Flex,{gap:2,children:[(0,i.jsx)(x.Flex,{width:"2.1875rem",height:"2.1875rem",padding:"0.27344rem",justifyContent:"center",alignItems:"center",bg:"gradient.main",borderRadius:"0.75rem",children:(0,i.jsx)(K.A,{width:"1.64063rem",height:"1.64063rem",m:"0.05rem"})}),(0,i.jsxs)(S.Box,{children:[(0,i.jsx)(p.Text,{fontSize:"sm",color:"text.white",fontWeight:500,lineHeight:5,children:"Upgrade to Alchemy Upscaler"}),(0,i.jsx)(p.Text,{fontSize:"xs",color:"text.white",fontWeight:500,lineHeight:4,children:"Upgrade to a premium plan to upscale your images with the Alchemy pipeline"})]})]}),(0,i.jsx)(q._,{dataTrackingId:H.njZ,onClick:n,size:"md",py:1.5,px:2,variant:"gradient",children:"Upgrade Now"})]}),(0,i.jsx)(z.Portal,{children:e&&(0,i.jsx)(I.Suspense,{children:(0,i.jsx)(Z,{isOpen:e,onClose:t})})})]})};var X=n(35936);let Q=e=>({strength:(0,X.kt)(e.sdVersion)&&e.alchemy?T.ALCHEMY_REFINER_STRENGTH_ALCHEMY_SDXL_DEFAULT:T.ALCHEMY_REFINER_STRENGTH_DEFAULT,creative:!1,closeOnUpscale:(0,L.G)(e=>e.view.alchemyRefinerCloseOnUpscale),shouldHideModalOnSubmit:!1});var $=n(46671),ee=n(75264);let et=e=>e.filter(e=>{var t;return(null===(t=e.upscale_details[0])||void 0===t?void 0:t.oneClicktype)===$.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER}).sort(ee.HB).map(e=>(0,ee.vg)(e)),en=(e,t)=>{let{strength:n,creative:i}=t,r=e.find(e=>{let[t]=e.upscale_details;if(t)return t.oneClicktype===$.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER&&t.alchemyRefinerStrength===n&&t.alchemyRefinerCreative===i});return{isExistingUpscale:!!r,isUpscalePending:(null==r?void 0:r.status)===O.nE.PENDING}};var ei=n(958),er=n(29309),el=n(23653),ea=n(15571),eo=n(49993);let es=e=>{let{imageId:t,isImageSaving:n,onGetImageId:r,generation:l,variations:a,refetchVariations:o,refetchingVariations:s,onClose:d}=e,{handleAlchemyRefiner:c}=(0,er.a)(t,t,{fallbackData:a}),u=Q(l),m=(0,A.mN)({defaultValues:u}),{handleSubmit:g,register:h,formState:{isSubmitting:v},watch:f}=m,[C,I]=f(["strength","creative"]),b=et(a||[]),k=!!b.length,{isExistingUpscale:R,isUpscalePending:M}=en(a||[],{strength:C,creative:I}),N=async e=>{let{strength:t,creative:n,closeOnUpscale:i}=e,l=await r();if(l){if(await c(t,n,l,[{query:ei.Z7e,variables:{id:l}}]),i)return d();o({generationImageId:l})}},{isUserProPlan:P,isUserFreePlan:L}=(0,V.usePlan)(),H=(0,ea.$)(O.VP.UPSCALE_ALCHEMY),{isDisabledAlchemyRefiner:F}=(0,el.C)(a),B=R||(F||!H)&&!P||s||L||n,z=v||M||s||n;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A.Op,{...m,children:(0,i.jsxs)("form",{onSubmit:g(N),children:[(0,i.jsx)(y.ModalBody,{background:eo.C3.DARK_BLUE_TWO,p:5,height:"30rem",children:(0,i.jsxs)(x.Flex,{flexDirection:"column",gap:6,children:[L&&(0,i.jsx)(J,{}),(0,i.jsx)(_.Card,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",opacity:L?.5:1,cursor:L?"not-allowed":"auto",userSelect:L?"none":"auto",children:(0,i.jsxs)(j.FormControl,{variant:"group",background:"none",pointerEvents:L?"none":"auto",children:[(0,i.jsxs)(S.Box,{children:[(0,i.jsx)(p.Text,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Refiner Strength"}),(0,i.jsx)(p.Text,{py:1,color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"Setting the strength to high allows for less refinement flexibility. For greater creative freedom, set it to low."})]}),(0,i.jsxs)(E.Select,{width:"auto",isDisabled:v||L,icon:(0,i.jsx)(D.q0c,{}),...h("strength",{valueAsNumber:!0}),children:[(0,i.jsx)("option",{value:T.ALCHEMY_REFINER_STRENGTH.High,children:"High"}),(0,i.jsx)("option",{value:T.ALCHEMY_REFINER_STRENGTH.Medium,children:"Medium"}),(0,i.jsx)("option",{value:T.ALCHEMY_REFINER_STRENGTH.Low,children:"Low"})]})," "]})}),(0,i.jsx)(_.Card,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",opacity:L?.5:1,cursor:L?"not-allowed":"auto",userSelect:L?"none":"auto",children:(0,i.jsxs)(j.FormControl,{variant:"group",background:"none",pointerEvents:L?"none":"auto",children:[(0,i.jsxs)(S.Box,{children:[(0,i.jsx)(p.Text,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Smooth Mode"}),(0,i.jsx)(p.Text,{py:1,color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"Smooth mode enhances image coherence but may reduce fine details. Turn it ON for a more refined image appearance, airbrushed styles, vector images, and to tame chaotic visuals"})]}),(0,i.jsx)(U.Switch,{variant:"blueish",isDisabled:v||L,...h("creative")})]})}),k&&(0,i.jsx)(_.Card,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",children:(0,i.jsxs)(S.Box,{p:3,children:[(0,i.jsx)(p.Text,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Existing Refined Versions"}),(0,i.jsx)(w.List,{listStyleType:"disc",ml:4,py:1,children:b.map(e=>(0,i.jsx)(w.ListItem,{color:"secondary.inactive",fontSize:"sm",children:e},e))})]})})]})}),(0,i.jsx)(G,{isExistingUpscale:R,isUpscalePending:M,isSubmitting:v,isDisabled:B,isLoading:z,onClose:d,register:h})]})})})};var ed=n(88095),ec=n(42043),eu=n(57599),em=n(49004),eg=n(82391),ep=n(43340),eh=n(84558),ev=n(74559),ex=n(280),ef=n(11721),eC=n(57416),eI=n(5150);let eb=e=>{let{value:t,onChange:n,defaultValue:r=5,min:l,max:a,step:o}=e;return(0,i.jsxs)(eC.Slider,{width:"100%",flex:1,min:l,max:a,step:o,value:t,onChange:n,zIndex:0,children:[r&&(0,i.jsx)(eC.SliderMark,{fontSize:"sm",value:r,marginLeft:"-1.5",children:(0,i.jsx)(eI.A,{color:"#2F2F2F"})}),(0,i.jsx)(eC.SliderTrack,{height:"100%",rounded:"full",children:(0,i.jsx)(eC.SliderFilledTrack,{})}),(0,i.jsx)(eC.SliderThumb,{})]})};var ey=n(39376),e_=n(19460),ej=n(84287),eS=n(60078),eE=n(58195),eU=n(45640),ew=n(75983),eT=n(67558),eA=n(7082),eD=n(66341),ek=n(87333),eR=n(67258);let eM=e=>{let{onAddNewImage:t,isDisabled:n,isDraggingFile:r,isUploading:l,setIsUploading:a}=e,[o,s]=(0,I.useState)(!1),[d,c]=(0,I.useState)(0),u=(0,eT.A)(e=>{e.state===eT.j.REQUESTING_INIT_IMAGE?l||a(!0):e.state===eT.j.UPLOADING?c(e.uploadPercent):e.state===eT.j.ERROR?(a(!1),c(0)):e.state===eT.j.FINISHED&&(a(!1),t({initImageType:ei.AbP.Uploaded,initImageId:e.initImageId,alt:e.name,dimensions:e.dimensions,base64ImageUri:e.dataUrl}))}),m=async e=>{try{if(0===e.length)throw Error("no files provided to upload handler");await u(e[0])}catch(e){s(!0)}};return(0,i.jsx)(eR.A,{disabled:n,onDrop:m,openDialogOnClick:!1,flex:1,w:"full",h:"full",children:e=>{let{isDragReject:t}=e;return(0,i.jsxs)(e_.Popover,{isOpen:t||o,children:[(0,i.jsx)(ej.PopoverTrigger,{children:(0,i.jsx)(M.Button,{isDisabled:l,variant:"outline",display:"flex",justifyContent:"center",alignItems:"center",flexDir:"column",flex:1,gap:2.5,width:"full",height:"full",px:2,py:4,border:"transparent",rounded:"none",cursor:"pointer",background:r?"transparent":"background.darkblue",transition:"all 0.2s ease-in-out",_hover:{background:r?"transparent":"background.greyblue"},children:l?(0,i.jsxs)(x.Flex,{position:"relative",justifyContent:"center",alignItems:"center",width:10,height:10,children:[d<100&&(0,i.jsx)(p.Text,{fontSize:"0.5rem",fontWeight:700,children:d.toString()+"%"}),(0,i.jsx)(eA.A,{position:"absolute",top:0,w:10,h:10})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eS.Stack,{display:r?"block":"none",align:"center",children:[(0,i.jsx)(eD.A,{w:10,h:10,mt:6,mb:2,filter:"drop-shadow(0.125rem 0.125rem 0.75rem black)"}),(0,i.jsx)(p.Text,{fontSize:"lg",fontWeight:600,textShadow:"0.125rem 0.125rem 0.75rem black",children:"Drop an Image Here"}),(0,i.jsx)(p.Text,{fontSize:"md",textShadow:"0.0625rem 0.0625rem 0.375rem black",children:"PNG, JPG or WEBP up to 5MB"})]}),(0,i.jsxs)(eS.Stack,{display:r?"none":"block",align:"center",children:[(0,i.jsx)(eD.A,{w:10,h:10,mb:1}),(0,i.jsxs)(p.Text,{fontSize:"sm",children:["Add"," ",(0,i.jsx)(p.Text,{as:"span",fontWeight:600,children:"Image"})]})]})]})})}),(0,i.jsxs)(eE.PopoverContent,{background:"alert",children:[(0,i.jsx)(eU.PopoverArrow,{bg:"alert"}),(0,i.jsx)(ew.PopoverBody,{alignItems:"center",children:(0,i.jsxs)(x.Flex,{alignItems:"center",gap:2,children:[(0,i.jsx)(ek.A,{width:5,height:5,color:"white"}),(0,i.jsx)(p.Text,{children:o?"Error uploading image":"Unsupported file type or size"})]})})]})]})}})};var eN=n(67196),eP=n(82519),eL=n(55183),eV=n(37716),eO=n(5228),eH=n(39141),eF=n(6762),eG=n(69122);let eB=e=>{var t,n,r;let{imageInput:l,onImageClear:a,onImageSelect:o,megaPixels:s,isClearImageDisabled:d}=e,c=(0,eH.A)(l,O.xN),{isDraggingFile:u}=(0,eF.A)(),[m,g]=(0,I.useState)(!1),{isOpen:p,onClose:h,onOpen:v}=(0,B.useDisclosure)(),{userSelectedTeam:f}=(0,eG.s)(),{id:C,akUUID:b}=f(),y=null!==(r=null==l?void 0:l.base64ImageUri)&&void 0!==r?r:c,_=(null==l?void 0:null===(t=l.dimensions)||void 0===t?void 0:t.width)||0,j=(null==l?void 0:null===(n=l.dimensions)||void 0===n?void 0:n.height)||0,E=_&&j?"".concat(_," / ").concat(j):"2 / 1",U=null!=l&&!!l.dimensions&&(0,eP.i)({imageWidth:_,imageHeight:j});return(0,i.jsxs)(x.Flex,{w:"full",minHeight:"9.75rem",rounded:"lg",position:"relative",justifyContent:"center",alignItems:"center",overflow:"hidden",cursor:y?"default":"pointer",onClick:y?void 0:v,borderWidth:u?"0.125rem":"0.063rem",borderStyle:u?"dashed":"solid",borderColor:u?"black":"border.greyBlue",background:u?"linear-gradient(135deg, #B14BF4 60%, #4D91FF) border-box":"background.darkblue",transition:"background 0.2s ease-in-out",_hover:{background:"background.greyblue",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue"},children:[y?(0,i.jsx)(eu.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",isDisabled:U,children:(0,i.jsxs)(em.Center,{position:"relative",width:"100%",minHeight:32,maxHeight:"28rem",style:{aspectRatio:E},children:[(0,i.jsx)(eO.A,{loadingComponent:(0,i.jsx)(eL.A,{}),fill:!0,src:y,alt:"Source image",style:{filter:u?"blur(0.3125rem)":void 0,objectFit:"cover",objectPosition:"center",transition:"all 0.35s ease-in-out"}},y),(0,i.jsx)(eu.Tooltip,{label:"Clear Source Image",placement:"auto",gutter:10,hasArrow:!0,fontSize:"xs",children:(0,i.jsx)(ey.IconButton,{onClick:a,"aria-label":"Clear Source Image",icon:(0,i.jsx)(eV.A,{w:6,h:6}),variant:"outline",position:"absolute",top:2,right:2,border:"none",rounded:"full",isDisabled:d})}),(0,i.jsx)(S.Box,{display:u||m?"block":"none",w:"full",h:"full",background:"background.darkblue",children:(0,i.jsx)(eM,{onAddNewImage:o,isDraggingFile:u,isUploading:m,setIsUploading:g})})]})}):(0,i.jsx)(S.Box,{w:"full",h:"full",background:"background.darkblue",children:(0,i.jsx)(eM,{onAddNewImage:e=>{o(e),h()},isDraggingFile:u,isUploading:m,setIsUploading:g})}),(0,i.jsx)(eN.A,{isOpen:p,onClose:h,onSelect:o,teamId:C,teamAkUuid:b})]})};var ez=n(52937),eW=n(70912),eY=n(59133),eK=n(82333);let eq=e=>{let{value:t,onChange:n,styleOptions:r,loading:l}=e;return(0,i.jsx)(ez.m,{h:8,py:0,borderColor:"old.greyblue",borderStyle:"solid",borderWidth:1,minHeight:12,flex:0,iconClosed:(0,i.jsx)(eY.A,{color:"white"}),iconOpened:(0,i.jsx)(eY.A,{color:"white",transform:"rotate(180deg)"}),label:(0,i.jsxs)(x.Flex,{whiteSpace:"nowrap",align:"center",gap:3,children:[(0,i.jsx)(eK.A,{width:4,height:4}),(0,i.jsxs)(x.Flex,{flexDirection:"column",alignItems:"start",p:0,gap:0,children:[(0,i.jsx)(p.Text,{fontSize:"xs",color:"grey",textAlign:"left",lineHeight:1,children:"Upscaler Style"}),t]})]}),zIndex:100,isLoading:l,isDisabled:!(null==r?void 0:r.length),type:"button",bg:"background.darkblue",children:null==r?void 0:r.map(e=>(0,i.jsx)(eW.t,{value:e,onClick:()=>n(e),type:"button",children:e},e))})};var eZ=n(1996),eJ=n(831),eX=n(84492),eQ=n(59771),e$=n(59118),e0=n(22714),e1=n(23432);let e2=e=>{let{type:t,metadata:n,width:r,height:l}=e;return(0,i.jsxs)(x.Flex,{justifyContent:"space-between",w:"full",fontSize:"sm",children:[(0,i.jsxs)(p.Text,{as:"span",children:[t,"\xa0",n]}),r&&l&&(0,i.jsxs)(p.Text,{as:"span",color:"secondary.inactive",children:[r,"\xd7",l]})]})},e5=e=>{var t,n;let{variations:r=[],onChange:l,onSelectOriginal:a,value:o,originalWidth:s,originalHeight:d,isLoading:c}=e,u=r.filter(e=>!!(null==e?void 0:e.upscale_details)&&(null==e?void 0:e.upscale_details.length)>0),m=u.find(e=>e.id===o);return(0,i.jsxs)(eZ.Menu,{gutter:0,matchWidth:!0,preventOverflow:!0,children:[(0,i.jsx)(eJ.MenuButton,{w:"full",borderWidth:"px",borderColor:"border.greyBlue",rounded:"md",fontSize:"md",bg:"darkblue",_hover:{bg:"background.darkblue"},_active:{borderWidth:"px",borderColor:"transparent",bg:"background.darkblue"},type:"button",py:2,px:1,children:(0,i.jsxs)(x.Flex,{justifyContent:"space-between",alignItems:"center",px:4,children:[(0,i.jsx)(x.Flex,{justifyContent:"space-between",flex:1,children:(0,i.jsx)(p.Text,{fontWeight:300,pr:1,w:"full",children:m?(0,i.jsx)(e2,{type:(0,ee.PI)(m.upscale_details[0].oneClicktype),metadata:m.upscale_details[0].optional_metadata,width:null!==(t=m.image_width)&&void 0!==t?t:m.upscale_details[0].width,height:null!==(n=m.image_height)&&void 0!==n?n:m.upscale_details[0].height}):(0,i.jsx)(e2,{type:"Original Image",width:s,height:d})})}),(0,i.jsx)(e0.A,{}),c&&(0,i.jsx)(eX.Spinner,{w:3,h:3,ml:1})]})}),(0,i.jsxs)(eQ.MenuList,{maxH:"lg",py:2,px:1,borderWidth:"px",borderColor:"border.grey",rounded:"lg",overflowY:"auto",children:[(0,i.jsx)(e$.MenuItem,{onClick:a,children:(0,i.jsx)(e2,{type:"Original Image",width:s,height:d})}),u.map(e=>{var t,n;return(0,i.jsx)(e$.MenuItem,{onClick:()=>l(e),type:"button",isDisabled:!(e.status===e1.P.COMPLETE&&(e.upscale_details.every(e=>e.width&&e.height)||e.image_width&&e.image_height)),children:(0,i.jsx)(e2,{type:(0,ee.PI)(e.upscale_details[0].oneClicktype),metadata:e.upscale_details[0].optional_metadata,width:null!==(t=e.image_width)&&void 0!==t?t:e.upscale_details[0].width,height:null!==(n=e.image_height)&&void 0!==n?n:e.upscale_details[0].height})},e.id)})]})]})};var e3=n(64430),e9=n(6874),e6=n.n(e9),e4=n(19321),e7=n(91073);let e8={type:e7.k.info,title:(0,i.jsxs)(p.Text,{children:["Upscaling started. Check the"," ",(0,i.jsx)(e3.Link,{as:e6(),href:e4.a.UNIVERSAL_UPSCALER,children:"Universal Upscaler"})]})};e7.k.info,p.Text,e3.Link,e6(),e4.a.LIBRARY;var te=n(20690),tt=n(21686),tn=n(21461),ti=n(66494),tr=n(98021),tl=n(28643),ta=n(97745),to=n(83833),ts=n(64843),td=n(67317),tc=n(34853),tu=n(78192),tm=n(68153),tg=n(62618);let tp=e=>{let{text:t}=e;return(0,i.jsx)(eu.Tooltip,{shouldWrapChildren:!0,label:t,placement:"auto",fontSize:"xs",arrowSize:6,hasArrow:!0,children:(0,i.jsx)(em.Center,{children:(0,i.jsx)(tn.A,{})})})},th=e=>{var t,n,r,l,a,o,d,c;let{image:u,imageSource:m,onClose:h,variations:v,refetchVariations:f,onUpscale:C,startPollingVariations:b,stopPollingVariations:j,areVariationsLoading:E,onGetImageId:U}=e,{isUltraUpscaleQuickSettingsEnabled:w}=(0,to.D)(),T=(0,L.j)(),[D,N]=(0,I.useState)(u),[O,G]=(0,I.useState)(ta.Zz.High),[B,z]=(0,I.useState)(u),W=(null==B?void 0:null===(t=B.dimensions)||void 0===t?void 0:t.width)||0,Y=(null==B?void 0:null===(n=B.dimensions)||void 0===n?void 0:n.height)||0,{userSelectedTeam:K}=(0,eG.s)(),q=K(),{isUserFreePlan:Z}=(0,V.usePlan)(),J=(0,e7.A)(),{handleGenError:X}=(0,te.B)(),Q=(0,ts.J)(),$=(0,L.G)(e=>e.view.alchemyRefinerCloseOnUpscale),[ee,{loading:et}]=(0,ed.n)(ei.l1U),en=ta.kc,er=w?en.creativityStrength:5,el=w?en.detailContrast:5,es=w?en.similarity:5,eC=(0,A.mN)({defaultValues:{creativityStrength:er,upscaleMultiplier:2,upscaleHeight:0,upscaleWidth:0,upscalerStyle:"Realistic",shouldHideModalOnSubmit:$,detailContrast:el,similarity:es}}),{control:eI,handleSubmit:ey,watch:e_,setValue:ej,getValues:eS}=eC,{data:eE,loading:eU}=(0,s.I)(ei.gYm,{variables:{arg1:{isUltra:!0}}}),ew=(null==eE?void 0:null===(r=eE.universalUpscalerStyles)||void 0===r?void 0:r.styles.filter(e=>null!==e))||[],eT=(null==B?void 0:B.userId)===Q.id,eA=(null==B?void 0:B.initImageType)===ei.AbP.Generated;async function eD(e){let{creativityStrength:t,upscaleMultiplier:n,upscalerStyle:i,detailContrast:r,similarity:l}=e;if(B)try{let e={creativityStrength:t,prompt:"",teamId:q.akUUID||void 0,ultraUpscaleStyle:i,upscaleMultiplier:n,detailContrast:r,similarity:l},a=D.initImageId;if(B.initImageType===ei.AbP.Generated){if(B.initVariationId)e.variationId=B.initVariationId;else{let t=await U();t&&(a=t),e.generatedImageId=B.initImageId||t}}else B.initImageType===ei.AbP.Uploaded&&(e.initImageId=B.initImageId);await ee({variables:{arg1:e},refetchQueries:[{query:ei.Z7e,variables:{id:a}}]}),eA&&eT?(T((0,tm.Vq)({imageId:a,imageVariationType:tu.Jr.UPSCALE_DEFAULT})),f({generationImageId:a}),null==C||C()):J(e8),e_("shouldHideModalOnSubmit")&&h(),T((0,tg.FS)())}catch(t){console.error("Error upscaling image",t);let e={type:e7.k.error,title:"Error",description:"There was an error while trying to upscale the selected image. Please wait and try again shortly"};if((0,tc.V)(t)&&(0,tc.o)({error:t,onError:X}))return;t instanceof ec.K4&&(e.description=t.message),J(e)}}let ek=Math.round(W*e_("upscaleMultiplier")),eR=Math.round(Y*e_("upscaleMultiplier")),eM=ek*eR/1e6,eN=!(0,tt.Xq)(eM,Z),eP=(0,td.r)({inputWidth:(null==B?void 0:null===(l=B.dimensions)||void 0===l?void 0:l.width)||0,inputHeight:(null==B?void 0:null===(a=B.dimensions)||void 0===a?void 0:a.height)||0,upscaleMultiplier:e_("upscaleMultiplier")}),eL=(0,ea.$)(eP),eV=!!(B&&eN&&eL),eO=e=>!e.length||e.every(e=>e.width&&e.height),eH=null==v||!v.length||v.every(e=>e.status===e1.P.COMPLETE&&(eO(e.upscale_details)||e.image_height&&e.image_width));(0,I.useEffect)(()=>{if(eH){j();return}b(3e3)},[b,j,eH,B]);let eF=et||m.isImageSaving,ez=()=>{let e=Object.entries(ta.Cx).find(e=>{let[t,n]=e;return n.creativityStrength===eS("creativityStrength")&&n.detailContrast===eS("detailContrast")&&n.similarity===eS("similarity")}),t=e?e[0]:"";t!==O&&G(t)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A.Op,{...eC,children:(0,i.jsxs)("form",{onSubmit:ey(eD),children:[(0,i.jsx)(y.ModalBody,{overflowY:"auto",overflowX:"hidden",height:"30rem",background:eo.C3.DARK_BLUE_TWO,p:5,layerStyle:"scrollbarSlim",sx:{scrollbarGutter:"stable"},children:(0,i.jsxs)(eg.SimpleGrid,{columns:{base:1,md:2},spacing:4,children:[(0,i.jsxs)(x.Flex,{flexDirection:"column",gap:2,position:"relative",children:[(0,i.jsx)(p.Text,{fontWeight:600,children:"Source Image"}),B&&(0,i.jsx)(e5,{variations:v,onChange:e=>{if(!e)return;let t={width:e.image_width||e.upscale_details[0].width||0,height:e.image_height||e.upscale_details[0].height||0};z(n=>n?{...n,initVariationId:e.id,dimensions:t}:null)},onSelectOriginal:()=>{z(e=>e?{...e,initVariationId:void 0,dimensions:D.dimensions}:null)},value:B.initVariationId,originalWidth:(null===(o=D.dimensions)||void 0===o?void 0:o.width)||0,originalHeight:(null===(d=D.dimensions)||void 0===d?void 0:d.height)||0,isLoading:!eH||E,..."dataUrl"===m.imageType&&{originalHeight:m.imageHeight,originalWidth:m.imageWidth}}),"generated"===m.imageType&&(0,i.jsx)(eB,{imageInput:B,onImageClear:()=>z(null),onImageSelect:e=>{var t,n;z(e),N(e),f({generationImageId:e.initImageId}),ej("upscaleWidth",(null===(t=e.dimensions)||void 0===t?void 0:t.width)||0),ej("upscaleHeight",(null===(n=e.dimensions)||void 0===n?void 0:n.height)||0)},megaPixels:eM,isClearImageDisabled:!eH||E}),"dataUrl"===m.imageType&&(0,i.jsx)(S.Box,{rounded:"lg",overflow:"hidden",children:(0,i.jsx)(tr._,{src:null!==(c=m.imageDataUrl)&&void 0!==c?c:"",alt:"",height:m.imageHeight,width:m.imageWidth,style:{objectFit:"cover"}})})]}),(0,i.jsxs)(x.Flex,{flexDirection:"column",gap:2,children:[(0,i.jsx)(p.Text,{fontWeight:600,children:"Upscale Settings"}),(0,i.jsxs)(_.Card,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:5,children:[(0,i.jsx)(S.Box,{mb:5,children:(0,i.jsx)(A.xI,{name:"upscalerStyle",control:eI,render:e=>{let{field:t}=e;return(0,i.jsx)(eq,{...t,styleOptions:ew,loading:eU})}})}),(0,i.jsxs)(S.Box,{children:[(0,i.jsx)(p.Text,{fontWeight:600,fontSize:"0.875rem",children:"Upscale Multiplier"}),(0,i.jsxs)(g.HStack,{alignItems:"center",mb:4,gap:4,children:[(0,i.jsx)(A.xI,{name:"upscaleMultiplier",control:eI,render:e=>{let{field:t}=e;return(0,i.jsx)(eb,{...t,min:1,max:2,step:.1})}}),(0,i.jsx)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",px:4,py:2,fontSize:"sm",minW:16,textAlign:"center",children:e_("upscaleMultiplier")})]})]}),(0,i.jsxs)(x.Flex,{alignItems:"center",gap:2,fontSize:"sm",minW:20,textAlign:"center",children:[(0,i.jsxs)(x.Flex,{align:"center",gap:1.5,children:[(0,i.jsxs)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2,children:["W ",ek," ",(0,i.jsx)(p.Text,{as:"span",color:"secondary.inactive",children:"px"})]}),(0,i.jsx)(x.Flex,{justifyContent:"center",flex:1,children:(0,i.jsx)(ti.A,{})}),(0,i.jsxs)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2,children:["H ",eR," ",(0,i.jsx)(p.Text,{as:"span",color:"secondary.inactive",children:"px"})]})]}),(0,i.jsxs)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2,minW:16,children:[Math.round(eM)," ",(0,i.jsx)(p.Text,{as:"span",color:"secondary.inactive",children:"MP"})]})]}),w&&(0,i.jsxs)(x.Flex,{mt:5,flexDirection:"column",gap:2.5,children:[(0,i.jsxs)(x.Flex,{alignItems:"center",gap:2,children:[(0,i.jsx)(p.Text,{fontWeight:600,fontSize:"0.875rem",children:"Upscale Strength"}),(0,i.jsx)(tp,{text:"Balances creativity, detail contrast, and similarity. Adjust each manually in Advanced Settings."})]}),(0,i.jsx)(tl.I,{options:Object.keys(ta.Cx),onChange:e=>{if(G(e),(0,ta.H8)(e)){let t=ta.Cx[e];ej("creativityStrength",t.creativityStrength),ej("detailContrast",t.detailContrast),ej("similarity",t.similarity)}},value:O})]}),(0,i.jsx)(ep.Accordion,{allowMultiple:!0,bg:"none",mt:5,sx:{"& .chakra-collapse":{overflow:"visible !important"}},children:(0,i.jsxs)(eh.AccordionItem,{borderWidth:0,_last:{borderWidth:0},children:[(0,i.jsx)(ev.AccordionButton,{p:0,children:(0,i.jsx)(em.Center,{width:"full",children:(0,i.jsxs)(x.Flex,{gap:2,align:"center",children:[(0,i.jsx)(p.Text,{fontWeight:600,fontSize:"xs",children:"Advanced Settings"}),(0,i.jsx)(ex.AccordionIcon,{})]})})}),(0,i.jsxs)(ef.AccordionPanel,{display:"flex",flexDirection:"column",gap:3,px:0,children:[(0,i.jsxs)(S.Box,{children:[(0,i.jsxs)(x.Flex,{alignItems:"center",gap:2,children:[(0,i.jsx)(p.Text,{fontWeight:600,fontSize:"0.875rem",children:"Creativity Strength"}),(0,i.jsx)(tp,{text:"Drag the slider to adjust and control the artistic intensity. Higher values yield more creativity, lower values keep closer to the source image."})]}),(0,i.jsxs)(g.HStack,{alignItems:"center",gap:3,children:[(0,i.jsx)(A.xI,{name:"creativityStrength",control:eI,render:e=>{let{field:t}=e;return(0,i.jsx)(eb,{...t,min:1,max:10,step:1,defaultValue:er,onChange:e=>{t.onChange(e),ez()}})}}),(0,i.jsx)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2.5,minW:"3.125rem",textAlign:"center",children:(0,i.jsxs)(p.Text,{fontSize:"xs",children:[e_("creativityStrength")," "]})})]})]}),(0,i.jsxs)(S.Box,{children:[(0,i.jsxs)(x.Flex,{alignItems:"center",gap:2,children:[(0,i.jsx)(p.Text,{fontWeight:600,fontSize:"0.875rem",children:"Details Contrast"}),(0,i.jsx)(tp,{text:"Adjusts the level of detail in the image. Higher values emphasize finer details."})]}),(0,i.jsxs)(g.HStack,{alignItems:"center",gap:3,children:[(0,i.jsx)(A.xI,{name:"detailContrast",control:eI,render:e=>{let{field:t}=e;return(0,i.jsx)(eb,{...t,min:1,max:10,step:1,defaultValue:el,onChange:e=>{t.onChange(e),ez()}})}}),(0,i.jsx)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2.5,minW:"3.125rem",textAlign:"center",children:(0,i.jsx)(p.Text,{fontSize:"xs",children:e_("detailContrast")})})]})]}),(0,i.jsxs)(S.Box,{children:[(0,i.jsxs)(x.Flex,{alignItems:"center",gap:2,children:[(0,i.jsx)(p.Text,{fontWeight:600,fontSize:"0.875rem",children:"Similarity"}),(0,i.jsx)(tp,{text:"Control how closely the output matches the original image. Higher values result in greater similarity."})]}),(0,i.jsxs)(g.HStack,{alignItems:"center",gap:3,children:[(0,i.jsx)(A.xI,{name:"similarity",control:eI,render:e=>{let{field:t}=e;return(0,i.jsx)(eb,{...t,min:1,max:10,step:1,defaultValue:es,onChange:e=>{t.onChange(e),ez()}})}}),(0,i.jsx)(S.Box,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2.5,minW:"3.125rem",fontSize:"sm",textAlign:"center",children:(0,i.jsx)(p.Text,{fontSize:"xs",children:e_("similarity")})})]})]})]})]})})]})]})]})}),(0,i.jsxs)(k.ModalFooter,{flexDirection:"column",gap:3,borderTopWidth:"px",borderTopStyle:"solid",borderTopColor:"border.grey",children:[(0,i.jsx)(x.Flex,{justifyContent:"center",children:(0,i.jsx)(A.xI,{name:"shouldHideModalOnSubmit",control:eI,render:e=>{let{field:t}=e;return(0,i.jsx)(R.Checkbox,{variant:"alternative",...t,value:t.value.toString(),isChecked:e_("shouldHideModalOnSubmit"),onChange:e=>{let n="true"!==e.target.value;t.onChange(e),T((0,F.nv)(n))},fontSize:"sm",children:(0,i.jsx)(p.Text,{fontSize:"sm",children:"Close this modal after commencing upscale"})})}})}),(0,i.jsxs)(x.Flex,{w:"full",gap:4,children:[(0,i.jsx)(M.Button,{onClick:h,flex:1,variant:"outline",background:"background.darkblue",borderColor:"border.greyBlue",children:"Cancel"}),(0,i.jsx)(eu.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:(0,tt.Mv)({hasImageInput:!!B,upscaleMultiplierResult:{canUpscaleForMultiplier:eN,resultingMegapixels:eM},canAffordUpscale:eL,areMegapixelUpscalesLimited:Z}),isDisabled:eV,children:(0,i.jsx)(M.Button,{"data-tracking-id":H.IkO,type:"submit",variant:"gradient",isDisabled:!eV,flex:1,rightIcon:(0,i.jsxs)(x.Flex,{alignItems:"center",children:[(0,i.jsx)(P.A,{fill:"white"}),(0,i.jsx)(p.Text,{fontSize:"sm",children:eP})]}),isLoading:eF,children:"Upscale"})})]})]})]})})})};var tv=n(59936);let tx=e=>{let{imageId:t,isImageSaving:n,onGetImageId:r,generation:l,variations:a,refetchVariations:o,refetchingVariations:s,onClose:d}=e,[c,u]=(0,I.useState)("smooth"),m=(0,tv.D)(l||void 0),{handleUpscaleSmooth:g,handleUpscaleHd:h,upscaleSmoothLoading:v,upscaleHdLoading:f}=(0,er.a)(t,t,{fallbackData:a}),C=(0,L.j)(),b=(0,L.G)(e=>e.view.alchemyRefinerCloseOnUpscale),E=e=>{C((0,F.nv)(e))},{isDisabledUpscaleSmooth:U,isDisabledUpscaleHd:w}=(0,el.C)(a),{hasHitLimitUpscaleSmooth:T,hasHitLimitUpscaleHd:A}=(0,ee.fu)(a||[]),D=U||v||!m||s||n,N=v||s||"smooth"===c&&n,V=T&&m,G=async()=>{u("smooth");let e=await r();if(e){if(await g(e,[{query:ei.Z7e,variables:{id:e}}]),b)return d();o({generationImageId:e})}},B=w||f||!m||s||n,z=f||s||"crisp"===c&&n,W=A&&m,Y=async()=>{u("crisp");let e=await r();if(e){if(await h(e,[{query:ei.Z7e,variables:{id:e}}]),b)return d();o({generationImageId:e})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.ModalBody,{background:eo.C3.DARK_BLUE_TWO,p:5,height:"30rem",children:(0,i.jsxs)(x.Flex,{flexDirection:"column",gap:6,children:[(0,i.jsx)(_.Card,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",children:(0,i.jsx)(j.FormControl,{variant:"group",background:"none",children:(0,i.jsxs)(x.Flex,{align:"center",width:"full",gap:2,children:[(0,i.jsxs)(S.Box,{flex:1,children:[(0,i.jsx)(p.Text,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Smooth Upscale"}),(0,i.jsx)(p.Text,{color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"An upscaler that works well with a focused subject, but can end up smoothing out fine detail."})]}),(0,i.jsx)(eu.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:m?T?"Smooth upscale has already been performed on this image.":"":"Smooth upscale is not compatible with this generation's settings.",children:(0,i.jsx)(M.Button,{"data-tracking-id":H.wBp,px:2,py:1.5,isLoading:N,isDisabled:D,onClick:G,type:"submit",variant:"primary",maxW:"fit-content",rightIcon:V?void 0:(0,i.jsxs)(x.Flex,{alignItems:"center",children:[(0,i.jsx)(P.A,{fill:"white"}),(0,i.jsx)(p.Text,{fontSize:"sm",children:O.VP.UPSCALE})]}),maxWidth:"6.25rem",children:V?"Completed":"Upscale"})})]})})}),(0,i.jsx)(_.Card,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",children:(0,i.jsx)(j.FormControl,{variant:"group",background:"none",children:(0,i.jsxs)(x.Flex,{align:"center",width:"full",gap:2,children:[(0,i.jsxs)(S.Box,{flex:1,children:[(0,i.jsx)(p.Text,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Crisp Upscale"}),(0,i.jsx)(p.Text,{color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"A great balanced upscaler which retains a good amount of detail and crispness to the image."})]}),(0,i.jsx)(eu.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:m?A?"Crisp upscale has already been performed on this image.":"":"Crisp upscale is not compatible with this generation's settings.",children:(0,i.jsx)(M.Button,{isLoading:z,"data-tracking-id":H.XFO,isDisabled:B,onClick:Y,px:2,py:1.5,type:"submit",variant:"primary",maxW:"fit-content",rightIcon:W?void 0:(0,i.jsxs)(x.Flex,{alignItems:"center",children:[(0,i.jsx)(P.A,{fill:"white"}),(0,i.jsx)(p.Text,{fontSize:"sm",children:O.VP.UPSCALE})]}),maxWidth:"6.25rem",children:W?"Completed":"Upscale"})})]})})})]})}),(0,i.jsxs)(k.ModalFooter,{gap:3,flexDirection:"column",borderColor:"border.nobleBlack",borderTopWidth:"px",children:[(0,i.jsx)(x.Flex,{gridColumn:"1/-1",alignItems:"center",flex:"1 1 100%",children:(0,i.jsx)(R.Checkbox,{variant:"alternative",isChecked:b,onChange:e=>E(e.target.checked),children:(0,i.jsx)(p.Text,{fontSize:"sm",children:"Close this modal after commencing upscale"})})}),(0,i.jsx)(em.Center,{w:"full",children:(0,i.jsx)(M.Button,{maxWidth:"50%",onClick:d,flex:1,variant:"outline",background:"background.darkblue",borderColor:"border.greyBlue",children:"Cancel"})})]})]})};var tf=n(38322),tC=n(77948),tI=n(24759),tb=n(76747);let ty=e=>{var t,n,r,l,a,y;let{imageSource:_,onClose:j,onUpscale:S}=e,[E,U]=(0,I.useState)(0),[w]=(0,I.useState)(_),T=(0,tb.F)(),A=_.imageId,D=(0,ts.J)(),{data:k,complete:R}=(0,o.I)({fragment:ei.prk,fragmentName:"ImageUpscalerParts",from:{__typename:"generated_images",id:_.imageId}}),{data:M}=(0,s.I)(ei.spZ,{...A&&{variables:{id:A}},errorPolicy:"all",skip:R||!A}),N="dataUrl"===w.imageType&&!(null==M?void 0:M.generated_images_by_pk),P=R?k:"dataUrl"!==w.imageType||(null==M?void 0:M.generated_images_by_pk)?null==M?void 0:M.generated_images_by_pk:{id:"",url:"",userId:"",image_width:0,image_height:0},L=N?{...w,isImageSaving:_.isImageSaving}:_,{data:V,refetch:O,loading:H,networkStatus:F,startPolling:G,stopPolling:B}=(0,s.I)(ei.Ieo,{...A&&{variables:{generationImageId:A,variationWhere:{status:{_neq:e1.P.FAILED}}}},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,skip:!A});if(!P)return null;let z={initImageId:P.id,initImageType:ei.AbP.Generated,url:P.url,alt:"Generated Image",..."generated"===_.imageType&&{userId:P.userId,dimensions:{width:P.image_width||(null===(t=P.generation)||void 0===t?void 0:t.imageWidth)||0,height:P.image_height||(null===(n=P.generation)||void 0===n?void 0:n.imageHeight)||0}},..."dataUrl"===_.imageType&&{userId:D.id,dimensions:{height:_.imageHeight||0,width:_.imageWidth||0}}},W=null==V?void 0:null===(r=V.generated_images_by_pk)||void 0===r?void 0:r.generated_image_variation_generics,Y={sdVersion:(null===(l=P.generation)||void 0===l?void 0:l.sdVersion)||_.sdVersion,alchemy:null===(a=P.generation)||void 0===a?void 0:a.alchemy},K=async()=>P.id?P.id:A||(_.onGetImageId?_.onGetImageId():void 0),q=null!==(y=P.id)&&void 0!==y?y:A;return(0,i.jsxs)(c.Tabs,{variant:"page",index:E,onChange:U,children:[(0,i.jsxs)(u.ModalHeader,{px:0,pb:0,children:[(0,i.jsx)(m.ModalCloseButton,{top:4,variant:"outline",borderRadius:"full",border:"1px solid",borderColor:"borderNew.primary"}),(0,i.jsxs)(g.HStack,{px:{base:3,md:5},gap:{base:2,md:2.5},children:[(0,i.jsx)(tC.A,{height:7,width:7}),(0,i.jsx)(p.Text,{fontSize:{base:"xl",md:"2xl"},fontWeight:500,fontStyle:"normal",children:"Upscale Image"})]}),(0,i.jsxs)(h.TabList,{px:5,borderBottom:"none",children:[(0,i.jsx)(v.Tab,{ml:0,px:{base:1,md:"inherit"},children:(0,i.jsxs)(x.Flex,{gap:1.5,alignItems:"center",children:[(0,i.jsx)(p.Text,{size:{base:"xs",md:"sm"},children:"Ultra"}),(0,i.jsx)(tI.w,{lifeCycle:"New"})]})}),(0,i.jsx)(v.Tab,{px:{base:1,md:"inherit"},children:"Alchemy"}),(0,i.jsx)(v.Tab,{px:{base:1,md:"inherit"},children:"Other"})]})]}),(0,i.jsx)(tf.S,{children:(0,i.jsxs)(f.TabPanels,{children:[(0,i.jsx)(C.TabPanel,{p:T?void 0:0,pt:0,children:T?(0,i.jsx)(th,{image:z,imageSource:L,onGetImageId:K,variations:W,onClose:j,onUpscale:S,refetchVariations:O,areVariationsLoading:H,startPollingVariations:G,stopPollingVariations:B}):(0,i.jsx)(b.o,{onClose:j})}),(0,i.jsx)(C.TabPanel,{pt:0,children:(0,i.jsx)(es,{imageId:q,isImageSaving:!!_.isImageSaving,onGetImageId:K,generation:Y,variations:W,onClose:j,refetchVariations:O,refetchingVariations:H&&F===d.pT.refetch})}),(0,i.jsx)(C.TabPanel,{pt:0,children:(0,i.jsx)(tx,{imageId:q,isImageSaving:!!_.isImageSaving,onGetImageId:K,generation:Y,variations:W,refetchVariations:O,refetchingVariations:H&&F===d.pT.refetch,onClose:j})})]})})]})},t_=e=>{let{isOpen:t,onClose:n,onUpscale:o,...s}=e,d="imageId"in s?{imageType:"generated",imageId:s.imageId}:{imageType:"dataUrl",imageDataUrl:s.imageDataUrl,imageHeight:s.imageHeight,imageWidth:s.imageWidth,isImageSaving:s.isImageSaving,onGetImageId:s.onGetImageId,sdVersion:s.sdVersion};return(0,i.jsxs)(r.Modal,{variant:"gradientDialogStyle",isOpen:t,onClose:n,isCentered:!0,children:[(0,i.jsx)(l.ModalOverlay,{}),(0,i.jsx)(a.ModalContent,{maxW:"45rem",children:(0,i.jsx)(ty,{imageSource:d,onClose:n,onUpscale:o})})]})}},46200:(e,t,n)=>{n.d(t,{W:()=>a});var i=n(88095),r=n(12115),l=n(958);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...n}=e,[a,o]=(0,i.n)(l.Eis,{...n,update(e,n,i){var r,l;let a=null===(l=n.data)||void 0===l?void 0:null===(r=l.delete_generated_images_by_pk)||void 0===r?void 0:r.id,o=e.identify({id:a,__typename:"generated_images"});e.evict({id:o}),e.gc(),null==t||t(e,n,i)}});return[(0,r.useCallback)((e,t)=>a({variables:{id:e},...t}),[a]),o]}},52516:(e,t,n)=>{n.d(t,{f:()=>k});var i=n(95155),r=n(52017),l=n(64982),a=n(1996),o=n(57599),s=n(831),d=n(39376),c=n(85821),u=n(58670),m=n(59771),g=n(6126),p=n(40988),h=n(96065),v=n(77700),x=n(92998),f=n(12115),C=n(72777),I=n(69387),b=n(21542),y=n(28634),_=n(68031),j=n(77078),S=n(59133),E=n(79849);let U=e=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.644 9.53849C19.3838 9.53941 20.0492 9.91985 20.4223 10.5569C20.7954 11.1922 20.8027 11.9548 20.4443 12.5974L19.008 15.1708C18.6835 14.8435 18.2966 14.5782 17.8666 14.3942L17.913 14.3111L19.2436 11.9273C19.415 11.6212 19.2958 11.3535 19.2362 11.2554C19.1775 11.1537 19.0006 10.9163 18.644 10.9163L6.92991 10.9098H6.92812C6.17829 10.9098 5.4871 11.3141 5.1241 11.9658L2.46295 16.7389C2.29245 17.0451 2.41167 17.3118 2.47034 17.4127C2.52992 17.5144 2.70681 17.7509 3.0634 17.7509H12.8518C12.8579 18.2384 12.9608 18.7026 13.1422 19.125H3.0634C2.32365 19.125 1.65822 18.7446 1.28422 18.1075C1.09447 17.7839 1.00179 17.4264 1.00179 17.0689C1.00179 17.0671 1.00134 17.0655 1.0009 17.0639C1.00045 17.0623 1 17.0607 1 17.0588V7.4375C1 5.221 2.221 4 4.4375 4H7.1875C7.36992 4 7.54411 4.07242 7.67336 4.20167L9.30505 5.83333H14.5199C16.7364 5.83333 17.9574 7.05433 17.9574 9.27083V9.53849H18.644ZM6.90149 5.375H4.4366C2.99102 5.375 2.3741 5.99192 2.3741 7.4375V14.0723L3.92232 11.2948C4.52824 10.2077 5.67964 9.53301 6.92723 9.53301H6.92991L16.5815 9.53849V9.27083C16.5815 7.82525 15.9646 7.20833 14.519 7.20833H9.01904C8.83663 7.20833 8.66243 7.13592 8.53318 7.00667L6.90149 5.375Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M16.4998 11.9166C13.9698 11.9166 11.9165 13.97 11.9165 16.5C11.9165 19.03 13.9698 21.0833 16.4998 21.0833C19.0298 21.0833 21.0832 19.03 21.0832 16.5C21.0832 13.97 19.0298 11.9166 16.4998 11.9166ZM18.3469 15.675L16.2065 17.8108C16.1423 17.8795 16.0552 17.9116 15.9636 17.9116C15.8765 17.9116 15.7894 17.8795 15.7207 17.8108L14.6528 16.7429C14.5198 16.61 14.5198 16.3899 14.6528 16.257C14.7857 16.1241 15.0057 16.1241 15.1386 16.257L15.9636 17.0821L17.8611 15.1891C17.994 15.0516 18.214 15.0516 18.3469 15.1891C18.4798 15.322 18.4798 15.5375 18.3469 15.675Z",fill:"currentColor"})]});var w=n(83833),T=n(69122),A=n(78373),D=n(69756);let k=e=>{let{onCollectionChecked:t,onCollectionMoved:n,selectedImages:k,icon:R,displayText:M,mode:N,currentCollectionId:P,isQuickActionsButton:L=!1,isOpen:V=!1,onOpenChange:O=()=>{},onCloseModal:H,closeModalOnEmptySelection:F,isSaved:G=!1,inPortal:B=!1,...z}=e,{isSharedCollectionsEnabled:W}=(0,w.D)(),Y=(0,f.useRef)(null),{isOpen:K,onClose:q,onOpen:Z}=(0,r.useDisclosure)(),{userSelectedTeam:J}=(0,T.s)(),X=J(),{selectedCollections:Q,clearSelectedCollections:$}=(0,_._Q)(),[ee,et]=(0,f.useState)(!1),[en,ei]=(0,f.useState)(0),er=B?l.Portal:f.Fragment,el=X.id&&1===en?"team":"personal",ea=(0,y.Sj)(el);(0,f.useEffect)(()=>{et(V),V&&(0,A.u4)(D.XX)},[V]);let eo=(null==k?void 0:k.length)===0&&0===Q.length,es=G?{icon:(0,i.jsx)(U,{}),background:"secondary.green",_active:{background:"secondary.green"},_hover:{background:"secondary.green"}}:{};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Menu,{isLazy:!0,placement:L?"bottom":void 0,gutter:L?2:void 0,closeOnBlur:!0,isOpen:ee,onOpen:()=>{et(!0),O(!0)},onClose:()=>{et(!1),O(!1)},children:e=>{let{isOpen:r}=e;return(0,i.jsxs)(i.Fragment,{children:[L?(0,i.jsx)(o.Tooltip,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:"Organize",pointerEvents:"auto",children:(0,i.jsx)(s.MenuButton,{as:d.IconButton,pointerEvents:"auto","aria-label":"Organize in a collection",icon:(0,i.jsx)(j.A,{boxSize:7}),variant:"blurredBackground",...es,...z})}):(0,i.jsxs)(s.MenuButton,{as:c.Button,bg:r?"midnightBlue":"background.darkblue",color:"white",fontSize:"sm",isDisabled:eo,ref:Y,borderColor:"border.primary",size:"sm",py:2,px:4,title:eo?"Select an item to use this action":"Organize images and collections",variant:"outline",display:"flex",alignItems:"center",justifyContent:"center",...z,children:[R,(0,i.jsx)(u.Text,{as:"span",children:M}),(0,i.jsx)(S.A,{boxSize:2,ml:2})]}),r&&(0,i.jsx)(er,{children:(0,i.jsxs)(m.MenuList,{pointerEvents:"auto",zIndex:6,w:L?"xs":"sm",minH:60,maxH:"50vh",bg:"darkbluealt",borderRadius:8,border:"none",p:0,position:"relative",overflowY:"scroll",mb:9,css:{"&::-webkit-scrollbar":{width:1},"&::-webkit-scrollbar-track":{width:2},"&::-webkit-scrollbar-thumb":{background:"border.greyBlue",borderRadius:8}},boxShadow:L?"0px 0px 15px 0px #8380FF4D":void 0,children:[(0,i.jsx)("div",{className:"relative px-2 pt-2 pb-4",children:X.id?(0,i.jsxs)(g.Tabs,{variant:"switch",isFitted:!0,index:en,onChange:ei,children:[(0,i.jsxs)(p.TabList,{children:[(0,i.jsx)(h.Tab,{fontWeight:500,fontSize:"sm",children:"Your Collections"}),(0,i.jsx)(h.Tab,{fontWeight:500,fontSize:"sm",children:W?"Shared with You":"Team Collections"})]}),(0,i.jsx)("div",{className:"pt-2",children:(0,i.jsx)(C.u,{mode:N,selectedImages:k,onCollectionChecked:t,onCollectionMoved:n,currentCollectionId:P,hideRootItem:L,selectedCollections:Q,clearSelectedCollections:$,...ea})})]}):(0,i.jsx)("div",{className:"pt-2",children:(0,i.jsx)(C.u,{mode:N,selectedImages:k,onCollectionChecked:t,currentCollectionId:P,hideRootItem:L,selectedCollections:Q,clearSelectedCollections:$,...ea})})}),(0,i.jsx)(v.Box,{position:"fixed",bottom:0,left:0,right:0,borderBottomRadius:8,borderTopWidth:0,borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",children:(0,i.jsxs)(c.Button,{cursor:"pointer",title:"View all collections","aria-label":"View all collections",py:2,px:4,variant:"filled",rounded:"none",borderBottomRadius:8,background:"old.darkblue",fontWeight:500,onClick:Z,fontSize:"sm",w:"full",_hover:{background:"midnightBlue"},children:["View all",(0,i.jsx)(x.Spacer,{}),(0,i.jsx)(E.A,{})]})})]})})]})}}),(0,i.jsx)(I.Z,{mode:null!=N?N:b.v1.SELECT,onCollectionChecked:t,selectedImages:k,isOpen:K,onClose:()=>{q(),null==H||H()},currentCollectionId:P,closeOnEmptySelection:F,selectedCollections:Q,clearSelectedCollections:$})]})}},55343:(e,t,n)=>{n.d(t,{i:()=>m});var i=n(95155),r=n(57599),l=n(39376),a=n(30552),o=n(35199),s=n(7524),d=n(62105),c=n(12115),u=n(91073);let m=e=>{let{isDisabled:t,textToCopy:n,tooltipLabel:m="Copy prompt to clipboard",tooltipProps:g,...p}=e,h=(0,u.A)(),{isCopied:v,handleCopyPrompt:x}=function(e,t,n){let[i,r]=(0,c.useState)(!1),l=(0,c.useRef)(null),a=async(n,i)=>{n.stopPropagation(),s.Z({category:"user.action",message:null!=e?e:"User triggered a copy action",level:"debug"});try{await navigator.clipboard.writeText(i),r(!0),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{r(!1),l.current=null},1200)}catch(e){r(!1),t&&t(e),d.Cp(e)}};return(0,c.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[]),{isCopied:i,handleCopyPrompt:a}}("User is attempting to ".concat(m),()=>{h({type:u.k.error,title:"Failed to copy",description:"Please try again"})}),f=p.variant?{}:{position:"relative",w:8,h:8,fontSize:{base:"xs",md:"sm"},fontWeight:300,size:"sm",color:"white",p:1,_disabled:{opacity:"0.5",cursor:"not-allowed",_hover:{bg:"rgba(23, 23, 23, 1)"}}};return(0,i.jsx)(r.Tooltip,{hasArrow:!0,placement:"top",label:v?"Copied!":m,...g,children:(0,i.jsx)(l.IconButton,{"aria-label":m,variant:p.variant||"ModalImageButtonsStyles",isDisabled:t,onClick:e=>x(e,n),...f,...p,children:v?(0,i.jsx)(a.A,{boxSize:p.variant?4.5:4}):(0,i.jsx)(o.A,{boxSize:p.variant?4.5:3.5})})})}},55903:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(3740);let l=e=>(0,i.jsx)(r.Icon,{width:3.5,height:1,viewBox:"0 0 14 4",fill:"currentColor",...e,children:(0,i.jsx)("path",{d:"M1.67993 3.33334C0.943932 3.33334 0.343262 2.736 0.343262 2.00001C0.343262 1.26401 0.936592 0.666672 1.67326 0.666672H1.67993C2.41593 0.666672 3.01327 1.26401 3.01327 2.00001C3.01327 2.736 2.4166 3.33334 1.67993 3.33334ZM8.3466 2.00001C8.3466 1.26401 7.74927 0.666672 7.01327 0.666672H7.00659C6.27059 0.666672 5.6766 1.26401 5.6766 2.00001C5.6766 2.736 6.2766 3.33334 7.01327 3.33334C7.74993 3.33334 8.3466 2.736 8.3466 2.00001ZM13.6799 2.00001C13.6799 1.26401 13.0826 0.666672 12.3466 0.666672H12.3399C11.6039 0.666672 11.0099 1.26401 11.0099 2.00001C11.0099 2.736 11.6099 3.33334 12.3466 3.33334C13.0833 3.33334 13.6799 2.736 13.6799 2.00001Z"})})},56438:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(95155),r=n(19460),l=n(58195),a=n(77700),o=n(84287),s=n(64982);let d=e=>{let{children:t,menuButtons:n,borderColor:d,zIndex:c,contentProps:u,display:m,shouldWrapWithPortal:g,portalContainerRef:p,...h}=e;return(0,i.jsx)(r.Popover,{offset:[0,2],returnFocusOnClose:!1,...h,styleConfig:{baseStyle:{popper:{zIndex:c||10}}},children:e=>{let{isOpen:r,onClose:c}=e,h=(0,i.jsx)(l.PopoverContent,{bgColor:"black",w:"auto",border:"1px solid",borderColor:d||"inherit",borderRadius:"md",overflow:"hidden",onClick:c,...u,children:n});return(0,i.jsxs)(a.Box,{display:m,h:"fit-content !important",children:[(0,i.jsx)(o.PopoverTrigger,{children:"function"==typeof t?t({isOpen:r}):t}),g?(0,i.jsx)(s.Portal,{containerRef:p,children:h}):h]})}})}},56697:(e,t,n)=>{n.d(t,{Zw:()=>x});var i=n(69507),r=n(31481),l=n(12115),a=n(22613),o=n(92167),s=n(35936),d=n(958),c=n(85756),u=n(66415),m=n(75264);let g=(e,t)=>Object.keys(c.We).find(n=>(e||t)===c.We[n]),p=e=>{let{promptMagic:t,promptMagicStrength:n,photoReal:i,photoRealStrength:r,initStrength:l,imageToImage:a}=e,o="No init image";return a&&l?l:t&&!a&&!n||t&&n||i&&!a&&!r||i&&r?o:l||o},h=(e,t,n)=>{if(n&&e){var i;return(null===(i=e.find(e=>e.akUUID===n))||void 0===i?void 0:i.name)||"-"}return t?c.d6[t]:"-"},v=(e,t,n)=>{if(n)return n;if(t&&e){var i;return(null===(i=e.find(e=>e.id===t))||void 0===i?void 0:i.name)||"-"}return"-"},x=(e,t,n)=>{let{data:c,loading:x,refetch:f,startPolling:C,stopPolling:I}=(0,i.I)(d.Z7e,{variables:{id:e},skip:!e,...t}),{styles:b}=(0,o.v)(),{presets:y}=(0,a.Y)(),_=(0,l.useMemo)(()=>{var e,t,i,l,a;let o=(0,u.OX)(null!==(a=null==c?void 0:c.generated_images_by_pk)&&void 0!==a?a:n);if(!o)return null;let{createdAt:x,generation:f,user:C,generated_image_moderation:I,generated_image_variation_generics:_,id:j,nsfw:S,conditionalImageUrl:E,imageUrl:U,motionGifUrl:w,motionMp4Url:T,showLatestUpscaledImg:A,imageWidth:D,imageHeight:k,teamId:R}=o,M=(0,m.a9)(_),N=(0,m.rY)(_),P=(0,m.H5)(_),L=(0,m.zK)(_),V=(0,m._A)(_),O=(0,m.cs)(_),H=(0,m.N2)(_),F=(0,m.KE)(_),G=(0,m.or)(_),{imageHeight:B,imageWidth:z,inferenceSteps:W,seed:Y,modelId:K,scheduler:q,custom_model:Z,initStrength:J,promptMagic:X,promptMagicStrength:Q,alchemy:$,contrastRatio:ee,presetStyle:et,styleUUID:en,photoReal:ei,photoRealStrength:er,photoRealVersion:el,transparency:ea,ultra:eo,imageToVideo:es,motionModel:ed,motion:ec}=f,eu=null==c?void 0:null===(i=c.generated_images_by_pk)||void 0===i?void 0:null===(t=i.generation)||void 0===t?void 0:null===(e=t.generation_presets_useds)||void 0===e?void 0:e[0],em=q?(0,u.mN)(q):"No scheduler",eg=(0,s.p4)(null!=K?K:""),ep=[{spec:$?"Input Resolution":"Resolution",value:D&&k?"".concat(D,"x").concat(k):"".concat(z,"x").concat(B)},{spec:"Created",value:(0,u.Sz)(x)},eg?void 0:$?{spec:"Contrast",value:ee}:{spec:"Step Count",value:"Leonardo"===em?"-":W},{spec:"Seed",value:Y},{spec:"Preset",value:v(y,null==eu?void 0:eu.presetId)},{spec:"Preset Style",value:h(b,et,en)}].filter(Boolean);return ei?(ep.push({spec:"PhotoReal",value:"On"}),el===r.PhotoRealVersion.V2?ep.push({spec:"Model",value:(0,s.Td)(K,null==Z?void 0:Z.name)}):ep.push({spec:"Depth of Field",value:g(er,J)})):X&&ep.push({spec:"Prompt Magic Strength",value:Q||J}),ep.push({spec:"Init Strength",value:p(f)}),ea!==d.P2Y.Disabled&&ep.push({spec:"Transparent",value:"On"}),ep.push({spec:"Generation Mode",value:eo?"Ultra":$?"Quality":"Fast"}),{specs:ep,prompt:f.prompt,negativePrompt:f.negativePrompt,originalUrl:U,username:null==C?void 0:C.username,custom_model:Z,generated_image_moderation:I,generated_image_variation_generics:_,generation:f,id:j,userId:null==C?void 0:C.id,conditionalUrl:E,showLatestUpscaledImg:A,completedAlchemyRefinerUpscales:M,completedUnzooms:P,completedDefaultUpscales:L,completedAlternateUpscales:V,completedHdUpscales:O,completedNoBGS:H,completedSmoothUpscales:F,completedUniversalUpscales:N,completedUltraUpscales:G,nsfw:S,motionGifUrl:w,motionMp4Url:T,preset:eu,public:null==c?void 0:null===(l=c.generated_images_by_pk)||void 0===l?void 0:l.public,imageWidth:D,imageHeight:k,teamId:R,imageToVideo:es,motionModel:ed,motion:ec}},[null==c?void 0:c.generated_images_by_pk,n,b,y]);return(0,l.useMemo)(()=>({image:_,loading:x,refetch:f,startPolling:C,stopPolling:I}),[_,x,f,C,I])}},59936:(e,t,n)=>{n.d(t,{D:()=>r});var i=n(35936);let r=e=>{if(!e)return!1;let t=(0,i.kt)(e.sdVersion),n=(0,i.L7)(e.sdVersion),r=(0,i.vT)(e.sdVersion);return!n&&!r&&(!t||!!(null==e?void 0:e.alchemy))}},60161:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(3740);let l=e=>(0,i.jsx)(r.Icon,{width:6,height:6,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M19.4766 7.0838L12.0645 0.987852C10.8675 0.00585163 9.13261 0.00485164 7.93561 0.987852L0.523625 7.08282C0.204625 7.34582 0.157597 7.81785 0.420597 8.13885C0.683597 8.45985 1.15663 8.50388 1.47663 8.24188L2.24958 7.60589V15.9988C2.24958 18.4168 3.58158 19.7488 5.99958 19.7488H13.9996C16.4176 19.7488 17.7496 18.4168 17.7496 15.9988V7.60589L18.5225 8.24188C18.6625 8.35688 18.8316 8.41278 18.9996 8.41278C19.2156 8.41278 19.4306 8.31983 19.5786 8.13983C19.8426 7.81883 19.7956 7.3468 19.4766 7.0838ZM11.7496 18.2488H8.24958V14.4988C8.24958 13.5338 9.03458 12.7488 9.99958 12.7488C10.9646 12.7488 11.7496 13.5338 11.7496 14.4988V18.2488ZM16.2496 15.9988C16.2496 17.5758 15.5766 18.2488 13.9996 18.2488H13.2496V14.4988C13.2496 12.7068 11.7916 11.2488 9.99958 11.2488C8.20758 11.2488 6.74958 12.7068 6.74958 14.4988V18.2488H5.99958C4.42258 18.2488 3.74958 17.5758 3.74958 15.9988V6.37286L8.88861 2.14789C9.53161 1.61889 10.4686 1.61889 11.1116 2.14789L16.2506 6.37384V15.9988H16.2496Z"})})},61185:(e,t,n)=>{n.d(t,{C:()=>m});var i=n(95155),r=n(84492),l=n(12115),a=n(32102),o=n(26420),s=n(59726),d=n(68691),c=n(59434),u=n(5112);let m=(0,l.forwardRef)(function(e,t){let{error:n,fontSize:l="lg",generate:m,generatingTooltipText:g,imageTokenCost:p,isDisabled:h,isGenerating:v,shouldDisableWhileGenerating:x=!0,suppressTokenCostTooltip:f,tooltipPlacement:C="right",showCoinIcon:I=!0,children:b,...y}=e,_=(0,d.G)(e=>e.generation.imagesUploadingCount>0),j=p&&!f?"This will use ".concat(p," tokens."):void 0;h&&(j=n),_&&(j="Please wait until all image inputs are fully uploaded."),v&&(j=g);let S=x&&v,E=v?"Generating":"Generate";return(0,i.jsx)("div",{"data-tour-id":"generate-button",className:"relative h-min w-fit rounded-xl",children:(0,i.jsxs)(s.m_,{children:[(0,i.jsx)(s.k$,{asChild:!0,children:(0,i.jsx)(o.$,{ref:t,"data-tracking-id":u.Ras,onClick:S?void 0:m,disabled:S||h||_,"aria-busy":v,"aria-label":v?"Generating, please wait":"Generate",type:"button",...y,children:(0,i.jsxs)("div",{className:(0,c.cn)("flex items-center justify-center gap-2",{"opacity-50":v,"opacity-100":!v}),children:[(0,i.jsx)("span",{children:b||E}),v?(0,i.jsx)(r.Spinner,{boxSize:3,role:"status","aria-label":"Loading"}):(0,i.jsxs)("div",{className:"flex items-center gap-0.5",children:[I&&(0,i.jsx)(a.A,{fill:"white"}),(0,i.jsx)("span",{className:"text-sm",children:p})]})]})})}),j&&(0,i.jsx)(s.ZI,{side:C,children:j})]})})})},62398:(e,t,n)=>{n.r(t),n.d(t,{useDescribeImage:()=>u});var i=n(12115),r=n(30208),l=n(20690),a=n(958),o=n(68691),s=n(71503),d=n(34853),c=n(62618);let u=e=>{let{actor:t,onError:n,onSuccess:u}=e,m=(0,o.j)(),{handleGenError:g}=(0,l.B)(),[p,h]=(0,i.useState)(!1),[v,x]=(0,i.useState)(null);return{describeImage:async e=>{try{h(!0),x(null);let i=e.teamId?parseInt(e.teamId):void 0,l=e.initImageType===a.AbP.Uploaded?a.Nyx.Init:a.Nyx.Generated,o={imageId:e.imageId,teamId:i,imageType:l};t.send({type:"describeImage.generate",params:{selectedImage:o}}),await Promise.race([(0,r.fm)(t,e=>e.matches({describeImage:"success"}),{timeout:3e4}).then(e=>{let{context:t}=e;m((0,c.FS)()),t.prompt&&(null==u||u(t.prompt))}),(0,r.fm)(t,e=>e.matches({describeImage:"failure"}),{timeout:3e4}).then(e=>{let{context:t}=e,i=t.describeImageError;if((0,s.Y)(i)&&(0,s.H)({error:i,onError:g})||(0,d.V)(i)&&(0,d.o)({error:i,onError:g})){x(i),null==n||n(Error(i.message));return}let r=Error((null==i?void 0:i.message)||"Sorry! Something went wrong, please try again.");x(r),null==n||n(r)})])}catch(t){let e=t instanceof Error?t:Error("An unexpected error occurred");x(e),null==n||n(e)}finally{h(!1)}},isLoading:p,error:v}}},68290:(e,t,n)=>{n.d(t,{S:()=>d});var i=n(12974),r=n(30345),l=n(11819),a=n(98371),o=n(86944),s=n(69122);let d=e=>{let{selectedImages:t}=e,n=(0,i.useToast)(),{userSelectedTeam:d}=(0,s.s)(),{id:c}=d(),{createCollectionImages:u}=(0,l.A)(),{createCollection:m}=(0,o.W)({teamId:c}),{showCollectionImagesToast:g}=(0,a.A)();return async(e,i)=>{try{let a=await m(i,e),o=null==t?void 0:t.map(e=>({collectionId:String(a.id),generatedImageId:e.id}));try{if(o&&o.length>0){var l;await u(o,!0),g(r.Le.ADD,null!==(l=null==t?void 0:t.length)&&void 0!==l?l:0,a)}}catch(e){n({title:"Error adding images to collection",description:"Please try again",status:"error"});return}}catch(e){n({title:"Error creating collection",description:"Please try again",status:"error"})}}}},68655:(e,t,n)=>{n.d(t,{Dr:()=>a,Ku:()=>s,p3:()=>o,qx:()=>d});var i=n(32926),r=n(35904);let l=[{isViolated:e=>{let{targetCollection:t,selectedCollections:n}=e;return!t&&n.some(e=>{let{depth:t}=e;return 0===t})},errorMessage:i.Y6},{isViolated:e=>{let{targetCollection:t,selectedCollections:n}=e;return!!t&&n.some(e=>{let{akUUID:n}=e;return n===t.akUUID})},errorMessage:i.aZ},{isViolated:e=>{let{targetCollection:t,selectedCollections:n}=e;return!!t&&n.some(e=>{let{akUUID:n}=e;return t.ancestorIds.includes(n)})},errorMessage:i.g6},{isViolated:e=>{let{targetCollection:t,selectedCollections:n}=e;return!!t&&n.some(e=>{let{ancestorIds:n}=e;return(0,r.yz)(n)===t.akUUID})},errorMessage:i.FX},{isViolated:e=>{let{targetCollection:t,selectedCollections:n}=e;return!!t&&n.some(e=>{let{maxDescendantDepth:n}=e;return n+t.depth+1>=i.UU})},errorMessage:i.iT}];function a(e,t){let n=[];if(0===t.length)return{isAllowed:!1,issues:[i.ug]};for(let i of l)i.isViolated({targetCollection:e,selectedCollections:t})&&n.push(i.errorMessage);return n.length>1&&(n=n.filter(e=>e!==i.iT)),{isAllowed:0===n.length,issues:n}}function o(e,t){return t>0?{isAllowed:!1,issues:[i.qU]}:a(null,e)}function s(e,t){if(0===e.collectionImages.length||0===t.length)return"unchecked";let n=new Set(e.collectionImages.map(e=>{let{id:t}=e;return t})),i=!0,r=!1;for(let e of t)n.has(e)?r=!0:i=!1;return i?"checked":r?"indeterminate":"unchecked"}function d(e,t){if(!t)return!1;let n=t.akUUID===e.akUUID,i=t.ancestorIds.includes(e.akUUID);return n||i}},69387:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(95155),r=n(5520),l=n(23375),a=n(16299),o=n(19782),s=n(27104),d=n(77700),c=n(58670),u=n(60078),m=n(5643),g=n(6126),p=n(64982),h=n(40988),v=n(96065),x=n(49174),f=n(85821),C=n(12115),I=n(97401),b=n(72777),y=n(21542),_=n(28634),j=n(83833),S=n(69122),E=n(78373),U=n(69756);let w=e=>{let{isOpen:t,onClose:n,mode:w,selectedImages:T=[],onCollectionChecked:A,currentCollectionId:D,selectedCollections:k,clearSelectedCollections:R,closeOnEmptySelections:M=!0}=e,{isSharedCollectionsEnabled:N}=(0,j.D)(),{userSelectedTeam:P}=(0,S.s)(),L=P(),V=(0,C.useRef)(null),[O,H]=(0,C.useState)(""),[F,G]=(0,C.useState)(0),B=L.id&&1===F?"team":"personal",z=(0,_.Sj)(B);return(0,C.useEffect)(()=>{t&&(0,E.u4)(U.pW)},[t]),0===T.length&&0===k.length&&M&&n(),(0,i.jsxs)(r.Modal,{isOpen:t,onClose:n,closeOnOverlayClick:!0,scrollBehavior:"inside",variant:"collectionModalStyle",size:{base:"full",sm:"xl"},children:[(0,i.jsx)(l.ModalOverlay,{}),(0,i.jsxs)(a.ModalContent,{maxHeight:"80vh",children:[(0,i.jsx)(o.ModalCloseButton,{}),(0,i.jsxs)(s.ModalHeader,{pb:4,children:[(0,i.jsx)(d.Box,{alignItems:"left",children:(0,i.jsxs)(c.Text,{as:"span",children:[L.id?"Teams":"Personal"," Collections"]})}),(0,i.jsx)(u.Stack,{gap:"0.625rem",alignItems:"center",pt:4,sx:{".chakra-portal":{width:"100%"}},direction:{base:"column-reverse",sm:"row-reverse"},ref:V,children:(0,i.jsx)(I.h,{value:O,onChange:H,mb:0})})]}),(0,i.jsx)(m.ModalBody,{maxH:{base:"80vh",sm:"26.75rem"},sx:{"&::-webkit-scrollbar":{width:"0.25rem"},"&::-webkit-scrollbar-track":{width:"0.375rem"},"&::-webkit-scrollbar-thumb":{background:"#4A4A4A",borderRadius:"1.5rem"}},children:(0,i.jsxs)(g.Tabs,{variant:"switch",isFitted:!0,position:"relative",display:"flex",flexDir:"column",flex:1,index:F,onChange:G,children:[L.id&&(0,i.jsx)(p.Portal,{containerRef:V,children:(0,i.jsxs)(h.TabList,{p:0,maxH:"2.0625rem",fontWeight:500,minW:{base:"100%",sm:"17rem"},children:[(0,i.jsx)(v.Tab,{px:2,py:3.5,fontSize:"sm",wordBreak:"unset",children:"Your Collections"}),(0,i.jsx)(v.Tab,{px:2,py:3.5,wordBreak:"unset",fontSize:"sm",children:N?"Shared with You":"Team Collections"})]})}),(0,i.jsx)("div",{className:L.id?"pt-2":"",children:(0,i.jsx)(b.u,{externalSearchQuery:O,mode:w,onCollectionChecked:A,searchMode:y.tu.EXTERNAL,selectedImages:T,currentCollectionId:D,selectedCollections:k,clearSelectedCollections:R,...z})})]})}),(0,i.jsx)(x.ModalFooter,{children:(0,i.jsx)(f.Button,{size:{base:"sm",md:"md"},variant:"outline",w:"full",p:0,onClick:n,borderRadius:"lg",background:"background.darkblue",borderColor:"border.greyBlue",children:"Done"})})]})]})}},72681:(e,t,n)=>{n.d(t,{Ce:()=>v,LO:()=>u,Nc:()=>g,QR:()=>h,bQ:()=>m,h0:()=>f,r7:()=>C,xU:()=>x,z$:()=>p});var i=n(79737),r=n(48831),l=n(17403),a=n(958),o=n(52592),s=n(35936);let d=e=>e===o.bd.StyleTransfer,c=(e,t,n)=>{if(!d(e))return null;let i=l.f,r=t.find(e=>d(e.controlnetType)),a=null==n?void 0:n.find(e=>e.akUUID===(null==r?void 0:r.akUUID));return{influence:i,...a&&{guidanceStrength:a.guidanceStrength,guidanceStrengthType:a.guidanceStrengthType}}};function u(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.akUUID===t.akUUID||e.id===t.id?{...e,guidanceStrength:n}:e):null}function m(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.akUUID===t.akUUID||e.id===t.id?{...e,guidanceStrengthType:n}:e):null}let g=(e,t,n)=>(null==e?void 0:e.length)?e.map(e=>e.id===t.id?{...e,influence:n}:e):null;function p(e,t,n,i){if(!t)return e;let r=e||[],l=null==i?void 0:i.find(e=>e.akUUID===t.akUUID);if(n)return r.map(e=>{var i,r;let o=e.akUUID===t.akUUID,s=o?e.guidanceStrength:null!==(i=null==l?void 0:l.weightDefault)&&void 0!==i?i:null,d=o?e.guidanceStrengthType:null!==(r=a.msQ.Mid)&&void 0!==r?r:null;if(e.id===n){let{id:e,akUUID:n,imageInput:i}=t;return{id:e,akUUID:n,controlnetType:null==l?void 0:l.controlnetType,imageInput:i,guidanceStrength:s,guidanceStrengthType:d,isDisabled:!1}}return e});if(t){var o;let{id:n,akUUID:s,imageInput:d,guidanceStrengthType:u}=t,m={id:n,akUUID:s,controlnetType:null==l?void 0:l.controlnetType,imageInput:d,guidanceStrength:null!==(o=null==l?void 0:l.weightDefault)&&void 0!==o?o:null,guidanceStrengthType:u||a.msQ.Mid,isDisabled:!1,...c(null==l?void 0:l.controlnetType,i,e)};return r.concat(m)}return e}function h(e,t){return t?{...t,imageInput:e}:{id:e.initImageId,akUUID:null,guidanceStrength:null,imageInput:e,isDisabled:!1}}function v(e,t){return(null==e?void 0:e.length)?null==e?void 0:e.filter(e=>e.id!==t.id):null}function x(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.map(e=>e.id===t.id?{...e,isDisabled:!e.isDisabled}:e))&&void 0!==n?n:null}function f(e,t,n,i){return(null==t?void 0:t.length)?(null!=e?e:[]).map(l=>{var a,o,d;let c=null!==(a=t.find(e=>e.akUUID===l.akUUID))&&void 0!==a?a:null,u=(0,r.nD)(null==c?void 0:c.controlnetType,n),m=null!==(o=null==e?void 0:e.filter(e=>e.akUUID===l.akUUID))&&void 0!==o?o:[],g=Math.max(null==m?void 0:m.findIndex(e=>e.id===l.id),0)>=u,p=(0,s.Kw)(c,n,e,i);return{id:l.id,akUUID:l.akUUID,isDisabled:l.isDisabled,guidanceStrength:l.guidanceStrength,guidanceStrengthType:l.guidanceStrengthType,imageInput:l.imageInput,influence:l.influence,limit:u,guidanceType:g?{...c,isIncompatible:!0,disabledReason:(0,r.E9)(u)}:{...c,isIncompatible:!p.value,disabledReason:null!==(d=p.reason)&&void 0!==d?d:""}}}):[]}function C(){return{id:(0,i.A)(),akUUID:null,guidanceStrength:null,isDisabled:!1}}},72777:(e,t,n)=>{n.d(t,{u:()=>em});var i=n(95155),r=n(77700),l=n(84492),a=n(12115),o=n(97401),s=n(59108),d=n(42066),c=n(33636),u=n(57599),m=n(58727),g=n(58670),p=n(92998),h=n(80436),v=n(32926),x=n(12594),f=n(3740);let C=e=>{let t=(0,a.useId)();return(0,i.jsxs)(f.Icon,{viewBox:"0 0 16 14",fill:"none",...e,children:[(0,i.jsx)("path",{d:"M12.75 13.9271H3.25C1.33575 13.9271 0.28125 12.8726 0.28125 10.9583V3.04167C0.28125 1.12742 1.33575 0.072916 3.25 0.072916H6.41667C6.57421 0.072916 6.72544 0.135459 6.83627 0.247084L9.03713 2.44792H12.75C14.6643 2.44792 15.7188 3.50242 15.7188 5.41667V10.9583C15.7188 12.8726 14.6643 13.9271 12.75 13.9271ZM3.25 1.26042C2.00154 1.26042 1.46875 1.79321 1.46875 3.04167V10.9583C1.46875 12.2068 2.00154 12.7396 3.25 12.7396H12.75C13.9985 12.7396 14.5313 12.2068 14.5313 10.9583V5.41667C14.5313 4.16821 13.9985 3.63542 12.75 3.63542H8.79167C8.63413 3.63542 8.48289 3.57287 8.37206 3.46125L6.1712 1.26042H3.25Z",fill:"url(#paint0_linear_4985_24_".concat(t,")")}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"paint0_linear_4985_24_".concat(t),x1:"0.866004",y1:"2.98958",x2:"13.2384",y2:"0.863967",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#D951A5"}),(0,i.jsx)("stop",{offset:"0.499028",stopColor:"#B14BF4"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#6E7BFC"})]})})]})};var I=n(8142),b=n(90339),y=n(77062),_=n(78373),j=n(69756),S=n(48392);let E=()=>(0,i.jsxs)(s.Flex,{position:"relative",alignItems:"center",justifyContent:"center",borderWidth:"0.0625rem",borderStyle:"dashed",borderColor:"border.greyBlue",_groupHover:{borderColor:"accent.3"},transition:"border-color 0.2s ease",borderRadius:4,w:"34px",h:"34px",flexShrink:0,children:[(0,i.jsx)(x.A,{width:4,height:4,color:"secondary.inactive",display:"block",_groupHover:{display:"none"}}),(0,i.jsx)(C,{width:4,height:4,display:"none",_groupHover:{display:"block"}})]});function U(e){let{collectionId:t,onCreateCollection:n,hasMaximumCollections:o,isDisabled:s=!1}=e,[x,f]=(0,a.useState)(),[C,U]=(0,a.useState)("New Collection"),[w,T]=(0,a.useState)(!1),{open:A}=(0,y.A)(S.A.UPGRADE),D=(0,a.useRef)(null),k=(0,a.useRef)(null);async function R(e){U(e);try{T(!0),await n(e,t)}finally{f(!1),T(!1)}}(0,a.useEffect)(()=>{if(x){var e;null===(e=D.current)||void 0===e||e.select()}},[x]);let M=async e=>{e.preventDefault(),""!==C.trim()&&await R(C)};return(0,i.jsxs)(r.Box,{ref:k,flex:1,width:"100%",_hover:{background:"surface.active",...s&&{opacity:"0.5"}},children:[x&&(0,i.jsx)("form",{onSubmit:M,style:{display:"contents"},children:(0,i.jsxs)(d.InputGroup,{pr:o?2:void 0,display:"flex",gap:2,px:4,py:1.5,alignItems:"center",children:[(0,i.jsx)(r.Box,{boxSize:2,display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(I.A,{boxSize:4})}),(0,i.jsx)(E,{}),(0,i.jsx)(c.Input,{ref:D,autoFocus:!0,type:"text",maxLength:24,value:C,focusBorderColor:"borderNew.selected",onBlur:e=>R(e.currentTarget.value),onChange:e=>U(e.target.value)}),w&&(0,i.jsx)(r.Box,{px:3,py:1.5,children:(0,i.jsx)(l.Spinner,{size:"xs"})})]})}),!x&&(0,i.jsx)(u.Tooltip,{isDisabled:!s,w:"100%",label:v.iT,"aria-label":v.iT,hasArrow:!0,placement:"top",children:(0,i.jsxs)(m.HStack,{pr:o?2:void 0,onClick:()=>{if(!s){if(o){A();return}f(!0),U("New Collection"),(0,_.u4)(j.pE)}},_hover:{...s&&{cursor:"not-allowed",opacity:"0.5"}},role:"button","data-group":!0,title:"Create a new collection",justify:"start",spacing:2,px:4,py:1.5,children:[(0,i.jsx)(r.Box,{boxSize:2,display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(I.A,{boxSize:4})}),(0,i.jsx)(E,{}),(0,i.jsx)(g.Text,{fontWeight:500,fontSize:"sm",children:"New"}),(0,i.jsx)(p.Spacer,{}),o&&(0,i.jsxs)(h.Badge,{rounded:"base",variant:"solid",textTransform:"capitalize",ml:1,opacity:0,_groupHover:{opacity:1},children:[(0,i.jsx)(b.A,{}),"Premium"]})]})})]})}var w=n(43340),T=n(84558),A=n(11721),D=n(21542),k=n(35904),R=n(74559);let M=e=>(0,i.jsx)(g.Text,{color:"lightbluegrey",fontSize:"sm",fontStyle:"italic",...e,children:"Current"});var N=n(85821),P=n(70711);let L=e=>(0,i.jsxs)(N.Button,{size:"xs",height:"1.625rem",px:2,py:1.5,gap:1,fontSize:"xs",fontWeight:"medium",borderWidth:"px",borderStyle:"solid",borderColor:"borderNew.primary",bg:"surface.primary",rounded:"md",minWidth:"unset","aria-label":"Move collection",...e,children:[(0,i.jsx)(g.Text,{as:"span",display:{base:"none",md:"inline"},children:"Move"}),(0,i.jsx)(P.A,{boxSize:3})]});var V=n(98021);function O(e){let{imageUrl:t}=e;return(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)(V._,{style:{borderRadius:4,width:32,height:32,objectFit:"cover"},src:t,width:34,height:34,alt:"Thumb"}):(0,i.jsx)(r.Box,{flex:0,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",borderWidth:"0.0625rem",background:"surface.primary",borderColor:"border.greyBlue",borderRadius:4,aspectRatio:1,style:{width:34,height:34},children:(0,i.jsx)(x.A,{color:"secondary.inactive"})})})}var H=n(22393),F=n(59133);let G={maxDepth:e=>(0,i.jsx)(f.Icon,{width:4,height:4,viewBox:"0 0 16 16",fill:"currentColor",color:"currentColor",...e,children:(0,i.jsx)("path",{d:"M12.1383 9.07431L9.07434 12.1383C8.48079 12.7318 7.51876 12.7318 6.92568 12.1383L3.86169 9.07431C3.26815 8.48076 3.26815 7.51873 3.86169 6.92565L6.92568 3.86166C7.51922 3.26812 8.48125 3.26812 9.07434 3.86166L12.1383 6.92565C12.7319 7.51873 12.7319 8.48122 12.1383 9.07431Z"})}),collapsed:H.A,expanded:F.A},B=e=>{let t,{isExpanded:n,nestingLevel:r}=e,l=(t=r>=v.UU-1?G.maxDepth:n?G.expanded:G.collapsed)===G.maxDepth?2.5:2;return(0,i.jsx)(t,{boxSize:l,color:"content.secondary"})},z=e=>{let{level:t,isExpanded:n,thumbnailUrl:r,name:l,hideRootItem:a}=e;return(0,i.jsxs)(m.HStack,{alignItems:"center",spacing:2,width:"100%",children:[(0,i.jsx)(B,{nestingLevel:t,isExpanded:n}),(0,i.jsx)(O,{imageUrl:r}),(0,i.jsx)(g.Text,{fontWeight:500,fontSize:"sm",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",textAlign:"left",children:l})]})},W=(0,a.forwardRef)((e,t)=>{let{collection:n,level:r,isExpanded:l,hideRootItem:o,onMove:s}=e,[d,c]=(0,a.useState)(!1),g=(0,a.useRef)(null);if(!(0,k.NM)(n)||!s)throw Error("Collection is not movable");async function p(){c(!0),await (null==s?void 0:s(n.id)),(0,_.u4)(j.m_),c(!1)}(0,a.useImperativeHandle)(t,()=>({scrollIntoView(){if(n.moveValidation.isAllowed){var e;null===(e=g.current)||void 0===e||e.scrollIntoView()}}}),[n.moveValidation.isAllowed]);let h=!n.moveValidation.isAllowed&&!n.isCurrent;return(0,i.jsx)(u.Tooltip,{isDisabled:!h,w:"100%",label:n.moveValidation.issues.join(". "),"aria-label":"Issue Rationale",hasArrow:!0,placement:"top",children:(0,i.jsxs)(m.HStack,{ref:g,role:"group",pr:2,gap:0,justifyContent:"space-between",_hover:{background:"surface.active",...h&&{opacity:"0.5"}},children:[(0,i.jsx)(R.AccordionButton,{py:1.5,px:4,_hover:{...h&&{cursor:"not-allowed"}},_disabled:{opacity:1},minWidth:"0",children:(0,i.jsx)(z,{level:r,isExpanded:l,thumbnailUrl:n.thumbnailUrl,name:n.name,hideRootItem:o})}),!n.moveValidation.isAllowed&&n.isCurrent&&(0,i.jsx)(M,{}),n.moveValidation.isAllowed&&(0,i.jsx)(L,{isLoading:d,onClick:p,opacity:{base:1,md:0},_groupHover:{opacity:1},transition:"opacity 0.2s"})]})})});W.displayName="MovableBranch";var Y=n(19022);let K=e=>{let{collection:t,level:n,isExpanded:r,hideRootItem:o,onChecked:s}=e,[d,c]=(0,a.useState)(!1);if(!(0,k.LN)(t)||!s)throw Error("Collection is not selectable");async function u(e){c(!0),await (null==s?void 0:s(t.id,e)),(0,_.u4)(j.kn),c(!1)}return(0,i.jsxs)(m.HStack,{gap:0,role:"group",backgroundColor:["indeterminate","checked"].includes(t.selection)?"surface.active":void 0,pr:2,_hover:{background:"surface.active"},children:[(0,i.jsx)(R.AccordionButton,{py:1.5,minWidth:"0",children:(0,i.jsx)(z,{level:n,isExpanded:r,thumbnailUrl:t.thumbnailUrl,name:t.name,hideRootItem:o})}),d?(0,i.jsx)(l.Spinner,{size:"md"}):(0,i.jsx)(Y.S,{checked:"indeterminate"===t.selection?"indeterminate":"checked"===t.selection,onCheckedChange:u})]})},q=e=>{let{collection:t,level:n=0,mode:r=D.v1.MOVE,onCollectionChecked:l,onCollectionMoved:o,hideRootItem:s=!1,handleCreateCollection:d,hasMaximumCollections:c}=e,u=(0,a.useRef)(null),m=r===D.v1.MOVE&&(0,k.NM)(t)&&!t.moveValidation.isAllowed&&!t.isCurrent;return(0,i.jsx)(w.Accordion,{allowMultiple:!0,defaultIndex:t.isExpanded?[0]:void 0,display:"flex",flexDirection:"column",gap:1,children:(0,i.jsx)(T.AccordionItem,{border:"none",display:"flex",flexDirection:"column",gap:.5,isDisabled:m,children:e=>{let{isExpanded:a}=e;return(0,i.jsxs)(i.Fragment,{children:[r===D.v1.MOVE&&(0,i.jsx)(W,{collection:t,level:n,isExpanded:a,hideRootItem:s,onMove:o,ref:u}),r!==D.v1.MOVE&&(0,i.jsx)(K,{collection:t,level:n,isExpanded:a,hideRootItem:s,onChecked:l}),(0,i.jsxs)(A.AccordionPanel,{p:0,ml:5,display:"flex",flexDirection:"column",gap:.5,borderLeft:"solid 0.0625rem",borderColor:"border.greyBlue",children:[t.children.map(e=>(0,i.jsx)(q,{collection:e,level:n+1,mode:r,onCollectionChecked:l,onCollectionMoved:o,handleCreateCollection:d,hasMaximumCollections:c,hideRootItem:s},e.id)),a&&(0,i.jsx)(U,{collectionId:t.id,hasMaximumCollections:c,onCreateCollection:async(e,t)=>{var n;await d(e,t),null===(n=u.current)||void 0===n||n.scrollIntoView()},isDisabled:!t.canCreate||c})]})]})}})})};var Z=n(35695),J=n(60161);let X=e=>{let{onClick:t,rootMoveValidation:n}=e,[r,l]=(0,a.useState)(!1),o=(0,Z.useParams)(),d=!(Array.isArray(null==o?void 0:o.id)?null==o?void 0:o.id[0]:null==o?void 0:o.id)&&!n.isAllowed,c=n.issues.join(". ");async function h(){l(!0),await t(),l(!1)}return(0,i.jsx)(u.Tooltip,{isDisabled:!c,w:"100%",label:c,"aria-label":"Issue Rationale",hasArrow:!0,placement:"top",children:(0,i.jsxs)(m.HStack,{w:"100%",justifyContent:"space-between",_hover:{background:"button.hover"},role:"group",rounded:"none",py:1.5,pl:1,pr:2,alignItems:"center",cursor:c?"not-allowed":"auto",children:[(0,i.jsxs)(m.HStack,{gap:0,opacity:n.isAllowed?1:.4,children:[(0,i.jsx)(s.Flex,{alignItems:"center",justifyContent:"center",w:"34px",h:"34px",bg:"background.darkblue",borderColor:"border.darkBlue",borderWidth:"px",borderRadius:4,children:(0,i.jsx)(J.A,{w:4,color:"content.tertiary"})}),(0,i.jsx)(g.Text,{align:"left",fontWeight:500,fontSize:"sm",color:"content.secondary",pl:2,noOfLines:1,children:"Collection Home"}),(0,i.jsx)(p.Spacer,{})]}),n.isAllowed&&(0,i.jsx)(L,{isLoading:r,onClick:h,opacity:{base:1,md:0},_groupHover:{opacity:1},transition:"opacity 0.2s"}),d&&(0,i.jsx)(M,{})]})})};var Q=n(38973);let $=e=>{let{rootMoveValidation:t,handleCollectionMoved:n,hideRootItem:l,collections:o,mode:d,handleCheckboxChange:c,onInfiniteScroll:u,handleCreateCollection:m,hasMaximumCollections:g,canCreateCollectionAtRoot:p}=e,h=(0,a.useRef)(null);return(0,Q.B)({target:h,onIntersectEnter:()=>{o.length>0&&u(o.length)}}),(0,i.jsxs)(s.Flex,{gap:.5,flexDirection:"column",children:[l?null:(0,i.jsx)(X,{rootMoveValidation:t,onClick:()=>n(null)}),o.map(e=>(0,i.jsx)(q,{collection:e,mode:d,onCollectionChecked:c,onCollectionMoved:n,handleCreateCollection:m,hasMaximumCollections:g,hideRootItem:l},e.id)),(0,i.jsx)(r.Box,{ref:h,children:(0,i.jsx)(U,{onCreateCollection:m,hasMaximumCollections:g,isDisabled:!p})})]})};var ee=n(68290),et=n(68655),en=n(19710),ei=n(81434),er=n(11819),el=n(98371),ea=n(69507),eo=n(958),es=n(32331),ed=n(64478);let ec=()=>{let e=(0,es.N)(),t=(0,ed.w)(),{data:n}=(0,ea.I)(eo.NO$,{variables:{where:{userId:{_eq:t}}}});return!!((null==n?void 0:n.collection)&&n.collection.length>=e)};var eu=n(83833);let em=e=>{let{selectedImages:t,mode:n=D.v1.SELECT,searchMode:s=D.tu.INTERNAL,externalSearchQuery:d="",onCollectionChecked:c,onCollectionMoved:u,currentCollectionId:m,hideRootItem:g=!1,collections:p,onLoadMore:h,loadingState:x,selectedCollections:f=[],clearSelectedCollections:C=()=>{}}=e,{isSharedCollectionsEnabled:I}=(0,eu.D)(),{handleMoveCollection:b}=(0,er.A)(),{showCollectionImagesToast:y}=(0,el.A)(),{setIsSelectingImages:_,toggleImageSelection:j}=(0,ei.V)(),S=(0,ee.S)({selectedImages:t}),E=ec(),[U,w]=(0,a.useState)(""),T=(0,a.useDeferredValue)(d||U),A=(0,a.useMemo)(()=>I?(0,en.Tc)(p):(0,en.vE)(p),[p]),R=(0,a.useMemo)(()=>I?(0,en.EZ)(p):(0,en._f)(p),[p]),M=(0,a.useMemo)(()=>(0,en.rD)(R),[R]),N=(0,a.useMemo)(()=>(0,k.Fl)(M,m),[M,m]),P=(0,a.useMemo)(()=>(0,k.MK)(M,f.map(e=>e.id)),[M,f]),L=(0,a.useMemo)(()=>{var e;return(0,et.p3)(P,null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)},[P,t]),V=(0,a.useMemo)(()=>(0,k.mk)(n,R,P,t,N),[n,R,P,t,N]),O=!E&&(0,k.oD)(n,P),H=async(e,i)=>{let r=A.get(e);if(!r)return;let l=n===D.v1.SELECT_FOR_GENERATING?!i:i;if(m&&!i){let e=A.get(m);for(let n of null!=t?t:[])(null==e?void 0:e.collection_images.find(e=>n.id===e.id))||j(n,!1)}await (null==c?void 0:c(r,l))},F=async e=>{let n=e?A.get(e):v.bR;n&&(u?u(n):await b(n,t,f,(e,t,n,i)=>y(e,t,n,i)),C(),_(!1))};async function G(e,t){let n=t?A.get(t):v.bR;n&&await S(e,n.id)}let B=(0,k.jY)(V,T.toLowerCase());return(0,i.jsxs)(i.Fragment,{children:[s===D.tu.INTERNAL&&(0,i.jsx)(r.Box,{position:"sticky",top:0,zIndex:1,pb:1,children:(0,i.jsx)(o.h,{value:U,onChange:w})}),"loading"!==x&&(0,i.jsx)($,{rootMoveValidation:L,collections:B,mode:n,handleCollectionMoved:F,handleCheckboxChange:H,onInfiniteScroll:h,handleCreateCollection:G,hasMaximumCollections:E,hideRootItem:g||n!==D.v1.MOVE,canCreateCollectionAtRoot:O}),["loading","fetchingMore"].includes(x)&&(0,i.jsx)(r.Box,{mt:2,pl:3,children:(0,i.jsx)(l.Spinner,{size:"sm"})})]})}},78203:(e,t,n)=>{n.d(t,{M2:()=>m,Nt:()=>a,Rl:()=>s,Zk:()=>d,it:()=>c,jR:()=>u,z6:()=>o});var i=n(33383),r=n(35936),l=n(43298);function a(e){let{aspectRatio:t,imageSize:n,modelVersion:a,resolutions:o}=e;if(!t||!n)return[0,0];let s=(0,r.L7)(a),d=(0,r.vT)(a),c=null==o?void 0:o[n];c||(c=d?i.tG[n]:s?i.hO[n]:i.PD[n]);let u=i.qX.get(t),m=0,g=0;if(!u||!c)return[m,g];let p=i.$R;return s?p=i.hi:d&&(p=i.ly),u.long>=u.short?(g=(0,l.M)(Math.sqrt(c.inputPixelCount*u.short/u.long),p),m=(0,l.M)(u.long/u.short*g,p)):(m=(0,l.M)(Math.sqrt(c.inputPixelCount*u.long/u.short),p),g=(0,l.M)(u.short/u.long*m,p)),[m,g]}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.PD,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.$R,l=(e+r)*(t+r);return l<=n.Medium.inputPixelCount?"Low":l<=n.High.inputPixelCount?"Medium":"High"}function s(e,t,n){let i=n/Math.max(e,t);return[e*i/16+"rem",t*i/16+"rem"]}let d=e=>(0,r.vT)(e)?i.tG:(0,r.L7)(e)?i.hO:i.PD,c=e=>{let{isUltra:t=!1,isAlchemy:n=!1,modelVersion:r}=e,l=d(r).High,o=(()=>{if(t){var e;return null!==(e=l.ultraMultiplier)&&void 0!==e?e:1}return n?l.upscaleMultiplier:1})(),s=i.TQ*o,c=i.$t*o,u=(l.step||i.$R)*o,m=a({aspectRatio:"1:1",imageSize:"High",modelVersion:r})[0]**2*o**2;return{min:s,max:c,step:u,multiplier:o,maxPixels:m}},u={none:"none",step:"step",max:"max",min:"min"},m=e=>{let{dimensionX:t,dimensionY:n,maxPixels:i,min:r,max:l,step:a,aspectRatio:o}=e,s=(e,t)=>e>l?u.max:e<r?u.min:t!==e?u.step:u.none,d=e=>Math.round(Math.min(Math.max(e,r),l)/a)*a,c=d(t),m=s(t,c),g=n;if(o){let e=d(Math.round(c/o)),n=d(Math.round(e*o));m=s(t,n);let[r,l]=((e,t)=>{if(e*t>i){let n=Math.sqrt(i/(e*t));return[d(e*n),d(t*n)]}return[e,t]})(n,e);m=n>r?u.max:m,[c,g]=[r,l]}else{let e=d(Math.round(i/g));m=c>e?u.max:m,c=Math.min(c,e)}return{dimensionX:c,dimensionY:g,dimensionsXAdjustment:m}}},78547:(e,t,n)=>{n.d(t,{U:()=>l});var i=n(958),r=n(90824);let l=e=>{let{teamId:t,userId:n}=e;return t?[{query:i.NO$,variables:(0,r.$6)(t,n)},{query:i.NO$,variables:(0,r.rW)(t)}]:[{query:i.NO$,variables:(0,r.Uk)(n)}]}},79849:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(95155),r=n(3740),l=n(12115),a=n(27593);let o=e=>{let t=(0,l.useId)(),n="arrow-export-gradient-".concat(t);return(0,i.jsxs)(r.Icon,{width:"calc(".concat(a.fb," * 1.125)"),height:"calc(".concat(a.fb," * 1.187)"),viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{d:"M17.75 1.44659V6.44659C17.75 6.86059 17.414 7.19659 17 7.19659C16.586 7.19659 16.25 6.86059 16.25 6.44659V3.25763L8.53003 10.9776C8.38403 11.1236 8.192 11.1976 8 11.1976C7.808 11.1976 7.61597 11.1246 7.46997 10.9776C7.17697 10.6846 7.17697 10.2096 7.46997 9.91656L15.1899 2.19659H12C11.586 2.19659 11.25 1.86059 11.25 1.44659C11.25 1.03259 11.586 0.696594 12 0.696594H17C17.098 0.696594 17.1951 0.7167 17.2871 0.7547C17.4701 0.8307 17.6161 0.976706 17.6931 1.16071C17.7301 1.25171 17.75 1.34859 17.75 1.44659ZM17 9.69659C16.586 9.69659 16.25 10.0326 16.25 10.4466V14.4466C16.25 16.0236 15.577 16.6966 14 16.6966H4C2.423 16.6966 1.75 16.0236 1.75 14.4466V4.44659C1.75 2.86959 2.423 2.19659 4 2.19659H8C8.414 2.19659 8.75 1.86059 8.75 1.44659C8.75 1.03259 8.414 0.696594 8 0.696594H4C1.582 0.696594 0.25 2.02859 0.25 4.44659V14.4466C0.25 16.8646 1.582 18.1966 4 18.1966H14C16.418 18.1966 17.75 16.8646 17.75 14.4466V10.4466C17.75 10.0326 17.414 9.69659 17 9.69659Z",fill:"url(#".concat(n,")")}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:n,x1:"0.912879",y1:"4.38081",x2:"15.0169",y2:"2.20621",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#DB519E"}),(0,i.jsx)("stop",{offset:"0.499028",stopColor:"#B14BF4"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#666BD1"})]})})]})};o.displayName="ArrowExportIcon";let s=o},81434:(e,t,n)=>{n.d(t,{V:()=>a,c:()=>l});var i=n(12115),r=n(84612);let l=(0,i.createContext)(r.u),a=()=>(0,i.useContext)(l)},81558:(e,t,n)=>{n.d(t,{K:()=>S});var i=n(95155),r=n(5520),l=n(23375),a=n(16299),o=n(27104),s=n(19782),d=n(88095),c=n(5643),u=n(49174),m=n(62105),g=n(12115),p=n(62177);let h={reason:""};var v=n(33992),x=n(52672),f=n(22252);let C=()=>{let{control:e}=(0,p.xW)();return(0,i.jsx)(v.zB,{control:e,name:"reason",render:e=>{var t;let{field:n}=e;return(0,i.jsxs)(v.eI,{children:[(0,i.jsxs)(v.lR,{children:["Reason"," ",(0,i.jsx)("span",{className:"text-negative-foreground","aria-hidden":"true",children:"*"})]}),(0,i.jsx)(v.MJ,{children:(0,i.jsx)(x.T,{...n,size:"sm",placeholder:"I don't like it.",maxLength:500,"aria-label":"Reason"})}),(0,i.jsx)(v.Rr,{children:(0,f.y)((null===(t=n.value)||void 0===t?void 0:t.length)||0,500)})]})}})};var I=n(26420);let b=e=>{let{onClose:t}=e,{formState:n}=(0,p.xW)();return(0,i.jsxs)("div",{className:"flex w-full gap-2",children:[(0,i.jsx)(I.$,{className:"w-full",variant:"secondary",onClick:t,disabled:n.isSubmitting,children:"Cancel"}),(0,i.jsx)(I.$,{className:"w-full",type:"submit",disabled:!n.isDirty||!n.isValid||n.isSubmitting,loading:n.isSubmitting,children:"Report"})]})};var y=n(958),_=n(91073);let j=e=>{let{onClose:t,generationId:n,modelId:r,userId:l}=e,a=(0,p.mN)({defaultValues:h,mode:"onBlur"}),o=(0,_.A)(),[s]=(0,d.n)(y.ihR),x=(0,g.useCallback)(async e=>{let{reason:i}=e,a={reportReason:i,reportedGenerationId:n,reportedCustomModelId:r,reportedUserId:l};try{await s({variables:{objects:a}}),t()}catch(e){o({title:"Error",description:"There was an error submitting your report. Please try again later.",type:_.k.error,position:"bottom"}),m.wd("Image reporting has failed",{user:{id:l},extra:{...a,errorResponse:e}})}},[n,r,l,t,s,o]);return(0,i.jsx)(v.lV,{...a,children:(0,i.jsxs)("form",{onSubmit:a.handleSubmit(x),children:[(0,i.jsx)(c.ModalBody,{children:(0,i.jsx)(C,{})}),(0,i.jsx)(u.ModalFooter,{justifyContent:"space-between",children:(0,i.jsx)(b,{onClose:t})})]})})},S=e=>{let{isOpen:t,onClose:n,...d}=e;return(0,i.jsxs)(r.Modal,{isOpen:t,onClose:n,children:[(0,i.jsx)(l.ModalOverlay,{}),(0,i.jsxs)(a.ModalContent,{children:[(0,i.jsx)(o.ModalHeader,{children:(0,i.jsx)("h2",{className:"text-lg",children:"What is the reason for this report?"})}),(0,i.jsx)(s.ModalCloseButton,{}),(0,i.jsx)(j,{onClose:n,...d})]})]})}},82333:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(3740);let l=e=>(0,i.jsx)(r.Icon,{width:4,height:4,viewBox:"0 0 15 16",...e,children:(0,i.jsx)("path",{d:"M10.7947 4.85392C10.5734 4.74808 10.4361 4.5421 10.4361 4.31729V1.23071H11.1136C11.4875 1.23071 11.791 0.955029 11.791 0.615354C11.791 0.275678 11.4875 0 11.1136 0H3.88731C3.51335 0 3.20985 0.275678 3.20985 0.615354C3.20985 0.955029 3.51335 1.23071 3.88731 1.23071H4.56477V4.31729C4.56477 4.5421 4.42752 4.74806 4.20531 4.85472C1.92001 5.95498 0.5 8.10298 0.5 10.461C0.5 12.2193 1.2714 13.8528 2.66878 15.0613L2.80341 15.1803C3.39597 15.7038 3.80327 16 5.29549 16H9.7044C11.1957 16 11.604 15.7038 12.1966 15.1803L12.3303 15.0621C13.7295 13.8536 14.5 12.2193 14.5 10.4618C14.5009 8.10214 13.0818 5.95418 10.7947 4.85392ZM4.83933 5.94181C5.50595 5.62101 5.9197 4.9991 5.9197 4.31729V1.23071H9.08119V4.31729C9.08119 4.9991 9.49484 5.62183 10.1606 5.94181C11.7485 6.70649 12.8144 8.10137 13.0773 9.69062C12.3564 10.0163 10.3756 10.6679 7.80212 9.50033C5.35242 8.38694 3.30377 8.65185 2.08163 9.02599C2.49985 7.71816 3.47718 6.59737 4.83933 5.94181ZM11.3963 14.1704L11.2517 14.2976C10.8416 14.6594 10.7179 14.7685 9.7044 14.7685H5.29549C4.28201 14.7685 4.15825 14.6594 3.74816 14.2976L3.60283 14.1704C2.47553 13.1956 1.85404 11.8796 1.85404 10.461C1.85404 10.4545 1.85581 10.4479 1.85581 10.4422C2.51069 10.1304 4.53491 9.3935 7.19688 10.6012C8.51116 11.1985 9.70987 11.3989 10.7279 11.3989C11.7143 11.3989 12.5254 11.21 13.1117 11.0115C12.9735 12.2167 12.3773 13.3228 11.3963 14.1704Z",fill:"currentColor"})})},84434:(e,t,n)=>{n.d(t,{Q:()=>r});var i=n(95155);let r=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:(0,i.jsx)("path",{d:"M19 13.0039H5C4.448 13.0039 4 12.5559 4 12.0039C4 11.4519 4.448 11.0039 5 11.0039H19C19.552 11.0039 20 11.4519 20 12.0039C20 12.5559 19.552 13.0039 19 13.0039Z",fill:"currentColor"})})},84612:(e,t,n)=>{n.d(t,{J:()=>l,u:()=>r});let i=()=>{throw Error("Attempted to call a function in SelectImagesContext before it was instantiated. Ensure you are using the context within the provider.")},r={isSelectingImages:!1,setIsSelectingImages:i,selectedImages:[],selectedImageIds:[],setSelectedImages:i,toggleImageSelection:i,clearSelectedImages:i,isDragSelectingImages:!1,toggleImageDragSelect:i},l=50},86944:(e,t,n)=>{n.d(t,{W:()=>c});var i=n(88095),r=n(78547),l=n(20690),a=n(958),o=n(91073),s=n(64478),d=n(34853);let c=e=>{let{teamId:t}=e,{handleGenError:n}=(0,l.B)(),c=(0,o.A)(),u=(0,s.w)(),[m,{loading:g}]=(0,i.n)(a.I92,{onError:e=>{!((0,d.V)(e)&&(0,d.o)({error:e,onError:n}))&&c({title:"Error",description:"Failed to create collection",type:o.k.error})},update(e,t){let{data:n}=t;e.modify({fields:{collection:e=>e?[...e,n]:e}})}});return{createCollection:async function(e){var n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"New Collection",l={collectionName:i};return t&&(l.teamId=t),e&&(l.parentCollectionId=Number(e)),null===(n=(await m({variables:{arg1:l},refetchQueries:[...(0,r.U)({teamId:t,userId:u}),"GetCollectionDescendants"]})).data)||void 0===n?void 0:n.createCollection},isCreatingCollection:g}}},89239:(e,t,n)=>{n.d(t,{p:()=>l});var i=n(958),r=n(25634);let l=async e=>{if(!e)return"";try{var t;let{data:n}=await r.K$.mutate({mutation:i.sVv,variables:{arg1:e}});return null==n?void 0:null===(t=n.describeImage)||void 0===t?void 0:t.description}catch(e){throw e}}},91887:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(3740);let l=e=>(0,i.jsxs)(r.Icon,{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{d:"M1.875 18.125L18.125 1.875",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M1.875 10.625L10.625 1.875",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M1.875 3.125L3.125 1.875",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M9.375 18.125L18.125 9.375",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M16.875 18.125L18.125 16.875",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})},92167:(e,t,n)=>{n.d(t,{u:()=>o,v:()=>a});var i=n(95155),r=n(12115);let l=(0,r.createContext)({styles:[]}),a=()=>(0,r.useContext)(l),o=e=>{let{styles:t,children:n}=e,a=(0,r.useMemo)(()=>({styles:t}),[t]);return(0,i.jsx)(l.Provider,{value:a,children:n})}},96576:(e,t,n)=>{n.d(t,{z:()=>b,g:()=>I});var i=n(95155),r=n(52017),l=n(55028),a=n(12115),o=n(65751),s=n(81558),d=n(75264);let c=e=>{var t,n;if(!e)return{selectOptions:[]};let i=(0,d.fU)(e.completedNoBGS||[]),r=(0,d.Am)(e.completedAlchemyRefinerUpscales||[]),l=(0,d.Tn)(e.completedUniversalUpscales||[]),a=(0,d.yG)(e.completedUltraUpscales||[]),o=(0,d.nI)(e.completedDefaultUpscales||[]),s=(0,d.EQ)(e.completedAlternateUpscales||[]),c=(0,d.yh)(e.completedHdUpscales||[],!!(null===(t=e.generation)||void 0===t?void 0:t.alchemy)),u=(0,d._i)(e.completedUnzooms||[]),m=(0,d.ob)(e.completedSmoothUpscales||[],!!(null===(n=e.generation)||void 0===n?void 0:n.alchemy)),g=!!(null==r?void 0:r.length),p=!!l.length,h=!!a.length,v=!!(null==o?void 0:o.length),x=!!(null==s?void 0:s.length),f=!!(null==c?void 0:c.length),C=!!(null==u?void 0:u.length),I=!!(null==i?void 0:i.length),b=!!(null==m?void 0:m.length),y=(0,d.KV)({originalImg:e,hasDefaultUpscaledOptions:v,defaultUpscaledOptions:o,hasAlternateUpscaledOptions:x,alternateUpscaledOptions:s,hasHdUpscaledOptions:f,hdUpscaledOptions:c,hasUnzoomedOptions:C,unzoomedOptions:u,hasNoBgOptions:I,noBgOptions:i,hasSmoothUpscaledOptions:b,smoothUpscaledOptions:m,alchemyRefinerOptions:r,hasAlchemyRefinerOptions:g,universalUpscalerOptions:l,hasUniversalUpscalerOptions:p,ultraUpscalerOptions:a,hasUltraUpscalerOptions:h}),_=(0,d.Ws)(e.generated_image_variation_generics);return{defaultSelect:y.find(e=>e.variationId===(null==_?void 0:_.id)),selectOptions:y,detailedSelectOptions:(0,d.TA)(e)}};var u=n(85756);let m=(e,t)=>{if(!e||!t)return{id:"",transformType:null,upscale_details:[],url:null};let{id:n,originalUrl:i}=e,r="string"==typeof t?t:t.value;return r===u.AK.ORIGINAL?{id:n,transformType:null,upscale_details:[],url:i}:r.startsWith(u.AK.ALCHEMY_REFINER)?e.completedAlchemyRefinerUpscales[parseInt(r.split("-")[1])]:r.startsWith(u.AK.UNIVERSAL_UPSCALE)?e.completedUniversalUpscales[parseInt(r.split("-")[1])]:r.startsWith(u.AK.NO_BG)?e.completedNoBGS[parseInt(r.split("-")[1])]:r.startsWith(u.AK.DEFAULT_UPSCALED)?e.completedDefaultUpscales[parseInt(r.split("-")[1])]:r.startsWith(u.AK.ALTERNATE_UPSCALED)?e.completedAlternateUpscales[parseInt(r.split("-")[1])]:r.startsWith(u.AK.HD_UPSCALED)?e.completedHdUpscales[parseInt(r.split("-")[1])]:r.startsWith(u.AK.SMOOTH_UPSCALED)?e.completedSmoothUpscales[parseInt(r.split("-")[1])]:r.startsWith(u.AK.UNZOOMED)?e.completedUnzooms[parseInt(r.split("-")[1])]:r.startsWith(u.AK.ULTRA_UPSCALE)?e.completedUltraUpscales[parseInt(r.split("-")[1])]:void 0};var g=n(56697),p=n(46200),h=n(88095),v=n(958);let x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...n}=e,[i,r]=(0,h.n)(v.z1G,{...n,update(e,n,i){var r,l;let a=null===(l=n.data)||void 0===l?void 0:null===(r=l.delete_generated_image_variation_generic_by_pk)||void 0===r?void 0:r.id,o=e.identify({id:a,__typename:"generated_image_variation_generic"});e.evict({id:o}),e.gc(),null==t||t(e,n,i)}});return[(0,a.useCallback)((e,t)=>i({variables:{id:e},...t}),[i]),r]},f=(0,l.default)(()=>Promise.all([n.e(5263),n.e(6112),n.e(2625),n.e(4588)]).then(n.bind(n,52625)).then(e=>e.AlchemyRefinerModal),{loadableGenerated:{webpack:()=>[52625]}}),C=(0,a.createContext)({image:null,loading:!1,loadingSelectedVariation:!1,deleting:!1,selectedImageVariation:void 0,selectOptions:[],detailedSelectOptions:{},selectedVariation:void 0,selectedVariationId:void 0,zoomedOpen:!1,setZoomedOpen:()=>null,setLoadingSelectedVariation:()=>null,setSelectedVariationId:()=>null,openConfirmationModal:()=>null,onClose:()=>null,onDelete:()=>null,contextExists:!1}),I=()=>(0,a.useContext)(C),b=e=>{let{imageId:t,selectedVariationValue:n,loadingVariationOnStart:l,onClose:d,onDelete:h,children:v,fallbackImage:I}=e,[b,y]=(0,a.useState)(n),[_,j]=(0,a.useState)(!!l),[S,E]=(0,a.useState)(!1),{image:U,loading:w}=(0,g.Zw)(e.imageOverride?"":t,void 0,e.imageOverride?void 0:I),T=e.imageOverride||U,{defaultSelect:A,selectOptions:D,detailedSelectOptions:k}=c(T),R=D.find(e=>!!b&&(b===(null==T?void 0:T.id)?void 0===e.variationId:e.value===b||e.variationId===b))||A,M=m(T,R),{isOpen:N,onOpen:P,onClose:L}=(0,r.useDisclosure)(),{isOpen:V,onOpen:O,onClose:H}=(0,r.useDisclosure)(),{isOpen:F,onOpen:G,onClose:B}=(0,r.useDisclosure)(),z=null==T?void 0:T.generation.id,W=(null==R?void 0:R.value)||u.AK.ORIGINAL,[Y,{loading:K}]=(0,p.W)({onCompleted:()=>{H(),null==h||h()}}),[q,{loading:Z}]=x({onCompleted:()=>{H(),null==h||h()}}),J=(0,a.useCallback)(()=>Y(t),[Y,t]),X=(0,a.useCallback)(e=>{if(null==e?void 0:e.id)return W===u.AK.ORIGINAL?J():q(e.id)},[W,q,J]),Q=!!K||!!Z,$=(0,a.useCallback)(e=>{switch(e){case"delete":O();break;case"report":P();break;case"alchemy-refiner":G()}},[G,O,P]),[ee,et]=(0,a.useState)([]),[en,ei]=(0,a.useState)();(0,a.useEffect)(()=>{if(en===t&&ee.length&&ee.length<D.length){let e=D.find(e=>!ee.some(t=>t.variationId===e.variationId));e&&(y(e.variationId),j(!0))}ee.length!==D.length&&et(D),en!==t&&ei(t)},[ee,D,en,t]);let er=(0,a.useMemo)(()=>({image:T,loading:w,loadingSelectedVariation:_,deleting:Q,selectedImageVariation:M,selectOptions:D,detailedSelectOptions:k,selectedVariation:R,selectedVariationId:b,zoomedOpen:S,setZoomedOpen:E,setSelectedVariationId:y,setLoadingSelectedVariation:j,openConfirmationModal:$,onClose:d,onDelete:h,contextExists:!0}),[T,w,_,Q,M,D,k,R,b,S,$,d,h]);return(0,i.jsxs)(C.Provider,{value:er,children:[v,(0,i.jsx)(s.K,{isOpen:N,onClose:L,generationId:z}),(0,i.jsx)(o.A,{isOpen:V,onClose:H,deleteImage:()=>X(M),loading:Q,variation:null==M?void 0:M.transformType}),T&&(0,i.jsx)(f,{variant:"generation",imageId:t,generation:T.generation,variations:T.generated_image_variation_generics,isOpen:F,onClose:B})]})}},96982:(e,t,n)=>{n.d(t,{p:()=>o});var i=n(12115),r=n(14331),l=n(68691),a=n(60519);let o=()=>{let e=(0,l.j)(),{hasPermission:t}=(0,r.S)(),n=t("generationAlchemy","create");return(0,i.useCallback)(t=>e((0,a.oc)({newSettings:t,permissions:{generationAlchemy:{create:n}}})),[e,n])}},97401:(e,t,n)=>{n.d(t,{h:()=>s});var i=n(95155),r=n(42066),l=n(49747),a=n(33636),o=n(84493);let s=e=>{let{value:t,onChange:n,...s}=e;return(0,i.jsxs)(r.InputGroup,{size:"sm",rounded:"lg",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",bg:"old.darkblue",boxShadow:"0 0.125rem 0.25rem -0.065rem #0000001F",w:"100%",alignItems:"center",mb:1,_placeholder:{color:"content.secondary",fontWeight:500},_hover:{background:"midnightBlue"},...s,children:[(0,i.jsx)(l.InputLeftElement,{pointerEvents:"none",children:(0,i.jsx)(o.A,{color:"content.secondary",width:5,height:5})}),(0,i.jsx)(a.Input,{onChange:e=>{n(e.target.value.slice(0,50))},placeholder:"Search collections",height:8.5,value:t,rounded:"lg",width:"100%",variant:"filled",color:"white",_hover:{background:"midnightBlue"},_focus:{background:"midnightBlue"},_placeholder:{color:"content.secondary",fontSize:"sm"},"aria-label":"Search collections"})]})}},98371:(e,t,n)=>{n.d(t,{A:()=>S});var i=n(95155),r=n(12974),l=n(35695),a=n(12115),o=n(69122),s=n(58727),d=n(64430),c=n(6874),u=n.n(c);let m=e=>{let{children:t,url:n}=e;return(0,i.jsx)(d.Link,{as:u(),color:"white",fontWeight:500,textDecoration:"underline",href:n,children:t})};var g=n(25274),p=n(60855),h=n(30345),v=n(22252);let x=e=>{let{operation:t,collectionName:n,imageCountText:r,collectionCountText:l,imageCount:a,linkComponent:o}=e;switch(t){case h.Le.ADD:return{title:"".concat((0,v.td)(null!=a?a:1,"Image","Images")," added"),description:(0,i.jsxs)(i.Fragment,{children:[r," added to ",(0,i.jsx)(o,{children:n})]})};case h.Le.REMOVE:return{title:"".concat((0,v.td)(null!=a?a:1,"Image","Images")," removed"),description:(0,i.jsxs)(i.Fragment,{children:[r," removed from ",(0,i.jsx)(o,{children:n})]})};case h.Le.ADD_COLLECTION:return{title:"Collection created",description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{children:n})," has been created ",r?"with ".concat(r):""]})};case h.Le.MOVE:return{title:"Collection moved",description:(0,i.jsxs)(i.Fragment,{children:[l," ",a?",":""," ",r," moved to ",(0,i.jsx)(o,{children:n})]})};default:return{title:null,description:null}}},f=e=>{let{onClose:t,...n}=e,r=(0,a.useCallback)(e=>{let{children:t}=e;return(0,i.jsx)(m,{url:n.url,children:t})},[n.url]),{description:l}=x({...n,linkComponent:r});return(0,i.jsxs)(s.HStack,{borderRadius:"lg",color:"white",p:3,mx:4,my:1,bg:"surface.info",alignItems:"center",children:[(0,i.jsx)(g.A,{}),l,(0,i.jsx)(p.A,{ml:1,justifySelf:"end",cursor:"pointer",onClick:t})]})};var C=n(13050),I=n(83833),b=n(64478),y=n(90824);let _=()=>document.getElementsByClassName("intercom-lightweight-app").length>0,j=(e,t)=>e?"".concat(e," ").concat((0,v.td)(e,t,"".concat(t,"s"))):"",S=function(){let{position:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:"bottom-right"},t=(0,l.useRouter)(),n=(0,r.useToast)(),s=(0,a.useRef)(void 0),d=(0,b.w)(),{isSharedCollectionsEnabled:c,flowStateQuickActionsUpdate:u}=(0,I.D)(),{userSelectedTeam:m}=(0,o.s)(),g=m(),p=!!(null==g?void 0:g.id);return{showCollectionImagesToast:(r,l,o,m)=>{if(!o)return;let g=j(l,"image"),h=j(m,"collection"),{collectionName:v}=o,I=_(),b=(0,y.CM)(o,d,c,p);if(u){let{title:e,description:n}=x({operation:r,collectionName:v,imageCount:l,imageCountText:g,collectionCountText:h,linkComponent:a.Fragment});(0,C.o)({title:e,description:n,action:{label:"View Collection",onClick:()=>t.push(b)},status:"success"});return}s.current=n({position:e,containerStyle:I?{position:"relative",bottom:"4.5rem"}:{},render:e=>{let{onClose:t}=e;return(0,i.jsx)(f,{operation:r,url:b,collectionName:v,imageCountText:g,collectionCountText:h,imageCount:l,onClose:t})}})}}}}}]);