try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cfdb286b-80c1-48ea-a6f1-2fe599910c7a",e._sentryDebugIdIdentifier="sentry-dbid-cfdb286b-80c1-48ea-a6f1-2fe599910c7a")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6764],{1431:(e,t,n)=>{n.d(t,{A:()=>G});var a=n(95155),o=n(64982),r=n(52017),l=n(41719),s=n(59108),i=n(19460),d=n(84287),c=n(57599),u=n(58670),p=n(46671),h=n(35695),x=n(12115),m=n(58422),f=n(52049),C=n(40282),g=n(99675),v=n(72461),j=n(3740);let b=e=>{let t=(0,x.useId)();return(0,a.jsxs)(j.Icon,{width:"1.0625rem",height:"16",viewBox:"0 0 17 16",fill:"none",...e,children:[(0,a.jsx)("path",{d:"M9.7767 9.16598C9.7767 9.16598 11.5 9.5 12.8249 8.57432C12.9476 8.48605 13.063 8.39424 13.1715 8.29932C13.6909 8.63562 14 9.05667 14 9.51335C14 10.6133 12.2067 11.5067 10 11.5067C7.79333 11.5067 6 10.6133 6 9.51335C6 8.909 6.54132 8.36703 7.3951 8.00132C7.10619 8.83891 7.36694 9.13011 7.67642 9.47572C7.86572 9.68712 8.07325 9.91889 8.18437 10.3085C8.27744 10.3282 8.36862 10.3369 8.4559 10.3369C9.17164 10.3369 9.7767 9.16598 9.7767 9.16598Z",fill:"url(#paint0_linear_12873_16986_".concat(t,")")}),(0,a.jsx)("path",{d:"M7.04148 6.934C7.05114 6.97431 7.06133 7.01426 7.07203 7.05385C6.32369 7.36701 5.73612 7.802 5.38 8.31999C3.60667 8.20665 2 7.55335 2 6.35335V5.89998C2.87333 6.58665 4.27333 6.98665 6 6.98665C6.36116 6.98665 6.70939 6.96857 7.04148 6.934Z",fill:"url(#paint1_linear_12873_16986_".concat(t,")")}),(0,a.jsx)("path",{d:"M8.77293 2.50942C7.73255 3.14766 7.18919 4.10086 6.9998 5.05833C6.94151 5.353 6.91618 5.64936 6.91918 5.93979C6.6177 5.97107 6.30885 5.98665 6 5.98665C4 5.98665 2 5.33333 2 3.99333C2 2.66666 4 2 6 2C7.01023 2 8.02046 2.17009 8.77293 2.50942Z",fill:"url(#paint2_linear_12873_16986_".concat(t,")")}),(0,a.jsx)("path",{d:"M5.42 13.3133C5.14667 12.9333 5 12.4933 5 12.0067V11.7867C3.73333 11.6667 2.7 11.3 2 10.7533V11.34C2 12.5467 3.63334 13.2 5.42 13.3133Z",fill:"url(#paint3_linear_12873_16986_".concat(t,")")}),(0,a.jsx)("path",{d:"M5.02002 9.31321C5.02002 9.30658 5.02002 9.29997 5.02665 9.29333H5.02002C3.74002 9.18 2.7 8.81334 2 8.26001V8.84668C2 9.96001 3.38667 10.6 5 10.7867V9.51335C5 9.44668 5.00669 9.37988 5.02002 9.31321Z",fill:"url(#paint4_linear_12873_16986_".concat(t,")")}),(0,a.jsx)("path",{d:"M6 11.3534C6.9 12.0667 8.32667 12.5067 10 12.5067C11.6733 12.5067 13.1 12.0667 14 11.3534V12.0067C14 13.3333 12 14 10 14C8 14 6 13.3333 6 12.0067V11.3534Z",fill:"url(#paint5_linear_12873_16986_".concat(t,")")}),(0,a.jsx)("path",{d:"M12.4083 7.6373C11.3391 8.4241 10.0691 8.12287 9.34206 7.83486C9.03414 8.51755 8.9304 8.98564 8.92831 8.99631C8.89706 9.14693 8.76705 9.24976 8.62288 9.24976C8.60163 9.24976 8.57998 9.2476 8.55831 9.24291C8.38956 9.20664 8.28163 9.03726 8.31705 8.86446C8.33913 8.75608 8.85707 6.34021 11.2154 4.27507C10.2975 4.70986 9.04248 5.69506 8.40873 7.2021C7.86289 6.0842 7.85455 4.01479 9.62121 3.03768C10.367 2.62807 11.1212 2.54699 12.0337 2.22698C12.6921 1.9923 13.0795 1.52297 13.2379 1.2883C13.2754 1.22856 13.3587 1.24135 13.3796 1.30536C13.6708 2.11179 14.8416 5.84524 12.4083 7.6373Z",fill:"#33AB71"}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"paint0_linear_12873_16986_".concat(t),x1:"2.45455",y1:"4.52632",x2:"12.1259",y2:"3.03516",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]}),(0,a.jsxs)("linearGradient",{id:"paint1_linear_12873_16986_".concat(t),x1:"2.45455",y1:"4.52632",x2:"12.1259",y2:"3.03516",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]}),(0,a.jsxs)("linearGradient",{id:"paint2_linear_12873_16986_".concat(t),x1:"2.45455",y1:"4.52632",x2:"12.1259",y2:"3.03516",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]}),(0,a.jsxs)("linearGradient",{id:"paint3_linear_12873_16986_".concat(t),x1:"2.45455",y1:"4.52632",x2:"12.1259",y2:"3.03516",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]}),(0,a.jsxs)("linearGradient",{id:"paint4_linear_12873_16986_".concat(t),x1:"2.45455",y1:"4.52632",x2:"12.1259",y2:"3.03516",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]}),(0,a.jsxs)("linearGradient",{id:"paint5_linear_12873_16986_".concat(t),x1:"2.45455",y1:"4.52632",x2:"12.1259",y2:"3.03516",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]})]})]})};var y=n(40766),_=n(19321),w=n(958),k=n(12466),T=n(83484),A=n(83833),D=n(69122),U=n(73682),S=n(64478),F=n(22252),I=n(66415),P=n(28166),B=n(5112),E=n(7032),R=n(80891),M=n(85756);let O=e=>{let{children:t,usePortal:n}=e;return n?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(o.Portal,{children:t})},G=e=>{let{hideTeamLogo:t=!1,...n}=e,{isUnlimitedSlowModeAndNotificationsEnabled:o}=(0,A.D)(),j=(0,h.useRouter)(),G=(0,h.usePathname)(),{userSelectedTeam:V}=(0,D.s)(),H=V(),{currentPlan:Y,isUserFreeOrFreeplus:N}=(0,f.t)(),{isUserFreePlan:z}=(0,R.usePlan)(),Z=(0,S.w)(),{totalTokens:W,currentTokens:L,currentRolloverTokens:q,baseFastTokens:J,baseRolloverTokens:Q}=(0,T.A)(),{teamBaseFastTokens:X,teamBaseRolloverTokens:$}=(0,k.Q)(),K=(0,r.useDisclosure)(),{status:ee}=(0,U.e)(),et="canceled"===ee,en="".concat(H.teamName),ea=M.s1.IMAGE,eo=(0,E.k)(ea),er=H.planTokenRenewalDate?new Date(H.planTokenRenewalDate).getTime():null,el=(0,I.Ys)(er||eo),es=(0,x.useCallback)(e=>{G!==_.a.BUY&&j.push(e)},[j,G]),[ei,ed]=(0,x.useState)(!1),ec=(0,l.useBreakpointValue)({base:!0,md:!1}),eu=ec||G===_.a.BUY?"bottom":"right-start",ep=()=>{if(!H.akUUID&&ei)return es(_.a.BUY)},eh=o&&(0,P.wH)(Y,L),ex=(z||eh)&&!H.akUUID,em=o&&W<=0&&(Y===p.plan.STANDARD||Y===p.plan.PRO),ef=!t&&H.akUUID,eC=ex?"fit-content":"100%",eg=ef?1:3.5,ev=3.5*!ex;return Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Flex,{cursor:"pointer",justifyContent:"center",w:eC,children:(0,a.jsx)(i.Popover,{trigger:"hover",placement:eu,onClose:()=>ed(!1),onOpen:()=>ed(!0),styleConfig:{baseStyle:{popper:{zIndex:20}}},children:e=>{let{onClose:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.PopoverTrigger,{children:(0,a.jsxs)(s.Flex,{flexDirection:"row",alignItems:"center",borderRadius:"1.875rem",border:"1px solid #282C42",pr:{base:void 0,md:ev},pl:eg,gap:2,w:eC,justifyContent:"center",minHeight:"1.625rem",...n,children:[(0,a.jsxs)(s.Flex,{onClick:ep,cursor:G===_.a.BUY?"auto":"pointer",flex:1,gap:.5,alignItems:"center","data-tracking-id":B.iA1,children:[ef&&(0,a.jsx)(c.Tooltip,{hasArrow:!0,arrowSize:6,placement:"top",fontSize:"xs",label:en,shouldWrapChildren:!0,children:(0,a.jsx)(C.V,{accountName:H.teamName?(0,F.eh)(H.teamName):void 0,isPersonalAccount:!1,accountId:H.id,backgroundImageSource:H.teamLogoUrl,width:5,height:5,ml:-5,mr:5,transform:"translateX(calc(var(--leonardo-ai-space-4) + var(--leonardo-ai-space-0-5)))",showAccountName:!1,avatarFontSize:"0.8rem",avatarFontWeight:"bold"})}),(0,a.jsx)(s.Flex,{flex:1,gap:.5,alignItems:"center",justifyContent:"center",children:em?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{width:4,height:4}),(0,a.jsx)(u.Text,{color:"white",fontWeight:600,fontSize:"xs",children:"Unlimited Relaxed"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{width:4,height:4}),(0,a.jsx)(u.Text,{color:"white",fontWeight:600,fontSize:"xs",children:(0,I.HY)(W)})]})})]}),ex&&(0,a.jsx)(v._,{dataTrackingId:B.lm$,onClick:()=>es(_.a.BUY),borderRadius:"1.875rem",border:"1px solid #242C3E",variant:"solid",size:"sm",m:"1px",height:"1.625rem",bg:"gradient.main",color:"white",transition:"none",fontSize:"xs",padding:"2",children:"Upgrade"})]})}),(0,a.jsx)(O,{usePortal:!!ec,children:(0,a.jsx)(g.A,{isTeamPlan:!!H.akUUID,teamData:H,userPlan:Y,isUserFreeOrFreeplus:N,currentTokens:L,baseFastTokens:J,baseTeamFastTokens:X,baseTeamRolloverTokens:$,currentRolloverTokens:q,baseRolloverTokens:Q,trackingId:B.t4,handleOnClick:()=>{H.akUUID?(K.onOpen(),t()):(t(),es(_.a.BUY))},tokenResetTime:el,isTeamPlanCanceled:et})})]})}})}),H&&H.userRole!==w.RUS.Editor&&K.isOpen&&(0,a.jsx)(m.P,{isOpen:K.isOpen,onClose:K.onClose,selectedTeam:H},H.id)]}):null}},2697:(e,t,n)=>{n.d(t,{c:()=>s});var a=n(12115),o=n(39602),r=n(41259);let l=async e=>{let{scheduleId:t,teamUUID:n}=e;try{let e=await fetch(r.LJ,{cache:"no-store",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({scheduleId:t,teamUUID:n})}),a=await e.json();if([400,403,500].includes(e.status))return{errorMessage:a.message,data:null};return{data:a,errorMessage:null}}catch(e){return{errorMessage:"check team schedule error: ".concat(e.message),data:null}}};function s(e){let{scheduleId:t,teamUUID:n,currentSubscriptionPriceId:r,currentSeatQuantity:s}=e,[i,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),x=(null==i?void 0:i.scheduledSub)&&(null==i?void 0:i.currentSub)&&r&&s?(0,o.M)(i,r,s):void 0;return(0,a.useEffect)(()=>{(async function(){if(!t||!n||!r||!s){d(null);return}u(!0),h(null);try{let e=await l({scheduleId:t,teamUUID:n});if(null!==e.errorMessage){h(Error(e.errorMessage));return}d(e.data.teamSchedule)}catch(e){h(e instanceof Error?e:Error("Error checking team schedule"))}finally{u(!1)}})()},[t,n,r,s]),{teamSchedule:i,downgradeType:x,isLoading:c,error:p}}},39602:(e,t,n)=>{n.d(t,{H:()=>o,M:()=>r});var a=n(85756);let o=e=>!!(e&&Object.values(a.EE).includes(e));function r(e,t,n){let{price:o,quantity:r}=e.scheduledSub;return o!==t&&r!==n?a.Bl.BOTH:o!==t?a.Bl.PLAN:r!==n?a.Bl.SEATS:void 0}},71677:(e,t,n)=>{n.d(t,{M:()=>s});var a=n(31117),o=n(12115),r=n(958);let l=(e,t)=>{var n,a,o,r,l;let s=t?e:void 0,i=null==s?void 0:s.paymentPlatformSubscriptionDetails,d=null!==(o=null==i?void 0:i.schedule)&&void 0!==o?o:void 0,c=(null==i?void 0:i.status)==="canceled",u=(null==i?void 0:null===(n=i.cancellation_details)||void 0===n?void 0:n.reason)==="cancellation_requested"&&(null==i?void 0:i.status)==="active";return{status:null==i?void 0:i.status,cancellationReason:null!==(r=null==i?void 0:null===(a=i.cancellation_details)||void 0===a?void 0:a.reason)&&void 0!==r?r:void 0,cancelAt:null!==(l=null==i?void 0:i.cancel_at)&&void 0!==l?l:void 0,showRenewSubscription:c||u,isSubscriptionExpired:c,scheduledPlanChangeDetails:d}},s=(e,t)=>{let[n,s]=(0,o.useState)(null),[i,d]=(0,o.useState)(!0),c=(0,a.m)();return(0,o.useEffect)(()=>{(async()=>{if(e&&t){d(!0);try{var n,a;let o=await c.query({query:r.u7v,variables:{teamId:e},fetchPolicy:"network-only"}),i=null==o?void 0:null===(a=o.data)||void 0===a?void 0:null===(n=a.team_plan_history)||void 0===n?void 0:n.find(e=>e.plan===t);if(!i)throw Error("No matching plan history found");s({teamPlanHistoryStatus:l(i,t),teamPlanHistoryList:o.data.team_plan_history,matchingPlanHistory:i})}catch(e){}finally{d(!1)}}})()},[e,t,c]),{data:n,loading:i}}},73682:(e,t,n)=>{n.d(t,{e:()=>o});var a=n(68691);let o=()=>{let e=(0,a.G)(e=>e.teamPlanHistory.teamPlanHistory),t=e&&e.length>0?e[0].paymentPlatformSubscriptionDetails:void 0;return{status:null==t?void 0:t.status}}},98464:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(958),o=n(68691),r=n(88095),l=n(20690),s=n(91073),i=n(34853);let d=()=>{let[e,{loading:t}]=(0,r.n)(a.C24),{handleGenError:n}=(0,l.B)(),o=(0,s.A)();return{updateTeamMembership:async(t,a)=>{let{email:r}=a;try{let n=await e({variables:{details:a,teamId:t}});return n.data&&o({description:"".concat(r||"User"," has been removed"),type:"info",position:"bottom-right"}),n}catch(e){if((0,i.V)(e)&&(0,i.o)({error:e,onError:n}))return;o({description:e.message,type:s.k.error}),console.error(e)}},isUpdatingTeamMembership:t}};var c=n(20876);let u=e=>{let t=(0,o.j)(),n=(0,o.G)(e=>e.teamsMembers.loaded),r=(0,o.G)(e=>e.teamsMembers.teamsInvites),l=(0,o.G)(e=>e.teamsMembers.teamsMembers),s=(0,o.G)(e=>e.user.teams),{isUpdatingTeamMembership:i,updateTeamMembership:u}=d(),p=r.filter(e=>!e.dateAccepted&&!e.dateDeclined),h=null==s?void 0:s.find(t=>t.id===e),x=(null==h?void 0:h.userRole)===a.RUS.Owner,m=async(e,n)=>{let o={action:a.Wux.Delete,...n};await u(Number(e),o),!i&&e&&t((0,c.E)(e))};return{teamsMembers:l,teamsInvites:p,isUpdatingTeamMembership:i,userIsTeamOwner:x,membersHaveLoaded:n,team:h,invitesDeclined:()=>{let e=r.filter(e=>null!==e.dateDeclined);return x&&e.length>0?{numberOfDeclinedInvites:e.length,declinedInvitesEmail:e.map(e=>e.inviteEmail)}:{numberOfDeclinedInvites:0,declinedInvitesEmail:[""]}},handleRemoveUserFromTeam:m}}},99675:(e,t,n)=>{n.d(t,{A:()=>T});var a=n(95155),o=n(58195),r=n(45640),l=n(75983),s=n(59108),i=n(58670),d=n(46671),c=n(12115),u=n(40766),p=n(49832),h=n(44590),x=n(66021),m=n(33576),f=n(72461),C=n(55464),g=n(60855);let v=e=>{let{onClose:t}=e;return(0,a.jsxs)(s.Flex,{border:"1px solid",borderColor:"border.positive",justifyContent:"space-between",alignItems:"center",borderRadius:"lg",p:2,mb:5,children:[(0,a.jsxs)(s.Flex,{gap:1,alignItems:"center",children:[(0,a.jsx)(h.A,{width:5,height:5,color:"border.positive"}),(0,a.jsxs)(i.Text,{fontSize:"xs",children:["Your tokens are running low. Get"," ",(0,a.jsx)(i.Text,{as:"span",color:"border.positive",children:"Unlimited relaxed generations"})," ","with Artisan"]})]}),(0,a.jsx)(g.A,{mx:1,width:4,height:4,cursor:"pointer",onClick:t})]})};var j=n(958),b=n(83833),y=n(85756),_=n(22252),w=n(28166),k=n(49993);let T=e=>{let{isTeamPlan:t,teamData:n,userPlan:g,isUserFreeOrFreeplus:T,currentTokens:A,baseFastTokens:D,currentRolloverTokens:U,baseRolloverTokens:S,baseTeamFastTokens:F,baseTeamRolloverTokens:I,trackingId:P,handleOnClick:B,tokenResetTime:E,isTeamPlanCanceled:R,showManageSubscriptionButton:M=!0}=e,{isUnlimitedSlowModeAndNotificationsEnabled:O}=(0,b.D)(),[G,V]=(0,c.useState)(!0),H=(0,w.wH)(g,A),Y=g===d.plan.BASIC,N=t&&(null==n?void 0:n.plan)?y.tC[n.plan]:y.At[g],z=M&&O&&(null==n?void 0:n.userRole)!==j.RUS.Editor;return(0,a.jsxs)(o.PopoverContent,{bg:"background.flatPanel",boxShadow:k.WT,p:4,width:{base:"100%",md:"22.188rem"},children:[(0,a.jsx)(r.PopoverArrow,{bg:"background.flatPanel",borderColor:"border.greyblue"}),(0,a.jsxs)(l.PopoverBody,{p:0,children:[O&&H&&G&&(0,a.jsx)(v,{onClose:()=>{V(!1)}}),(0,a.jsx)(C.A,{icon:(0,a.jsx)(x.A,{width:5,height:5}),label:t?"Team Plan":"My Plan",value:R?"".concat(N," (View-Only)"):N,isGradientText:!0}),(0,a.jsxs)(s.Flex,{h:"100%",flexDir:"column",justifyContent:"space-between","data-testid":"token-breakdown",children:[(0,a.jsxs)(s.Flex,{flexDir:"column",children:[(0,a.jsx)(C.A,{icon:(0,a.jsx)(u.A,{width:5,height:5}),label:t?"Team Fast Tokens":"Fast Tokens",currentValue:A,baseValue:t?F:D,tooltipText:T&&void 0!==E?"Your daily allocation of free fast tokens reset in ".concat(E,"."):t&&void 0!==E?"Your monthly allocation of Team Fast Tokens process at the highest priority ".concat("right now"===E?".":"and will reset in ".concat(E,".")):void 0===E?"Your monthly allocation of Fast Tokens process at the highest priority":"Your monthly allocation of Fast Tokens process at the highest priority".concat("right now"===E?".":" and will reset in ".concat(E,".")),isTeamPlanCanceled:R}),(0,a.jsx)(C.A,{icon:(0,a.jsx)(p.A,{width:5,height:5,color:T&&!t?"font.placeholder":"white"}),label:"Rollover Bank",currentValue:U,baseValue:t?I:S,isFreeUser:!t&&T,tooltipText:T?"Unused monthly Fast Tokens accumulate in your Rollover Bank on premium plans.":"Unused monthly Fast Tokens will accumulate to a maximum of ".concat((0,_.r9)(I||S)," Rollover Tokens on ").concat(N," plans"),isTeamPlanCanceled:R}),(0,a.jsx)(C.A,{icon:(0,a.jsx)(h.A,{width:5,height:5,color:!t&&(T||Y)?"font.placeholder":"#33AB71"}),label:"Relaxed Generations",value:"Unlimited",isFreeUser:!t&&T,isCurrentPlanApprentice:Y,tooltipText:"Unlimited images and videos at a slower pace",isTeamPlanCanceled:R})]}),(0,a.jsxs)(i.Text,{as:"span",color:"lightbluegrey",fontSize:"xs",children:["More information in our"," ",(0,a.jsx)(i.Text,{as:"a",href:"https://intercom.help/leonardo-ai/en/articles/9560707-token-rollover#h_b8a14069f3",target:"_blank",color:"primary.textaccent",textDecor:"underline",children:"FAQ."})]})]}),z&&(0,a.jsxs)(f._,{dataTrackingId:P,onClick:B,variant:"glowDarkest",textColor:"white",mt:3,w:"100%",maxH:8,gap:1,children:[(0,a.jsx)(m.A,{width:4,height:4}),"Manage Subscription"]})]})]})}}}]);