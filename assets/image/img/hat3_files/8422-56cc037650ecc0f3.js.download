try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4c48350d-c9b3-46d4-9767-d0ad9442cea6",e._sentryDebugIdIdentifier="sentry-dbid-4c48350d-c9b3-46d4-9767-d0ad9442cea6")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8422],{12466:(e,t,n)=>{n.d(t,{Q:()=>d,_:()=>c});var a=n(69507),r=n(5138),i=n(12115),o=n(958),l=n(69122),s=n(85756);let c=3,d=()=>{let{userSelectedTeam:e}=(0,l.s)(),t=e(),{data:n}=(0,a.I)(o.zQ1),[d,{data:u}]=(0,r._)(o.$84,{fetchPolicy:"network-only"});return(0,i.useEffect)(()=>{t.plan===s.EE.PRO&&d({variables:{where:{team:{akUUID:{_eq:t.akUUID}}}}})},[t.plan,t.akUUID,d]),(0,i.useMemo)(()=>{var e,a,r,i;let o,l;let d=null==n?void 0:n.team_plans.find(e=>e.name===t.plan),p=null==u?void 0:u.team_deals.find(e=>{var n;return(null===(n=e.team)||void 0===n?void 0:n.akUUID)===t.akUUID}),h=null!==(e=t.planSeats)&&void 0!==e?e:0,m=null!==(a=null==p?void 0:p.newTeamSeats)&&void 0!==a?a:0,g=null!==(r=null==p?void 0:p.tokensPerSeat)&&void 0!==r?r:0;if(t.plan===s.EE.CUSTOM){let e=null!==(i=t.planCustomTokenRenewalAmount)&&void 0!==i?i:0;return{teamBaseFastTokens:e,teamBaseRolloverTokens:e*c}}return(t.plan===s.EE.PRO?l=(o=m*g)*c:(o=(null==d?void 0:d.planDescription.fastTokens)*h,l=(null==d?void 0:d.planDescription.rollOverToken)*h),d)?{teamBaseFastTokens:o,teamBaseRolloverTokens:l,dealTokensPerSeat:g}:{teamBaseFastTokens:0,teamBaseRolloverTokens:0}},[n,u,t])}},38851:(e,t,n)=>{n.d(t,{j:()=>r});var a=n(41259);let r=async e=>{let{teamUUID:t}=e,n=await fetch(a.st,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({teamUUID:t})}),r=await n.json();return[400,403,500].includes(n.status)?{errorMessage:"".concat("[team redirect to portal]",": ").concat(r.message)}:r}},44334:(e,t,n)=>{n.d(t,{Y:()=>s});var a=n(5138),r=n(12115),i=n(958),o=n(68691),l=n(62618);let s=e=>{let{teamId:t,onSuccess:n,onError:s,maxAttempts:c=10,initialInterval:d=1e3,maxInterval:u=1e4,getNextInterval:p=(e,t,n)=>Math.min(t*Math.pow(2,e),n)}=e,h=(0,r.useRef)(null),m=(0,r.useRef)(0),g=(0,o.j)(),[f]=(0,a._)(i.u7v,{fetchPolicy:"network-only"}),x=()=>{h.current&&(clearTimeout(h.current),h.current=null)};(0,r.useEffect)(()=>()=>x(),[]);let v=async e=>{try{var a;let[r,i]=await Promise.all([g((0,l.LZ)()).unwrap(),f({variables:{teamId:t}})]),o=r.teams.find(e=>e.id===t);if(!o)throw Error("Team not found");let s=null===(a=i.data)||void 0===a?void 0:a.team_plan_history;if(s&&e({team:o,teamPlanHistory:s}))return x(),null==n||n(),!0;if(m.current++,m.current>=c)return x(),!1;let C=p(m.current,d,u);return new Promise(t=>{h.current=setTimeout(async()=>{let n=await v(e);t(n)},C)})}catch(e){return x(),null==s||s(e),!1}};return{startPolling:async e=>{m.current=0,x();try{if(!t)return null==s||s(Error("Invalid team ID")),!1;return await v(e)}catch(e){return null==s||s(e),!1}}}}},48461:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(95155),r=n(3740),i=n(12115);let o=e=>{let t="nav-motion-icon-gradient-".concat((0,i.useId)());return(0,a.jsxs)(r.Icon,{width:6,height:6,viewBox:"0 0 22 23",fill:"currentColor",...e,children:[(0,a.jsxs)("g",{clipPath:"url(#".concat(t,")"),children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.51591 17.3812L1.19063 18.4866L0.000164232 18.1863L5.20532 0.497689L6.39579 0.797996L6.07042 1.90356C5.98062 2.20873 6.17381 2.52345 6.50294 2.60647L7.09817 2.75662C7.4273 2.83965 7.76625 2.65911 7.85604 2.354L8.18146 1.24845L9.37178 1.54872L8.55848 4.31255C8.46884 4.61716 8.66191 4.93248 8.99108 5.01549L16.1335 6.81722C16.462 6.90012 16.8016 6.71976 16.8914 6.4146L17.7047 3.65076L18.8951 3.95106L18.5697 5.05662C18.4799 5.36178 18.6731 5.67651 19.0022 5.75953L19.5975 5.90969C19.9261 5.99258 20.2656 5.81217 20.3553 5.50706L20.6807 4.4015L21.8711 4.70178L16.6659 22.3903L15.4756 22.0901L15.8009 20.9847C15.8907 20.6794 15.6969 20.3646 15.3683 20.2817L14.7731 20.1316C14.444 20.0485 14.105 20.229 14.0152 20.5342L13.6899 21.6396L12.4995 21.3393L13.3128 18.5755C13.4027 18.2699 13.2088 17.9556 12.8802 17.8728L5.73781 16.071C5.40865 15.988 5.06986 16.1679 4.97994 16.4734L4.16663 19.2373L2.97631 18.937L3.30159 17.8316C3.39142 17.5264 3.19816 17.2117 2.86903 17.1287L2.27382 16.9785C1.9447 16.8955 1.60574 17.0759 1.51591 17.3812ZM18.677 6.86505C18.3479 6.78202 18.0091 6.96203 17.9191 7.2677L17.5938 8.37324C17.5038 8.67891 17.6972 8.99317 18.0263 9.07619L18.6216 9.22634C18.9501 9.30923 19.2895 9.12935 19.3794 8.82369L19.7048 7.71814C19.7947 7.41248 19.6008 7.09807 19.2722 7.01519L18.677 6.86505ZM17.701 10.1817C17.3719 10.0987 17.0331 10.2786 16.9431 10.5843L16.6178 11.6899C16.528 11.995 16.7213 12.3098 17.0504 12.3928L17.6456 12.5429C17.9742 12.6258 18.3137 12.4454 18.4035 12.1403L18.7288 11.0347C18.8187 10.7291 18.6248 10.4147 18.2962 10.3318L17.701 10.1817ZM16.7251 13.4983C16.3959 13.4153 16.0571 13.5952 15.9672 13.9009L15.6418 15.0065C15.5521 15.3115 15.7453 15.6265 16.0744 15.7095L16.6696 15.8596C16.9982 15.9425 17.3377 15.762 17.4275 15.457L17.7528 14.3514C17.8428 14.0457 17.6488 13.7313 17.3203 13.6484L16.7251 13.4983ZM15.7491 16.8149C15.42 16.7319 15.0811 16.912 14.9912 17.2176L14.6658 18.3232C14.5761 18.6282 14.7693 18.9429 15.0985 19.0259L15.6937 19.1761C16.0223 19.2589 16.3617 19.0787 16.4515 18.7737L16.7768 17.668C16.8668 17.3624 16.6728 17.0479 16.3443 16.965L15.7491 16.8149ZM6.17772 3.71198C5.84859 3.62896 5.50979 3.80898 5.41987 4.11465L5.09448 5.22018C5.00454 5.52585 5.19792 5.84011 5.52705 5.92313L6.12225 6.07328C6.45138 6.1563 6.79021 5.9763 6.88016 5.67063L7.20549 4.56509C7.29543 4.25942 7.10205 3.94516 6.77292 3.86213L6.17772 3.71198ZM5.20174 7.02862C4.87261 6.9456 4.53379 7.12557 4.44384 7.43124L4.11851 8.53681C4.02871 8.84198 4.22196 9.15672 4.55108 9.23974L5.14629 9.38989C5.47542 9.47291 5.81441 9.29235 5.90419 8.98727L6.22952 7.88169C6.31947 7.57603 6.12607 7.2618 5.79695 7.17877L5.20174 7.02862ZM4.22578 10.3452C3.89665 10.2622 3.55782 10.4422 3.46788 10.7479L3.14254 11.8535C3.05278 12.1585 3.24596 12.4734 3.57509 12.5564L4.1703 12.7066C4.49942 12.7896 4.83846 12.6089 4.92821 12.3039L5.25355 11.1983C5.3435 10.8926 5.15011 10.5784 4.82098 10.4954L4.22578 10.3452ZM3.24982 13.6618C2.92069 13.5788 2.58184 13.7589 2.4919 14.0645L2.16654 15.1701C2.07679 15.4751 2.27005 15.7898 2.59918 15.8728L3.19439 16.023C3.52352 16.106 3.86247 15.9256 3.95222 15.6206L4.27758 14.5149C4.36749 14.2094 4.17415 13.895 3.84502 13.812L3.24982 13.6618ZM13.2057 16.7665L6.06333 14.9648C5.73417 14.8818 5.54091 14.5671 5.63058 14.2624L7.908 6.52307C7.99812 6.21682 8.33678 6.03739 8.66594 6.12042L15.8083 7.92215C16.1369 8.00504 16.331 8.31886 16.2409 8.62511L13.9636 16.3639C13.8738 16.6691 13.5342 16.8494 13.2057 16.7665Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.51591 17.3812L1.19063 18.4866L0.000164232 18.1863L5.20532 0.497689L6.39579 0.797996L6.07042 1.90356C5.98062 2.20873 6.17381 2.52345 6.50294 2.60647L7.09817 2.75662C7.4273 2.83965 7.76625 2.65911 7.85604 2.354L8.18146 1.24845L9.37178 1.54872L8.55848 4.31255C8.46884 4.61716 8.66191 4.93248 8.99108 5.01549L16.1335 6.81722C16.462 6.90012 16.8016 6.71976 16.8914 6.4146L17.7047 3.65076L18.8951 3.95106L18.5697 5.05662C18.4799 5.36178 18.6731 5.67651 19.0022 5.75953L19.5975 5.90969C19.9261 5.99258 20.2656 5.81217 20.3553 5.50706L20.6807 4.4015L21.8711 4.70178L16.6659 22.3903L15.4756 22.0901L15.8009 20.9847C15.8907 20.6794 15.6969 20.3646 15.3683 20.2817L14.7731 20.1316C14.444 20.0485 14.105 20.229 14.0152 20.5342L13.6899 21.6396L12.4995 21.3393L13.3128 18.5755C13.4027 18.2699 13.2088 17.9556 12.8802 17.8728L5.73781 16.071C5.40865 15.988 5.06986 16.1679 4.97994 16.4734L4.16663 19.2373L2.97631 18.937L3.30159 17.8316C3.39142 17.5264 3.19816 17.2117 2.86903 17.1287L2.27382 16.9785C1.9447 16.8955 1.60574 17.0759 1.51591 17.3812ZM18.677 6.86505C18.3479 6.78202 18.0091 6.96203 17.9191 7.2677L17.5938 8.37324C17.5038 8.67891 17.6972 8.99317 18.0263 9.07619L18.6216 9.22634C18.9501 9.30923 19.2895 9.12935 19.3794 8.82369L19.7048 7.71814C19.7947 7.41248 19.6008 7.09807 19.2722 7.01519L18.677 6.86505ZM17.701 10.1817C17.3719 10.0987 17.0331 10.2786 16.9431 10.5843L16.6178 11.6899C16.528 11.995 16.7213 12.3098 17.0504 12.3928L17.6456 12.5429C17.9742 12.6258 18.3137 12.4454 18.4035 12.1403L18.7288 11.0347C18.8187 10.7291 18.6248 10.4147 18.2962 10.3318L17.701 10.1817ZM16.7251 13.4983C16.3959 13.4153 16.0571 13.5952 15.9672 13.9009L15.6418 15.0065C15.5521 15.3115 15.7453 15.6265 16.0744 15.7095L16.6696 15.8596C16.9982 15.9425 17.3377 15.762 17.4275 15.457L17.7528 14.3514C17.8428 14.0457 17.6488 13.7313 17.3203 13.6484L16.7251 13.4983ZM15.7491 16.8149C15.42 16.7319 15.0811 16.912 14.9912 17.2176L14.6658 18.3232C14.5761 18.6282 14.7693 18.9429 15.0985 19.0259L15.6937 19.1761C16.0223 19.2589 16.3617 19.0787 16.4515 18.7737L16.7768 17.668C16.8668 17.3624 16.6728 17.0479 16.3443 16.965L15.7491 16.8149ZM6.17772 3.71198C5.84859 3.62896 5.50979 3.80898 5.41987 4.11465L5.09448 5.22018C5.00454 5.52585 5.19792 5.84011 5.52705 5.92313L6.12225 6.07328C6.45138 6.1563 6.79021 5.9763 6.88016 5.67063L7.20549 4.56509C7.29543 4.25942 7.10205 3.94516 6.77292 3.86213L6.17772 3.71198ZM5.20174 7.02862C4.87261 6.9456 4.53379 7.12557 4.44384 7.43124L4.11851 8.53681C4.02871 8.84198 4.22196 9.15672 4.55108 9.23974L5.14629 9.38989C5.47542 9.47291 5.81441 9.29235 5.90419 8.98727L6.22952 7.88169C6.31947 7.57603 6.12607 7.2618 5.79695 7.17877L5.20174 7.02862ZM4.22578 10.3452C3.89665 10.2622 3.55782 10.4422 3.46788 10.7479L3.14254 11.8535C3.05278 12.1585 3.24596 12.4734 3.57509 12.5564L4.1703 12.7066C4.49942 12.7896 4.83846 12.6089 4.92821 12.3039L5.25355 11.1983C5.3435 10.8926 5.15011 10.5784 4.82098 10.4954L4.22578 10.3452ZM3.24982 13.6618C2.92069 13.5788 2.58184 13.7589 2.4919 14.0645L2.16654 15.1701C2.07679 15.4751 2.27005 15.7898 2.59918 15.8728L3.19439 16.023C3.52352 16.106 3.86247 15.9256 3.95222 15.6206L4.27758 14.5149C4.36749 14.2094 4.17415 13.895 3.84502 13.812L3.24982 13.6618ZM13.2057 16.7665L6.06333 14.9648C5.73417 14.8818 5.54091 14.5671 5.63058 14.2624L7.908 6.52307C7.99812 6.21682 8.33678 6.03739 8.66594 6.12042L15.8083 7.92215C16.1369 8.00504 16.331 8.31886 16.2409 8.62511L13.9636 16.3639C13.8738 16.6691 13.5342 16.8494 13.2057 16.7665Z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:t,children:(0,a.jsx)("rect",{width:"22",height:"22",fill:"currentColor",transform:"translate(0 0.497803)"})})})]})}},48758:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(95155),r=n(3740);let i=e=>(0,a.jsx)(r.Icon,{width:6,height:6,viewBox:"0 0 22 22",fill:"none",...e,children:(0,a.jsx)("path",{d:"M16.1563 17.832H5.38542C3.21509 17.832 2.01953 16.6873 2.01953 14.6094V6.01562C2.01953 3.93766 3.21509 2.79297 5.38542 2.79297H8.9757C9.15431 2.79297 9.32577 2.86086 9.45143 2.98203L11.9467 5.37109H16.1563C18.3266 5.37109 19.5221 6.51578 19.5221 8.59375V14.6094C19.5221 16.6873 18.3266 17.832 16.1563 17.832ZM5.38542 4.08203C3.96995 4.08203 3.36589 4.66039 3.36589 6.01562V14.6094C3.36589 15.9646 3.96995 16.543 5.38542 16.543H16.1563C17.5717 16.543 18.1758 15.9646 18.1758 14.6094V8.59375C18.1758 7.23852 17.5717 6.66016 16.1563 6.66016H11.6684C11.4898 6.66016 11.3183 6.59226 11.1927 6.47109L8.6974 4.08203H5.38542Z",fill:"#C5C9D9"})})},58422:(e,t,n)=>{n.d(t,{P:()=>tp});var a=n(95155),r=n(12115),i=n(91073);let o=e=>{let[t,n]=(0,r.useState)(!1),a=(0,i.A)();e&&!t&&(a({title:"Error",description:"Something went wrong. Please refresh the page and try again.",type:i.k.error}),n(!0))};var l=n(71677),s=n(82431),c=n(2697);let d=(0,r.createContext)(void 0),u=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useManageTeamSubscriptionModalContext must be used within a ManageTeamSubscriptionModalProvider");return e},p=e=>{var t,n,i,u,p,h;let{children:m,selectedTeam:g,isOpen:f,onClose:x}=e,[v,C]=(0,r.useState)(null),{data:b}=(0,l.M)(null==g?void 0:g.id,null==g?void 0:g.plan),y=null==b?void 0:null===(t=b.matchingPlanHistory)||void 0===t?void 0:t.paymentPlatformSubscriptionDetails,{teamSchedule:S,downgradeType:j,isLoading:w,error:k}=(0,c.c)({scheduleId:(null==y?void 0:y.schedule)||void 0,teamUUID:null!==(u=g.akUUID)&&void 0!==u?u:"",currentSubscriptionPriceId:null!==(p=null==y?void 0:null===(i=y.items.data[0])||void 0===i?void 0:null===(n=i.price)||void 0===n?void 0:n.id)&&void 0!==p?p:"",currentSeatQuantity:null!==(h=g.planSeats)&&void 0!==h?h:3}),{data:T,error:L}=(0,s.H)();o(!!k||!!L);let I=(0,r.useCallback)(()=>{C(null),x()},[x]),E=(0,r.useMemo)(()=>({teamSchedule:S,downgradeType:j,teamPlanHistoryData:b,selectedTeam:g,currentFlow:v,onChangeCurrentFlow:C,isModalOpen:f,onModalClose:I,isTeamScheduleLoading:w,allTeamPlansDetails:T,allTeamPlansDetailsError:L}),[S,j,b,g,v,C,f,I,w,T,L]);return(0,a.jsx)(d.Provider,{value:E,children:m})};var h=n(58670),m=n(3740),g=n(75569),f=n(85821);let x={UPDATE_PAYMENT:"updatePayment",VIEW_INVOICES:"viewInvoices",CHANGE_SEATS:"changeSeats",SWITCH_PLAN:"switchPlan",RENEW_SUBSCRIPTION:"renewSubscription",CANCEL_SUBSCRIPTION:"cancelSubscription",DELETE_TEAM:"deleteTeam"},v={SELECT_PLAN:"selectPlan",CONFIRM_SWITCH:"confirmSwitch"};var C=n(64280),b=n(33785),y=n(97386),S=n(87333),j=n(68691),w=n(44334),k=n(67029),T=n(41259);let L=async e=>{try{var t;let n=await fetch(T._O,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...e,teamId:null===(t=e.teamId)||void 0===t?void 0:t.toString()})}),a=await n.json();if(500===n.status||403===n.status)return{errorMessage:a.message};if("subscription"!==a.subStatus)return{errorMessage:"did not receive expected subStatus of 'subscription'"};return a}catch(e){return{errorMessage:"Remove Team Plan subscription downgrade error: ".concat(e.message)}}},I=e=>{var t;let[n,a]=(0,r.useState)(!1),i=(0,j.j)(),o=(0,j.G)(e=>e.user.selectedTeam),{startPolling:l}=(0,w.Y)({teamId:null!==(t=e.id)&&void 0!==t?t:""});return{cancelPlanDowngrade:async()=>{a(!0);try{if(!e.id||!e.paymentPlatformId||!e.akUUID)return!1;if(await L({teamId:e.id,paymentPlatformId:e.paymentPlatformId}),!await l(e=>{var t;let{team:n,teamPlanHistory:a}=e,r=null==a?void 0:a.find(e=>e.plan===n.plan);return!(null==r?void 0:null===(t=r.paymentPlatformSubscriptionDetails)||void 0===t?void 0:t.schedule)}))throw Error("Failed to cancel plan downgrade");if(e.akUUID===o){var t;await i((0,k.T)(null!==(t=e.id)&&void 0!==t?t:"")).unwrap()}return!0}catch(e){return!1}finally{a(!1)}},isCancellingDowngrade:n}};var E=n(88663),P=n(85756),A=n(61579),D=n(39602);let M=e=>{let{onClick:t,isLoading:n,children:r}=e;return(0,a.jsx)(f.Button,{fontSize:"sm",variant:"link",textDecoration:"underline",textUnderlineOffset:.5,_hover:{textDecoration:"underline",fontWeight:600},onClick:t,isLoading:n,children:r})},R=e=>{var t,n;let{team:r,onModalClose:o,downgradeType:l,subscriptionDetails:s}=e,{cancelPlanDowngrade:c,isCancellingDowngrade:d}=I(r),u=(0,i.A)(),p=null==s?void 0:s.schedule,h="plan"===l||"both"===l,m=(null==s?void 0:s.status)==="canceled",g=(null==s?void 0:null===(t=s.cancellation_details)||void 0===t?void 0:t.reason)==="cancellation_requested"&&(null==s?void 0:s.status)==="active",f=null==s?void 0:s.items.data[0].price.id,x=null!==(n=null==s?void 0:s.cancel_at)&&void 0!==n?n:void 0,{renewSubscription:v,isRenewingSubscription:j}=(0,C.Z)(r,null!=o?o:()=>{}),{buyTeamPlanSubscription:w,isBuyingTeamPlan:k}=(0,E.h)(),T=async()=>{if(!r.id||!r.paymentPlatformId||!p||!r.akUUID){u({type:i.k.error,title:"Error",description:"Failed to cancel plan downgrade",variant:"errorOutline",position:"top",icon:(0,a.jsx)(y.A,{width:"100%",height:"100%",color:"content.negative"}),duration:9e3});return}await c()?(null==o||o(),u({description:"Your subscription is renewed",position:"bottom-right",type:i.k.info,duration:9e3})):u({type:i.k.error,title:"Error",description:"Failed to cancel plan downgrade",variant:"errorOutline",position:"top",icon:(0,a.jsx)(y.A,{width:"100%",height:"100%",color:"content.negative"}),duration:9e3})},L=(0,A.TZ)(x),R=function(e,t){return"plan"===e?"Your plan will be downgraded to ".concat(P.tC.STARTER," ").concat(t," "):"both"===e?"Your plan and seats will be downgraded ".concat(t):void 0}(l,(0,A.TZ)(r.planTokenRenewalDate?new Date(r.planTokenRenewalDate).getTime()/1e3:void 0)),U=h&&void 0!==R;return m||g||U?(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsx)(b._,{bannerBackground:"surface.info",borderRadius:"md",p:2,w:"100%",icon:(0,a.jsx)(S.A,{w:4,h:4,color:"content.primary",fill:"currentColor"}),heading:"Your subscription expires ".concat(L," "),button:(0,a.jsx)(M,{onClick:v,isLoading:j,children:"Renew Subscription"})}),m&&(0,a.jsx)(b._,{bannerBackground:"surface.info",borderRadius:"md",p:2,w:"100%",icon:(0,a.jsx)(S.A,{w:4,h:4,color:"content.primary",fill:"currentColor"}),heading:"Your subscription is expired",button:(0,a.jsx)(M,{onClick:()=>{var e,t,n,a;(0,D.H)(r.plan)&&w({plan:r.plan,seatQuantity:null!==(e=r.planSeats)&&void 0!==e?e:3,teamName:null!==(t=r.teamName)&&void 0!==t?t:"",teamUUID:null!==(n=r.akUUID)&&void 0!==n?n:"",renewSubTeamUUID:null!==(a=r.akUUID)&&void 0!==a?a:"",priceId:null!=f?f:""})},isLoading:k,children:"Renew Subscription"})}),U&&(0,a.jsx)(b._,{bannerBackground:"surface.info",borderRadius:"md",p:2,w:"100%",icon:(0,a.jsx)(S.A,{w:4,h:4,color:"content.primary"}),heading:R,button:(0,a.jsx)(M,{onClick:T,isLoading:d,children:"Cancel Change"})})]}):null};var U=n(7714),W=n(6058),F=n(78928),B=n(70711),H=n(72461),_=n(5112);let N=e=>{let{onClick:t,label:n,isLoading:r,dataTrackingId:i}=e;return(0,a.jsxs)(H._,{dataTrackingId:i,display:"flex",alignItems:"center",justifyContent:"flex-start",py:3,px:6,borderRadius:"md",width:"100%",backgroundColor:"background.darkblue",borderWidth:"px",borderColor:"border.greyBlue",rounded:"lg",onClick:t,gap:3,_hover:{backgroundColor:"background.greyblue"},isLoading:r,children:[(0,a.jsx)(h.Text,{fontSize:"sm",fontWeight:"medium",textAlign:"left",children:n}),(0,a.jsx)(m.Icon,{as:B.A,boxSize:5,ml:"auto"})]})},O=e=>{var t,n;let{onActionClick:r,showRenewSubscription:i,isRenewingSubscription:o,isUpdatingPaymentMethod:l,isLoadingInvoicesRedirect:s}=e,{downgradeType:c,teamPlanHistoryData:d,selectedTeam:p,onModalClose:m}=u(),v=null!==(n=null==p?void 0:p.plan)&&void 0!==n?n:P.EE.CUSTOM;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:(0,a.jsx)(h.Text,{fontWeight:600,fontSize:"lg",color:"light",textAlign:"center",children:"Manage Team Subscription"})}),(0,a.jsxs)(W.e,{p:10,gap:6,flexDir:"column",display:"flex",children:[(0,a.jsx)(R,{team:p,onModalClose:m,downgradeType:c,subscriptionDetails:null==d?void 0:null===(t=d.matchingPlanHistory)||void 0===t?void 0:t.paymentPlatformSubscriptionDetails}),(0,a.jsxs)(g.VStack,{spacing:"14px",my:"auto",alignItems:"flex-start",width:"100%",children:[(0,a.jsx)(h.Text,{mb:"18px",children:"How can we help you today?"}),(0,a.jsx)(N,{onClick:()=>r(x.UPDATE_PAYMENT),label:"Update Payment Method",isLoading:l,dataTrackingId:_.eiQ}),(0,a.jsx)(N,{onClick:()=>r(x.VIEW_INVOICES),label:"View Invoices",isLoading:s,dataTrackingId:_.WpC}),(0,a.jsx)(N,{onClick:()=>r(x.CHANGE_SEATS),label:"Add/Remove Seats",dataTrackingId:_.r$1}),v!==P.EE.PRO&&(0,a.jsx)(N,{onClick:()=>r(x.SWITCH_PLAN),label:"Switch Subscription",dataTrackingId:_.C2g}),i?(0,a.jsx)(N,{onClick:()=>r(x.RENEW_SUBSCRIPTION),label:"Renew Subscription",isLoading:o,dataTrackingId:_.zYw}):(0,a.jsx)(N,{onClick:()=>r(x.CANCEL_SUBSCRIPTION),label:"Cancel Subscription",dataTrackingId:_.SVS}),(0,a.jsx)(N,{onClick:()=>r(x.DELETE_TEAM),label:"Delete Team",dataTrackingId:_.TWL})]})]}),(0,a.jsx)(F.D,{children:(0,a.jsx)(f.Button,{variant:"outline",height:"2.75rem",onClick:m,minW:{base:"full",md:"12.5rem"},maxW:{md:"22.5rem"},w:"100%",cursor:"pointer",fontSize:"sm",fontWeight:500,bgColor:"background.darkblue",children:"Close"})})]})};var z=n(59108),V=n(8614);let Y=()=>{let{onModalClose:e}=u();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:"Manage Team Subscription"}),(0,a.jsxs)(W.e,{direction:"column",margin:"auto",alignItems:"center",justifyContent:"center",p:6,gap:10,textAlign:"center",children:[(0,a.jsxs)(z.Flex,{gap:5,direction:"column",width:{base:"full",sm:"25.94rem"},children:[(0,a.jsxs)(h.Text,{fontWeight:500,color:"white",fontSize:"1rem",children:["Need assistance with your"," ",(0,a.jsx)(h.Text,{as:"span",variant:"gradient",children:"Team Plan"}),"?"]}),(0,a.jsx)(h.Text,{fontWeight:400,color:"content.secondary",fontSize:"sm",children:"In our FAQs, you'll find answers to commonly asked questions to help you quickly find the information you need. If you have any further questions or require additional assistance, please feel free to contact us directly. We're here to help!"})]}),(0,a.jsxs)(z.Flex,{gap:6,alignItems:"flex-start",children:[(0,a.jsx)(f.Button,{variant:"glowBuy",height:0,minHeight:"2.25rem",paddingX:4,paddingY:2,fontWeight:500,fontSize:"sm",backgroundColor:"background.darkblue",as:"a",href:V.O.faq,target:"_blank",children:"Visit FAQs"}),(0,a.jsx)(f.Button,{variant:"glowBuy",height:0,minHeight:"2.25rem",paddingX:4,paddingY:2,fontWeight:500,fontSize:"sm",backgroundColor:"background.darkblue",as:"a",href:V.O.contact,target:"_blank",children:"Contact Us"})]})]}),(0,a.jsx)(F.D,{children:(0,a.jsx)(f.Button,{variant:"outline",height:11,onClick:e,minW:{base:"full",md:"12.5rem"},maxW:{md:"22.5rem"},w:"100%",cursor:"pointer",fontSize:"sm",fontWeight:500,bgColor:"background.darkblue",children:"Close"})})]})};var Z=n(64430),G=n(58727),q=n(37716);let X=e=>{let{icon:t,label:n}=e;return(0,a.jsx)(G.HStack,{width:"100%",children:(0,a.jsxs)(z.Flex,{justify:"flex-start",align:"center",children:[(0,a.jsx)(q.A,{color:"content.negative",mr:3,boxSize:{base:6,md:8}}),(0,a.jsx)(t,{color:"content.secondary",boxSize:5,mr:2}),(0,a.jsx)(h.Text,{color:"content.secondary",fontSize:{base:"sm",md:"1rem"},align:"left",children:n})]})})};var Q=n(95518),$=n(66341),J=n(58812),K=n(48461),ee=n(30309),et=n(56496),en=n(48758),ea=n(49832),er=n(22252),ei=n(66415),eo=n(28166);let el=async e=>{let{paymentPlatformId:t,teamId:n}=e,a=await fetch(T.pU,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({paymentPlatformId:t,teamId:null==n?void 0:n.toString()})}),r=await a.json();return[400,403,500].includes(a.status)?{errorMessage:"".concat("[team cancel plan]",": ").concat(r.message)}:r},es=(e,t,n)=>e({title:t,description:n,variant:"errorOutline",position:"top",icon:(0,a.jsx)(y.A,{width:"100%",height:"100%",color:"content.negative"}),duration:5e3}),ec=()=>{var e;let{selectedTeam:t,onModalClose:n,onChangeCurrentFlow:o,allTeamPlansDetails:l}=u(),[s,c]=(0,r.useState)(!1),d=(0,i.A)(),p=(0,j.j)(),m=(0,j.G)(e=>e.user.selectedTeam),x=async()=>{if(m===t.akUUID){var e;await p((0,k.T)(null!==(e=t.id)&&void 0!==e?e:"")).unwrap()}c(!1),n(),d({description:"Your team subscription has been scheduled for cancellation",type:i.k.info,position:"bottom-right"})},{startPolling:v}=(0,w.Y)({teamId:null!==(e=t.id)&&void 0!==e?e:"",onSuccess:x,onError:e=>{c(!1),es(d,"Error","Failed to check subscription status"),console.error("Polling error:",e)}}),C=async()=>{if(!t.id||!t.paymentPlatformId){es(d,"Error","Team ID is missing");return}try{c(!0);let e=await el({teamId:BigInt(t.id),paymentPlatformId:t.paymentPlatformId});if(e.errorMessage){es(d,"Something went wrong",(0,a.jsxs)(a.Fragment,{children:["Failed to fetch team data. Please refresh and try again. If the error persists,"," ",(0,a.jsx)(Z.Link,{isExternal:!0,href:V.O.contact,target:"_blank",color:"content.negative",fontWeight:600,children:"Contact Us"})," "]}));return}"subscriptionWithPendingCancellation"===e.subStatus?v(e=>{var n;let{teamPlanHistory:a}=e,r=null==a?void 0:a.find(e=>e.plan===t.plan),i=null==r?void 0:r.paymentPlatformSubscriptionDetails;return(null==i?void 0:null===(n=i.cancellation_details)||void 0===n?void 0:n.reason)==="cancellation_requested"}):es(d,"Error","No active subscription found")}catch(e){es(d,"Error","Failed to cancel subscription")}},b=(()=>{let e=t.planTokenRenewalDate;return e?(0,A.FU)(new Date(e)):(0,A.FU)(new Date)})(),y=function(e,t){if(!e||void 0===t.planSeats||null===t.planSeats)return 0;if(!(0,eo.CG)(t.plan))return t.rolloverTokens;let n=e[t.plan];return n.rolloverTokens&&t.planSeats?n.rolloverTokens*t.planSeats:0}(l,t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:(0,a.jsx)(h.Text,{fontWeight:600,fontSize:"lg",color:"light",textAlign:"center",children:"Cancel Team Subscription"})}),(0,a.jsxs)(W.e,{p:10,margin:"auto",flexDir:"column",children:[(0,a.jsx)(h.Text,{align:"left",fontSize:{base:"sm",lg:"1rem"},children:(0,er.s_)("**Are you sure?** Your team will [[lose]] access to AI tools on **".concat(b,"**, and will also [[lose]] any **banked rollover tokens**.")).map((e,t)=>(0,a.jsx)(h.Text,{as:"span",fontWeight:"bold"===e.type?"bold":"normal",color:"highlight"===e.type?"content.negative":"inherit",children:e.text},"".concat(e.text,"-").concat(t)))}),(0,a.jsxs)(g.VStack,{align:"flex-start",spacing:2,width:"100%",py:5,children:[(0,a.jsx)(X,{icon:$.A,label:"Unlimited Image Generations"}),(0,a.jsx)(X,{icon:J.A,label:"Unlimited Realtime Generations"}),(0,a.jsx)(X,{icon:K.A,label:"Motion Videos Without Watermarks"}),(0,a.jsx)(X,{icon:ee.A,label:"Leonardo Alchemy & Photoreal Pipelines"}),(0,a.jsx)(X,{icon:et.A,label:"Private Generations"}),(0,a.jsx)(X,{icon:en.A,label:"Collections & Organisation"}),(0,a.jsx)(X,{icon:ea.A,label:"Rollover Bank Capacity of ".concat((0,ei.HY)(y))})]}),(0,a.jsx)(Q.o,{rolloverTokens:t.rolloverTokens})]}),(0,a.jsxs)(F.D,{children:[(0,a.jsx)(f.Button,{variant:"primary",height:"2.75rem",onClick:()=>o(null),minW:{base:"full",md:"12.5rem"},w:"100%",maxW:{md:"22.5rem"},fontSize:"sm",fontWeight:500,bgColor:"background.darkblue",children:"I've changed my mind"}),(0,a.jsx)(f.Button,{height:"2.75rem",onClick:C,minW:{base:"full",md:"12.5rem"},w:"100%",maxW:{md:"22.5rem"},fontSize:"sm",isLoading:s,fontWeight:500,bgColor:"content.negative",_hover:{bgColor:"surface.primary",borderColor:"borderNew.primary"},children:"Yes, cancel my subscription"})]})]})};var ed=n(33636),eu=n(35695),ep=n(62819),eh=n(88833),em=n(68466),eg=n(19321),ef=n(89929),ex=n(69122),ev=n(94926),eC=n(62618);let eb=()=>{var e;let{selectedTeam:t,onModalClose:n,onChangeCurrentFlow:i}=u(),[o,s]=(0,r.useState)(""),{updateTeam:c,isUpdatingTeam:d}=(0,ev.k)(),{toast:p}=(0,ef.x)(),f=(0,eu.useRouter)(),x=(0,j.j)(),{resetSelectedTeam:v}=(0,ex.s)(),C=o===(null==t?void 0:t.teamName),{data:b}=(0,l.M)(null==t?void 0:t.id,null==t?void 0:t.plan),y=null==b?void 0:null===(e=b.matchingPlanHistory)||void 0===e?void 0:e.paymentPlatformSubscriptionDetails,S=(null==y?void 0:y.status)==="canceled",w=(null==t?void 0:t.plan)&&P.tC[null==t?void 0:t.plan],k=()=>{p({duration:7e3,type:"floating",isClosable:!0,title:"Your team has been deleted",description:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.Text,{children:["Your team ",t.teamName," has been deleted from Leonardo.Ai "]}),(0,a.jsxs)(h.Text,{children:["For assistance, please"," ",(0,a.jsx)(h.Text,{as:"span",children:(0,a.jsx)(Z.Link,{href:V.O.contact,target:"_blank",color:"content.negative",fontWeight:600,children:"Contact\xa0Us"})})]})]}),status:"notification",position:"top"})},T=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(h.Text,{children:["Please refresh and try again. If the error persists,"," ",(0,a.jsx)(h.Text,{as:"span",children:(0,a.jsx)(Z.Link,{href:V.O.contact,target:"_blank",color:"content.negative",fontWeight:600,children:"Contact\xa0Us"})})]})}),L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T();p({title:e,description:t,status:"error",type:"floating",position:"top",duration:7e3,isClosable:!0})},I=async e=>{if(e&&C){try{if(!await c(e,"isDeleted",!0)){L("Failed to delete team");return}n(),v()}catch(e){L();return}try{await x((0,eC.LZ)()),f.push(eg.a.HOME),k()}catch(e){f.refresh()}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:(0,a.jsx)(h.Text,{fontWeight:600,fontSize:"lg",color:"light",textAlign:"center",children:"Delete Team"})}),(0,a.jsxs)(W.e,{p:10,margin:"auto",flexDir:"column",children:[(0,a.jsxs)(h.Text,{align:"left",fontWeight:500,fontSize:{base:"md",lg:"lg"},mb:4,children:["Do you really want to delete your team ",null==t?void 0:t.teamName,"?"]}),(0,a.jsxs)(h.Text,{fontSize:{base:"sm",lg:"md"},color:"content.secondary",children:["Deleting your team will"," ",(0,a.jsxs)(h.Text,{as:"span",color:"content.negative",children:["permanently remove all members of ",null==t?void 0:t.teamName," and their data"]})," ","from our database. This action cannot be undone."]}),(0,a.jsxs)(g.VStack,{mt:6,align:"flex-start",width:"100%",spacing:6,children:[!S&&(0,a.jsxs)(z.Flex,{bg:"surface.primary",p:4,borderRadius:"lg",alignItems:"center",gap:3,border:"1px solid",borderColor:"borderNew.warning",width:"100%",children:[(0,a.jsx)(m.Icon,{as:ep.A,color:"content.warning",boxSize:5}),(0,a.jsxs)(h.Text,{fontSize:"sm",fontWeight:400,color:"content.primary",children:["Your ",w," subscription for ",null==t?void 0:t.teamName," will be terminated, resulting in the"," ",(0,a.jsx)(h.Text,{as:"span",fontWeight:600,children:"immediate loss of access to your team and all associated tokens."})]})]}),(0,a.jsxs)(g.VStack,{align:"flex-start",width:"100%",children:[(0,a.jsx)(X,{icon:$.A,label:"All Uploaded Images"}),(0,a.jsx)(X,{icon:eh.A,label:"All Generated Images & Videos"}),(0,a.jsx)(X,{icon:en.A,label:"All Collections"}),(0,a.jsx)(X,{icon:em.A,label:"All Datasets & Trained Models"}),(0,a.jsx)(X,{icon:ea.A,label:"All Fast & Banked Tokens"})]}),(0,a.jsxs)(g.VStack,{align:"flex-start",spacing:2,children:[(0,a.jsxs)(h.Text,{align:"left",fontWeight:500,fontSize:{base:"sm",lg:"md"},children:["Type your team name,"," ",(0,a.jsx)(h.Text,{as:"span",color:"content.negative",children:null==t?void 0:t.teamName}),", to confirm."]}),(0,a.jsx)(ed.Input,{placeholder:"".concat(null==t?void 0:t.teamName),value:o,onChange:e=>{s(e.target.value)},width:"100%",bg:"surface.inputDefault",borderRadius:"lg",border:"none",size:"lg",maxW:"22rem",color:"content.primary",_placeholder:{color:"content.tertiary"}})]})]})]}),(0,a.jsxs)(F.D,{children:[(0,a.jsx)(H._,{dataTrackingId:_.iHo,variant:"primary",height:"2.75rem",onClick:()=>i(null),minW:{base:"full",md:"12.5rem"},w:"100%",fontSize:"sm",fontWeight:500,bgColor:"background.darkblue",children:"I've changed my mind"}),(0,a.jsx)(H._,{dataTrackingId:_.uNW,height:"2.75rem",onClick:()=>{var e;return I(null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"")},minW:{base:"full",md:"12.5rem"},w:"100%",fontSize:"sm",isLoading:d,isDisabled:!C,fontWeight:500,bgColor:"surface.negative",_hover:C?{bgColor:"surface.negativeHover"}:void 0,style:{pointerEvents:C?"auto":"none"},children:"Yes, delete my team"})]})]})};var ey=n(55999),eS=n(63615);let ej=e=>{let t=(0,i.A)(),n=(0,eS.c)(),[a,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{let a=await n(e);if(a.error){t({description:a.error.message,type:i.k.error,position:"top"});return}o(a.teamPlanDetails)}catch(e){t({description:"An error occurred while fetching your team plan details. Please try again later.",type:i.k.error,position:"top"})}})()},[e,t,n]),a};var ew=n(76765);let ek=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:"Manage Team Seats"}),(0,a.jsxs)(W.e,{flexDir:"column",justifyContent:"center",alignItems:"center",textAlign:"center",children:[(0,a.jsx)(ew.a,{}),(0,a.jsx)(h.Text,{mt:6,color:"white",fontSize:"1rem",fontWeight:600,children:"Loading..."})]})]});var eT=n(98464),eL=n(60987);let eI=e=>{var t,n;let{planDetails:o,isDowngradingPlan:l}=e,{selectedTeam:s,onModalClose:c,onChangeCurrentFlow:d,teamSchedule:p}=u(),{teamsInvites:m}=(0,eT.A)((null==s?void 0:s.id)||""),{startPolling:g}=(0,w.Y)({teamId:null!==(n=s.id)&&void 0!==n?n:""}),x=null==p?void 0:null===(t=p.scheduledSub)||void 0===t?void 0:t.quantity,v=s.planSeats,C=(null==m?void 0:m.length)>0?m.filter(e=>null===e.dateAccepted&&null===e.dateDeclined).length:0,b=s.members.length+C,y=(0,i.A)(),S=(0,j.j)(),[k,T]=(0,r.useState)(!1),I=null;s.planTokenRenewalDate&&(I=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(s.planTokenRenewalDate)));let E=async()=>{if(!s.id)throw Error("No id defined for team");if(!s.paymentPlatformId)throw Error("No seats in team");T(!0);try{let e=await L({paymentPlatformId:s.paymentPlatformId,teamId:s.id});if(e.errorMessage){y({description:e.errorMessage,type:i.k.error,position:"top"});return}if(!await g(e=>{var t;let{team:n,teamPlanHistory:a}=e,r=null==a?void 0:a.find(e=>e.plan===n.plan);return!(null==r?void 0:null===(t=r.paymentPlatformSubscriptionDetails)||void 0===t?void 0:t.schedule)}))throw Error("Failed to cancel plan downgrade");c(),S((0,eC.LZ)())}catch(e){console.error("Error cancelling scheduled change",e)}finally{T(!1)}},P=async()=>{T(!0);try{if(v){if(!x)throw Error("No seats in scheduled change")}else throw Error("No seats in previous plan");if(b>v)throw Error("Too many seats are currently being used. Please remove some seats before proceeding.");let e=await (0,eL.$)({existingPlan:o,newPlan:o,team:s,planSeats:v});if(e.errorMessage){y({description:e.errorMessage,type:i.k.error,position:"top"});return}let t=x-v,n=Math.abs(t),a=v>x;if(a?y({description:"".concat(n," seat").concat(1!==n?"s have":" has"," been added to your plan"),position:"bottom-right"}):y({description:"".concat(n," seat").concat(1!==n?"s have":" has"," been scheduled to be removed from your plan"),position:"bottom-right"}),a&&!await g(e=>{var t;let{teamPlanHistory:n}=e,a=null==n?void 0:n.find(e=>e.plan===s.plan);return(null==a?void 0:null===(t=a.paymentPlatformSubscriptionDetails)||void 0===t?void 0:t.quantity)===v}))throw Error("Failed to poll for team update");c(),S((0,eC.LZ)())}catch(e){console.error("Error updating team seats",e),y({description:"An error occurred while updating your team seats. Please try again later.",type:i.k.error,position:"top"})}finally{T(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:"Manage Team Seats"}),(0,a.jsxs)(W.e,{direction:"column",margin:"auto",alignItems:"center",justifyContent:"center",p:6,gap:10,textAlign:"center",children:[(0,a.jsxs)(z.Flex,{gap:5,direction:"column",width:{base:"full",sm:"25.94rem"},children:[(0,a.jsx)(h.Text,{fontWeight:500,color:"white",fontSize:"1rem",children:l?"Your plan is currently scheduled to be updated":"You have a scheduled change in team seats"}),(0,a.jsxs)(h.Text,{fontWeight:400,color:"content.secondary",fontSize:"sm",children:["Changes will be effective at the beginning of next billing cycle:",(0,a.jsx)("br",{}),(0,a.jsx)(h.Text,{as:"span",color:"white",children:I})]}),(0,a.jsx)(h.Text,{fontWeight:400,color:"content.secondary",fontSize:"sm",children:l?"If you wish to make further changes to your plan, please cancel the currently scheduled request.":"If you wish to make further changes, please select from the following options."})]}),(0,a.jsxs)(z.Flex,{gap:6,alignItems:"flex-start",children:[l&&(0,a.jsx)(f.Button,{variant:"glowBuy",height:0,minHeight:"2.25rem",paddingX:4,paddingY:2,fontWeight:500,fontSize:"sm",backgroundColor:"background.darkblue",onClick:E,isDisabled:k,isLoading:k,children:"Cancel Change"}),!l&&(0,a.jsx)(f.Button,{variant:"glowBuy",height:0,minHeight:"2.25rem",paddingX:4,paddingY:2,fontWeight:500,fontSize:"sm",backgroundColor:"background.darkblue",onClick:P,isDisabled:k,isLoading:k,children:"Restore All"}),!l&&(0,a.jsx)(f.Button,{variant:"glowBuy",height:0,minHeight:"2.25rem",paddingX:4,paddingY:2,fontWeight:500,fontSize:"sm",backgroundColor:"background.darkblue",onClick:e.onNext,isDisabled:k,children:"Edit Change"})]})]}),(0,a.jsx)(F.D,{children:(0,a.jsx)(f.Button,{variant:"outline",height:11,onClick:()=>d(null),minW:{base:"full",md:"12.5rem"},maxW:{md:"22.5rem"},w:"100%",cursor:"pointer",fontSize:"sm",fontWeight:500,bgColor:"background.darkblue",children:"Go Back"})})]})};var eE=n(6874),eP=n.n(eE),eA=n(12466);let eD=(e,t,n,a,r)=>{let i=0;return r===P.EE.CUSTOM?(null!=t?t:0)*eA._:r===P.EE.PRO?a*n*eA._:e*a},eM=(e,t,n,a,r)=>{let i=0;return r===P.EE.CUSTOM?null!=t?t:0:r===P.EE.PRO?a*n:e*a},eR=e=>{let{planName:t,newRecurringPrice:n,newSeats:a,oldSeats:r,newPlan:i,teamFastTokensAvailable:o,dealTokensPerSeat:l,rolloverTokensPerSeat:s,fastTokensPerSeat:c,planCustomTokenRenewalAmount:d}=e,u="$".concat((null!=n?n:0).toFixed(2)," / month"),p=eD(s,d,l,r,i),h=eM(c,d,l,r,i),m=eD(s,d,l,a,i),g=eM(c,d,l,a,i),f=Math.min(o,g),x=a<r?s*(r-a):0,v=m-p,C=(g||o)-h;return{name:t,rightSideHeading:{value:"".concat(a," Seat").concat(1!==a?"s":""),difference:a!==r?a-r:void 0},items:[{label:"Base price",value:u},{label:"Team fast tokens",value:"".concat(f.toLocaleString(),"/").concat(g.toLocaleString()),difference:C||void 0},{label:"Rollover bank capacity",value:m.toLocaleString(),difference:v||void 0},{label:"Potential tokens lost",difference:-x,tooltipMessage:"The amount of tokens that will be lost if you update the seat count"}]}},eU=e=>{let{planName:t,oldSeats:n,oldRecurringPrice:a,planRolloverTokens:r,teamFastTokensAvailable:i,rolloverTokensPerSeat:o,fastTokensPerSeat:l,dealTokensPerSeat:s,oldPlan:c,planCustomTokenRenewalAmount:d}=e,u=eD(o,d,s,n,c),p=eM(l,d,s,n,c);return{name:t,rightSideHeading:{value:"".concat(n," Seat").concat(1!==n?"s":"")},items:[{label:"Base price",value:"$".concat((null!=a?a:0).toFixed(2)," / month")},{label:"Team fast tokens",value:"".concat(i.toLocaleString(),"/").concat(p.toLocaleString())},{label:"Rollover bank capacity",value:u.toLocaleString()},{label:"Current rollover tokens",value:r?r.toLocaleString():"0",tooltipMessage:"The number of tokens that will rollover to the next month."}]}};var eW=n(77700),eF=n(57599),eB=n(31034);let eH=e=>{let{item:t}=e;return(0,a.jsxs)(z.Flex,{justifyContent:"space-between",gap:3,children:[(0,a.jsxs)(h.Text,{children:[t.label,t.tooltipMessage&&(0,a.jsx)(eF.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",background:"surface.popover",fontSize:"md",label:t.tooltipMessage,children:(0,a.jsx)(eW.Box,{display:"inline",marginLeft:1,children:(0,a.jsx)(eB.A,{"aria-label":t.tooltipMessage,color:"content.secondary"})})})]}),(0,a.jsxs)(z.Flex,{gap:1,textAlign:"right",children:[t.difference&&(0,a.jsx)(h.Text,{color:t.difference>=0?"content.positive":"content.negative",children:(0,er.r5)(t.difference,!!t.value)}),t.value&&(0,a.jsx)(h.Text,{children:t.value})]})]})},e_=e=>{let{heading:t,rightSideHeading:n,items:r}=e,i=(0,er.s_)(t);return(0,a.jsxs)(eW.Box,{children:[(0,a.jsxs)(z.Flex,{justifyContent:"space-between",gap:3,fontSize:"lg",fontWeight:500,children:[(0,a.jsx)(z.Flex,{gap:1,children:i.map(e=>(0,a.jsx)(h.Text,{..."highlight"===e.type&&{variant:"gradient",fontWeight:700},children:e.text},"heading-segment-".concat(e.text)))}),(0,a.jsxs)(z.Flex,{gap:1,children:[(null==n?void 0:n.difference)&&(0,a.jsx)(h.Text,{color:n.difference>=0?"content.positive":"content.negative",children:(0,er.r5)(n.difference)}),(null==n?void 0:n.value)&&(0,a.jsx)(h.Text,{children:n.value})]})]}),(0,a.jsx)(eW.Box,{fontSize:"sm",fontWeight:400,color:"content.secondary",children:r.map(e=>(0,a.jsx)(eH,{item:e},"item-".concat(e.label)))})]})},eN=e=>{let{fromSubscription:t,toSubscription:n,...r}=e;return(0,a.jsxs)(z.Flex,{borderWidth:"px",gap:4,borderColor:"border.greyBlue",borderRadius:4,flexDirection:"column",padding:6,...r,children:[(0,a.jsx)(e_,{heading:"From [[".concat(t.name,"]]"),rightSideHeading:t.rightSideHeading,items:t.items}),(0,a.jsx)(eW.Box,{w:"100%",h:"px",bg:"border.greyBlue"}),(0,a.jsx)(e_,{heading:"To [[".concat(n.name,"]]"),rightSideHeading:n.rightSideHeading,items:n.items})]})},eO=e=>{let{oldSeats:t,newSeats:n,oldRecurringPrice:r,newRecurringPrice:i,oldPlan:o,newPlan:l,teamFastTokens:s,teamRolloverTokens:c,dealTokensPerSeat:d,rolloverTokensPerSeat:u,fastTokensPerSeat:p,planCustomTokenRenewalAmount:h}=e,m=P.EE.CUSTOM,g=P.tC[null!=o?o:m],f=P.tC[null!=l?l:m],x=eU({planRolloverTokens:c,teamFastTokensAvailable:s,planName:g,oldRecurringPrice:r,oldSeats:t,rolloverTokensPerSeat:u,fastTokensPerSeat:p,dealTokensPerSeat:d,oldPlan:null!=o?o:m,planCustomTokenRenewalAmount:h}),v=eR({teamFastTokensAvailable:s,planName:f,newPlan:null!=l?l:m,newRecurringPrice:i,oldSeats:t,newSeats:n,dealTokensPerSeat:d,rolloverTokensPerSeat:u,fastTokensPerSeat:p,planCustomTokenRenewalAmount:h});return(0,a.jsx)(eN,{fromSubscription:x,toSubscription:v})};var ez=n(25274),eV=n(76838);let eY=e=>{let{seats:t,newSeats:n,nextBillingDate:r}=e;return t===n?(0,a.jsx)(z.Flex,{alignItems:"center",justifyContent:"center",minHeight:20,children:(0,a.jsxs)(h.Text,{textAlign:"center",color:"white",fontWeight:400,children:["Have questions about managing team seats? Visit our\xa0",(0,a.jsx)(Z.Link,{as:eP(),href:V.O.faq,target:"_blank",fontWeight:600,variant:"gradient",children:"FAQ's"})," ","for more details."]})}):(0,a.jsx)(z.Flex,{alignItems:"flex-start",minHeight:20,children:(0,a.jsxs)(z.Flex,{p:"2.5",bg:"#5555C9",rounded:"4",fontSize:"sm",textAlign:"left",gap:2,alignItems:"center",color:"white",children:[(0,a.jsx)(ez.A,{boxSize:4}),(0,a.jsx)(h.Text,{children:n>t?"Adding seats to your team takes effect immediately. Your nominated card will be charged on a pro-rata basis, with no changes to the billing cycle.":"Your current billing cycle duration will remain unchanged. Changes take effect at the end of your billing cycle".concat(r?" (".concat(r,")"):"",".")})]})})},eZ=e=>{var t,n,o,l,s,c,d;let{initialSeats:p,planDetails:m}=e,{selectedTeam:g,onModalClose:x,onChangeCurrentFlow:v}=u(),C=(0,i.A)(),b=(0,j.j)(),[y,S]=(0,r.useState)(!1),{teamsInvites:k}=(0,eT.A)((null==g?void 0:g.id)||""),T=(0,r.useRef)(void 0),{startPolling:L}=(0,w.Y)({teamId:null!==(t=g.id)&&void 0!==t?t:""}),{dealTokensPerSeat:I}=(0,eA.Q)(),[E,P]=(0,r.useState)(p),A=null!==(n=g.planSeats)&&void 0!==n?n:0,D=E>=A,M=null!==(o=m.price)&&void 0!==o?o:0,R=A*M/100,B=E*M/100,H=D?B-R:0,_=(null==k?void 0:k.length)>0?k.filter(e=>null===e.dateAccepted&&null===e.dateDeclined).length:0,N=g.members.length+_,O=null;g.planTokenRenewalDate&&(O=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(g.planTokenRenewalDate)));let V=async e=>{if(e<N){var t;let e=new URL(window.location.href);e.searchParams.set("callback_type","manage"),e.searchParams.set("teamUUID",null!==(t=null==g?void 0:g.akUUID)&&void 0!==t?t:"");let n="".concat(eg.a.TEAM_SETTINGS,"?").concat(e.searchParams.toString()),r={id:T.current||Date.now().toString(),title:"Seats that are taken cannot be removed",description:(0,a.jsxs)(a.Fragment,{children:["To remove more seats, remove their occupants first in ",(0,a.jsx)(Z.Link,{href:n,onClick:()=>{x()},color:"alertmuted",fontWeight:600,children:"Manage Members"})," "]}),type:i.k.error,position:"top",variant:"customWarning",icon:(0,a.jsx)(ep.A,{width:"100%",height:"100%",color:"alertmuted"}),duration:7e3,containerStyle:{maxWidth:"xl"}};T.current=r.id,C(r);return}P(e)},Y=async()=>{S(!0);try{let e=await (0,eL.$)({existingPlan:m,newPlan:m,team:g,planSeats:E});if(e.errorMessage){C({description:e.errorMessage,type:i.k.error,position:"top"});return}if(D&&!await L(e=>{var t;let{teamPlanHistory:n}=e,a=null==n?void 0:n.find(e=>e.plan===g.plan);return(null==a?void 0:null===(t=a.paymentPlatformSubscriptionDetails)||void 0===t?void 0:t.quantity)===E}))throw Error("Failed to poll for team update");x(),D?C({description:"".concat(E-A," seat").concat(E-A!=1?"s have":" has"," been added to your plan"),position:"bottom-right"}):C({description:"".concat(A-E," seat").concat(A-E!=1?"s have":" has"," been scheduled to be removed from your plan"),position:"bottom-right"}),b((0,eC.LZ)())}catch(e){console.error("Error updating team seats",e),C({description:"An error occurred while updating your team seats. Please try again later.",type:i.k.error,position:"top"})}finally{S(!1)}},G=E===A||y;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:"Manage Team Seats"}),(0,a.jsx)(W.e,{direction:"column",margin:"auto",alignItems:"center",p:6,children:(0,a.jsxs)(z.Flex,{flexDir:"column",flex:1,gap:"5",width:"100%",children:[(0,a.jsxs)(z.Flex,{alignItems:"center",justifyContent:"center",flex:1,gap:6,children:[(0,a.jsx)(h.Text,{children:"Number of Seats"}),(0,a.jsx)(eV.z,{isDisabled:y,value:E,onChange:V,width:"unset",flex:"0",min:ey.sM,max:ey.ei,step:1})]}),(0,a.jsx)(eO,{oldRecurringPrice:R,newRecurringPrice:B,oldPlan:g.plan,newPlan:g.plan,oldSeats:A,newSeats:E,teamFastTokens:null!==(l=g.subscriptionTokens)&&void 0!==l?l:0,teamRolloverTokens:g.rolloverTokens,dealTokensPerSeat:null!=I?I:0,rolloverTokensPerSeat:null!==(s=m.rolloverTokens)&&void 0!==s?s:0,fastTokensPerSeat:null!==(c=m.fastTokens)&&void 0!==c?c:0,planCustomTokenRenewalAmount:null!==(d=g.planCustomTokenRenewalAmount)&&void 0!==d?d:0}),(0,a.jsxs)(z.Flex,{justifyContent:"space-between",alignItems:"center",px:"6",children:[(0,a.jsx)(h.Text,{fontWeight:400,color:"white",children:D?"Amount due now":O?"Amount due on ".concat(O):""}),(0,a.jsxs)(h.Text,{color:"white",fontWeight:600,children:["$",D?(null!=H?H:0).toFixed(2):B.toFixed(2)]})]}),(0,a.jsx)(eY,{seats:A,newSeats:E,nextBillingDate:O})]})}),(0,a.jsx)(F.D,{children:(0,a.jsxs)(z.Flex,{height:"2.75rem",gap:3,width:"100%",children:[(0,a.jsx)(f.Button,{onClick:()=>v(null),height:"100%",w:"100%",variant:"primary",children:"Go Back"}),(0,a.jsx)(f.Button,{onClick:Y,height:"100%",w:"100%",variant:"gradient",isDisabled:G,isLoading:y,children:"Confirm"})]})})]})};var eG=function(e){return e.ScheduledChangesStep="SCHEDULED_CHANGES_STEP",e.SeatSelectionStep="SEAT_SELECTION_STEP",e}(eG||{});let eq=()=>{var e,t,n,i,o;let{selectedTeam:l,teamSchedule:s,isTeamScheduleLoading:c}=u(),[d,p]=(0,r.useState)(null),h=(null==s?void 0:s.isPendingDowngrade)||!1,{plan:m,quantity:g}=null!==(t=null==s?void 0:s.currentSub)&&void 0!==t?t:{},{plan:f,quantity:x}=null!==(n=null==s?void 0:s.scheduledSub)&&void 0!==n?n:{},v=h&&g!==x,C=h&&m!==f;(0,r.useEffect)(()=>{!d&&!c&&(v||C?p("SCHEDULED_CHANGES_STEP"):p("SEAT_SELECTION_STEP"))},[c,v,C,d]);let b=ej(l.plan);if(!d||!b||c)return(0,a.jsx)(ek,{});if("SCHEDULED_CHANGES_STEP"===d)return(0,a.jsx)(eI,{planDetails:b,onNext:()=>p("SEAT_SELECTION_STEP"),isDowngradingSeats:v,isDowngradingPlan:C});let y=null!==(o=null!==(i=null==s?void 0:null===(e=s.scheduledSub)||void 0===e?void 0:e.quantity)&&void 0!==i?i:l.planSeats)&&void 0!==o?o:ey.sM;return(0,a.jsx)(eZ,{initialSeats:y,planDetails:b})};var eX=n(94226);let eQ=e=>{let{children:t}=e;return(0,a.jsxs)(z.Flex,{p:2.5,bg:"background.notification",rounded:4,fontSize:"sm",textAlign:"left",gap:2,alignItems:"center",color:"white",children:[(0,a.jsx)(ez.A,{boxSize:4}),(0,a.jsx)(h.Text,{children:t})]})};function e$(e){return"".concat(e," Seat").concat(1!==e?"s":"")}function eJ(e){return"$".concat((e/100).toFixed(2))}function eK(e,t){return"".concat(eJ(e)," / ").concat(t)}function e1(e){return(0,er.r9)(e,"~",9,0)}function e0(e){return(0,er.r9)(e,"~",9,0)}function e5(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}let e6="month",e7=e=>{let{nextBillingDate:t,price:n}=e;return(0,a.jsxs)(z.Flex,{justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(h.Text,{fontWeight:400,color:"white",children:["Amount due on ",t]}),(0,a.jsx)(h.Text,{color:"white",fontWeight:600,children:eJ(n)})]})},e2=e=>{let{amountDue:t}=e;return(0,a.jsxs)(z.Flex,{justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(h.Text,{fontWeight:400,color:"white",children:"Amount due now"}),(0,a.jsx)(h.Text,{color:"white",fontWeight:600,children:eJ(t)})]})},e3=e=>{var t,n,r,i;let{currentPlan:o,newPlan:l,numberOfSeats:s,tokenRenewalDate:c,onBack:d,onConfirm:u,isLoadingNextStep:p}=e,h=(t=o.plan,n=l.plan,t===P.EE.STARTER&&n===P.EE.GROWTH?"upgrade":"downgrade"),m=function(e,t,n,a,r){return"upgrade"===e?function(e){let{planName:t,pricePerSeat:n,interval:a,numberOfSeats:r,renewalDate:i,fastTokenAmountPerSeat:o,rolloverBankCapacityPerSeat:l}=e;return{name:P.tC[t],rightSideHeading:{value:e$(r)},items:[{label:"Base price (due on ".concat(e5(i),")"),value:eK(n*r,a)},{label:"Team fast tokens",value:e1(o*r)},{label:"Rollover bank capacity",value:e0(l*r)}]}}({planName:r.plan,pricePerSeat:r.pricePerSeat,interval:a,numberOfSeats:t,renewalDate:n,fastTokenAmountPerSeat:r.fastTokensLimit,rolloverBankCapacityPerSeat:r.rolloverTokenBankLimit}):function(e){let{planName:t,pricePerSeat:n,interval:a,numberOfSeats:r,fastTokenAmountPerSeat:i,rolloverBankCapacityPerSeat:o,rolloverTokens:l}=e;return{name:P.tC[t],rightSideHeading:{value:e$(r)},items:[{label:"Base price",value:eK(n*r,a)},{label:"Team fast tokens",value:e1(i*r)},{label:"Rollover bank capacity",value:e0(o*r)},{label:"Your accumulated rollover tokens",value:l?(0,er.r9)(l,"~",9,0):"0"}]}}({planName:r.plan,pricePerSeat:r.pricePerSeat,interval:a,numberOfSeats:t,rolloverTokens:r.rolloverTokens,fastTokenAmountPerSeat:r.fastTokensLimit,rolloverBankCapacityPerSeat:r.rolloverTokenBankLimit})}(h,s,c,e6,o),g=function(e,t,n,a,r,i){return"upgrade"===e?function(e){let{planName:t,pricePerSeat:n,interval:a,numberOfSeats:r,originalFastTokenAmountPerSeat:i,newFastTokenAmountPerSeat:o,originalRolloverBankCapacityPerSeat:l,newRolloverBankCapacityPerSeat:s}=e;return{name:P.tC[t],rightSideHeading:{value:e$(r)},items:[{label:"Base price",value:eK(n*r,a)},{label:"Team fast tokens",value:e1(o*r),difference:(o-i)*r},{label:"Rollover bank capacity",value:e0(s*r),difference:(s-l)*r}]}}({planName:i.plan,pricePerSeat:i.pricePerSeat,interval:a,numberOfSeats:t,renewalDate:n,newFastTokenAmountPerSeat:i.fastTokensLimit,newRolloverBankCapacityPerSeat:i.rolloverTokenBankLimit,originalFastTokenAmountPerSeat:r.fastTokensLimit,originalRolloverBankCapacityPerSeat:r.rolloverTokenBankLimit}):function(e){let{planName:t,pricePerSeat:n,interval:a,numberOfSeats:r,renewalDate:i,originalFastTokenAmountPerSeat:o,newFastTokenAmountPerSeat:l,originalRolloverBankCapacityPerSeat:s,newRolloverBankCapacityPerSeat:c,originalRolloverTokenAmount:d}=e;return{name:P.tC[t],rightSideHeading:{value:e$(r)},items:[{label:"Base price (due on ".concat(e5(i),")"),value:eK(n*r,a)},{label:"Team fast tokens",value:e1(l*r),difference:(l-o)*r},{label:"Rollover bank capacity",value:e0(c*r),difference:(c-s)*r},{label:"Potential tokens lost",difference:-d,tooltipMessage:"The amount of tokens that will be lost if you downgrade your plan"}]}}({planName:i.plan,pricePerSeat:i.pricePerSeat,interval:a,numberOfSeats:t,renewalDate:n,newFastTokenAmountPerSeat:i.fastTokensLimit,newRolloverBankCapacityPerSeat:i.rolloverTokenBankLimit,originalFastTokenAmountPerSeat:r.fastTokensLimit,originalRolloverBankCapacityPerSeat:r.rolloverTokenBankLimit,originalRolloverTokenAmount:r.rolloverTokens})}(h,s,c,e6,o,l),x=e5(c);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:(r=o.plan,i=l.plan,r===P.EE.STARTER&&i===P.EE.GROWTH?"Upgrade Confirmation":"Downgrade Confirmation")}),(0,a.jsxs)(W.e,{margin:"auto",flexDirection:"column",justifyContent:"center",paddingY:6,paddingX:5,gap:5,children:[(0,a.jsx)(eN,{fromSubscription:m,toSubscription:g}),"downgrade"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e7,{nextBillingDate:x,price:l.pricePerSeat*s}),(0,a.jsxs)(eQ,{children:["Your current billing cycle duration will remain unchanged. Changes take effect at the end of your billing cycle"," ",x,"."]})]}),"upgrade"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e2,{amountDue:(l.pricePerSeat-o.pricePerSeat)*s}),(0,a.jsxs)(eQ,{children:["You're about to upgrade from ",P.tC[o.plan]," to ",P.tC[l.plan],", effective immediately. Your ","monthly"," billing cycle will remain unchanged."]})]})]}),(0,a.jsx)(F.D,{children:(0,a.jsxs)(z.Flex,{height:"2.75rem",gap:3,width:"100%",children:[(0,a.jsx)(f.Button,{onClick:d,height:"100%",w:"100%",variant:"primary",children:"Go Back"}),(0,a.jsx)(f.Button,{onClick:()=>u(h),height:"100%",w:"100%",variant:"gradient",isLoading:p,isDisabled:p,children:"Confirm"})]})})]})};var e8=n(14988),e9=n(12156),e4=n(73034),te=n(51233),tt=n(50413),tn=n(56073),ta=n(55111);let tr=e=>{var t;let n,{onPlanSelect:o,selectedPlan:l,currentPlan:s,numberOfSeats:c,onNext:d,onBack:p,isLoadingNextStep:h}=e,m=(0,i.A)(),g=(0,r.useRef)(null),{currentIndex:x,scrollToCard:v}=(0,e8.E)({scrollParentRef:g,numberOfCards:2,initialIndex:0}),{downgradeType:C,teamPlanHistoryData:b,allTeamPlansDetails:S,teamSchedule:j,selectedTeam:w,onModalClose:k}=u(),T=(null==j?void 0:j.isPendingDowngrade)&&("plan"===C||"both"===C),{cancelPlanDowngrade:L,isCancellingDowngrade:E}=I(w),P=async()=>{if(!w.id||!w.paymentPlatformId||!T||!w.akUUID){m({type:i.k.error,title:"Error",description:"Failed to cancel plan downgrade",variant:"errorOutline",position:"top",icon:(0,a.jsx)(y.A,{width:"100%",height:"100%",color:"content.negative"}),duration:9e3});return}await L()?(k(),m({description:"Your subscription is renewed",position:"bottom-right",type:i.k.info,duration:9e3})):m({type:i.k.error,title:"Error",description:"Failed to cancel plan downgrade",variant:"errorOutline",position:"top",icon:(0,a.jsx)(y.A,{width:"100%",height:"100%",color:"content.negative"}),duration:9e3})};T&&(n=Object.values(null!=S?S:{}).find(e=>{var t;return e.priceId===(null==j?void 0:null===(t=j.scheduledSub)||void 0===t?void 0:t.price)}));let A=(e,t)=>{s!==e&&(o(e),v(t))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.l,{children:"Select Your Team Plan"}),(0,a.jsx)(W.e,{margin:"auto",paddingY:6,sx:{containerType:"inline-size",containerName:"select-a-plan-container"},children:(0,a.jsxs)(z.Flex,{gap:6,flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",children:[(0,a.jsx)(eW.Box,{paddingX:5,width:"100%",children:(0,a.jsx)(tn.q,{variant:"contextualBannerSecondary",heading:"Need a Custom Plan?",description:"Contact us for a plan that is tailored to your team.",icon:(0,a.jsx)(ta.A,{width:10,height:10}),actions:(0,a.jsx)(f.Button,{as:"a",href:V.O.registerInterestForm,target:"_blank",variant:"outline",paddingX:4,fontWeight:500,boxShadow:"none",background:"surface.primary",_hover:{background:"surface.hover"},children:"Contact\xa0Us"})})}),(0,a.jsx)(eW.Box,{paddingX:5,width:"100%",children:(0,a.jsx)(R,{team:w,onModalClose:k,downgradeType:C,subscriptionDetails:null==b?void 0:null===(t=b.matchingPlanHistory)||void 0===t?void 0:t.paymentPlatformSubscriptionDetails})}),(0,a.jsxs)(z.Flex,{direction:"column",gap:5,width:"100%",children:[(0,a.jsx)(e9.a,{currentIndex:x,columnCount:2,scrollToCard:v,display:"none",sx:{"@container select-a-plan-container (max-width: 30rem)":{display:"flex"}},paddingX:5}),(0,a.jsxs)(z.Flex,{ref:g,sx:{"@container select-a-plan-container (max-width: 30rem)":{overflowX:"auto",scrollSnapType:"x mandatory",scrollBehavior:"smooth",layerStyle:"scrollbarHidden"}},gap:3,width:"100%",paddingX:5,children:[(0,a.jsx)(tt.O,{isSelected:"STARTER"===l,isCurrentPlan:"STARTER"===s,numberOfSeats:c,onSelect:()=>A("STARTER",0),sx:{"@container select-a-plan-container (max-width: 30rem)":{scrollSnapAlign:"center",flex:"0 0 auto",width:"".concat(e4.P,"%")}},actionButtonProps:{displayActionButton:(null==n?void 0:n.plan)==="STARTER",actionButtonText:"Cancel Change",isActionButtonLoading:E,onActionButtonClick:P}}),(0,a.jsx)(te.i,{isSelected:"GROWTH"===l,isCurrentPlan:"GROWTH"===s,numberOfSeats:c,onSelect:()=>A("GROWTH",1),badgeText:"20% more value!",sx:{"@container select-a-plan-container (max-width: 30rem)":{scrollSnapAlign:"center",flex:"0 0 auto",width:"".concat(e4.P,"%")}},actionButtonProps:{displayActionButton:(null==n?void 0:n.plan)==="GROWTH",actionButtonText:"Cancel Change",isActionButtonLoading:E,onActionButtonClick:P}})]})]})]})}),(0,a.jsx)(F.D,{children:(0,a.jsxs)(z.Flex,{height:"2.75rem",gap:3,width:"100%",children:[(0,a.jsx)(H._,{dataTrackingId:_.qDh,onClick:p,height:"100%",w:"100%",variant:"primary",children:"Go Back"}),(0,a.jsx)(H._,{dataTrackingId:_.J0h,onClick:d,height:"100%",w:"100%",variant:"gradient",isDisabled:!l||l===s,isLoading:h,children:"Review Changes"})]})})]})},ti=()=>{var e,t;let n=(0,j.j)(),{selectedTeam:o,onModalClose:l,onChangeCurrentFlow:s,allTeamPlansDetails:c,allTeamPlansDetailsError:d}=u(),[p,h]=(0,r.useState)(v.SELECT_PLAN),[m,g]=(0,r.useState)(o.plan),[f,x]=(0,r.useState)(!1),[C,b]=(0,r.useState)(!1),y=(0,j.G)(e=>e.user.selectedTeam),S=(0,i.A)(),k=(0,eX.R)(),{startPolling:T}=(0,w.Y)({teamId:null!==(e=o.id)&&void 0!==e?e:""});async function L(e){if(!(0,eo.CG)(o.plan)||!(0,eo.CG)(m)||!c)throw Error("Invalid plan type");let t=c[m],a=c[o.plan];if(!t||!a||void 0===o.planSeats||null===o.planSeats)throw Error("Missing required plan details");try{b(!0);let r=await (0,eL.$)({newPlan:t,existingPlan:a,planSeats:o.planSeats,quoteRequest:!1,team:o});if(r.errorMessage||!await T(n=>{let{team:i,teamPlanHistory:o}=n;if("upgrade"===e)return i.plan===t.plan;{var l;let e=null==o?void 0:o.find(e=>e.plan===a.plan);return(null==e?void 0:null===(l=e.paymentPlatformSubscriptionDetails)||void 0===l?void 0:l.schedule)===r.scheduleId}})){k();return}y===o.id&&await n((0,eC.LZ)()),S({description:"Your team subscription has been "+("upgrade"===e?"upgraded":"scheduled for downgrade"),type:i.k.info,position:"bottom-right"}),l()}catch(e){return k(),!1}finally{b(!1)}}if((0,r.useEffect)(()=>{f&&c&&(x(!1),d||h(v.CONFIRM_SWITCH))},[c,d,f,S]),p===v.SELECT_PLAN)return(0,a.jsx)(tr,{onPlanSelect:g,selectedPlan:m,currentPlan:o.plan,numberOfSeats:null!==(t=o.planSeats)&&void 0!==t?t:3,onNext:function(){p===v.SELECT_PLAN&&(c&&!d?h(v.CONFIRM_SWITCH):x(!0))},onBack:()=>s(null),onModalClose:l,isLoadingNextStep:f});if(p===v.CONFIRM_SWITCH){if(!function(e){return void 0!==e.planSeats&&null!==e.planSeats&&!!e.planTokenRenewalDate}(o)||!c)throw Error("No plan selected");if(!(0,eo.CG)(o.plan)||!(0,eo.CG)(m))throw Error("Invalid plan type");let e=function(e,t){if(!e.plan||"number"!=typeof(null==t?void 0:t.rolloverTokens)||"number"!=typeof(null==t?void 0:t.fastTokens))throw Error("Missing required plan details");return{plan:e.plan,pricePerSeat:t.price,priceId:t.priceId,rolloverTokenBankLimit:t.rolloverTokens,fastTokensLimit:t.fastTokens,rolloverTokens:e.rolloverTokens}}(o,c[o.plan]),t=function(e,t){if("number"!=typeof(null==t?void 0:t.rolloverTokens)||"number"!=typeof(null==t?void 0:t.fastTokens))throw Error("Missing required plan details");return{plan:e,pricePerSeat:t.price,priceId:t.priceId,rolloverTokenBankLimit:t.rolloverTokens,fastTokensLimit:t.fastTokens}}(m,c[m]),n=new Date(o.planTokenRenewalDate);return(0,a.jsx)(e3,{numberOfSeats:o.planSeats,tokenRenewalDate:n,currentPlan:e,newPlan:t,onBack:function(){p===v.CONFIRM_SWITCH&&h(v.SELECT_PLAN)},onConfirm:L,isLoadingNextStep:C})}throw Error("Invalid step")};var to=n(56525),tl=n(69408);let ts=e=>{let t=(0,r.useId)();return(0,a.jsxs)(m.Icon,{width:4,height:4,viewBox:"0 0 84 84",fill:"none",...e,children:[(0,a.jsx)("rect",{x:"1.5343",y:"1.53528",width:"80.9294",height:"80.9295",rx:"40.4647",fill:"url(#paint0-radial-gradient-".concat(t,")"),fillOpacity:"0.2"}),(0,a.jsx)("rect",{x:"1.5343",y:"1.53528",width:"80.9294",height:"80.9295",rx:"40.4647",fill:"black",fillOpacity:"0.8"}),(0,a.jsx)("rect",{x:"1.5343",y:"1.53528",width:"80.9294",height:"80.9295",rx:"40.4647",stroke:"url(#paint1-linear-gradient-".concat(t,")"),strokeWidth:"3.07055"}),(0,a.jsx)("path",{d:"M68.1889 31.482L58.5536 16.7997H26.4649L16.8007 31.482M68.1889 31.482L42.4948 68.1879M68.1889 31.482H16.8007M42.4948 68.1879L16.8007 31.482M42.4948 68.1879L32.8595 31.482M42.4948 68.1879L52.1301 31.482",stroke:"url(#paint2-linear-gradient-".concat(t,")"),strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26.4648 16.7997L32.8595 31.482L42.4948 16.7997L52.1301 31.482L58.5536 16.7997",stroke:"url(#paint3-linear-gradient-".concat(t,")"),strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("radialGradient",{id:"paint0-radial-gradient-".concat(t),cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(59.1925 75.5316) rotate(142.735) scale(47.1848 47.2076)",children:[(0,a.jsx)("stop",{stopColor:"white"}),(0,a.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),(0,a.jsxs)("linearGradient",{id:"paint1-linear-gradient-".concat(t),x1:"-46.4082",y1:"-20.1143",x2:"117.55",y2:"-34.7076",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:"0.0001",stopColor:"#FA5560"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#B14BF4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#4D91FF"})]}),(0,a.jsxs)("linearGradient",{id:"paint2-linear-gradient-".concat(t),x1:"18.7472",y1:"27.6183",x2:"60.1633",y2:"21.2326",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]}),(0,a.jsxs)("linearGradient",{id:"paint3-linear-gradient-".concat(t),x1:"27.6803",y1:"19.8907",x2:"51.4571",y2:"11.8786",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#DB519E"}),(0,a.jsx)("stop",{offset:"0.499028",stopColor:"#C14DD4"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#6A6AFB"})]})]})]})};var tc=n(38851);let td=()=>(0,a.jsx)(tl.X,{image:{src:"/img/teams/welcome-to-teams-sidebar-desktop.webp",alt:"Welcome to Teams",width:320,height:200},icon:(0,a.jsx)(ts,{boxSize:{base:"3rem",lg:"5.25rem"}}),text:"Manage [[Subscription]]"}),tu=()=>{var e,t,n,o,l,s;let{teamPlanHistoryData:c,selectedTeam:d,currentFlow:p,onChangeCurrentFlow:h,isModalOpen:m,onModalClose:g}=u(),f=(0,i.A)(),{renewSubscription:v,isRenewingSubscription:b}=(0,C.Z)(d,g),{buyTeamPlanSubscription:y,isBuyingTeamPlan:S}=(0,E.h)(),[j,w]=(0,r.useState)(!1),[k,T]=(0,r.useState)(!1),L=null==c?void 0:null===(o=c.matchingPlanHistory)||void 0===o?void 0:null===(n=o.paymentPlatformSubscriptionDetails)||void 0===n?void 0:null===(t=n.items.data[0])||void 0===t?void 0:null===(e=t.price)||void 0===e?void 0:e.id,I=null==c?void 0:null===(l=c.teamPlanHistoryStatus)||void 0===l?void 0:l.isSubscriptionExpired,A=null==c?void 0:null===(s=c.teamPlanHistoryStatus)||void 0===s?void 0:s.showRenewSubscription,M=async()=>{var e;let t=await (0,tc.j)({teamUUID:null!==(e=d.akUUID)&&void 0!==e?e:""});(null==t?void 0:t.errorMessage)?f({type:i.k.error,description:"Error: Unable to access Stripe Portal. Please make sure you switch to the correct team. Message: ".concat(t.errorMessage),duration:1e4,position:"top"}):t.url?window.location.href=t.url:f({type:i.k.error,description:"Error: Missing Portal URL",duration:1e4,position:"top"})},R=async e=>{switch(e){case x.UPDATE_PAYMENT:T(!0),await M(),T(!1);break;case x.VIEW_INVOICES:w(!0),await M(),w(!1);break;case x.RENEW_SUBSCRIPTION:var t,n,a,r;if(!I)return await v();if(!(0,D.H)(d.plan)){console.error("Invalid team plan:",d.plan);return}await y({plan:d.plan,seatQuantity:null!==(t=d.planSeats)&&void 0!==t?t:3,teamName:null!==(n=d.teamName)&&void 0!==n?n:"",teamUUID:null!==(a=d.akUUID)&&void 0!==a?a:"",renewSubTeamUUID:null!==(r=d.akUUID)&&void 0!==r?r:"",priceId:null!=L?L:""});return;default:h(e)}},U=d.plan===P.EE.CUSTOM&&!d.paymentPlatformId;return(0,a.jsxs)(to.b,{isOpen:m,onClose:g,heroSection:(0,a.jsx)(td,{}),children:[!p&&!U&&(0,a.jsx)(O,{onActionClick:R,showRenewSubscription:A,isRenewingSubscription:b||S,isUpdatingPaymentMethod:k,isLoadingInvoicesRedirect:j}),!p&&U&&(0,a.jsx)(Y,{}),p===x.CANCEL_SUBSCRIPTION&&(0,a.jsx)(ec,{}),p===x.CHANGE_SEATS&&(0,a.jsx)(eq,{}),p===x.SWITCH_PLAN&&(0,a.jsx)(ti,{}),p===x.DELETE_TEAM&&(0,a.jsx)(eb,{})]})},tp=e=>{let{isOpen:t,onClose:n,selectedTeam:r}=e;return(0,a.jsx)(p,{selectedTeam:r,isOpen:t,onClose:n,children:(0,a.jsx)(tu,{})})}},58812:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(95155),r=n(3740);let i=e=>(0,a.jsx)(r.Icon,{width:"18",height:"17",viewBox:"0 0 18 17",...e,children:(0,a.jsx)("path",{d:"M2 7.57918C4.9716 4.90841 9.49525 2.58869 14.0206 1.52305C14.9465 1.30542 15.4724 2.552 14.674 3.07231C11.4059 5.19859 7.89433 7.86185 5.49005 10.9545C5.19852 11.2364 5.54057 11.7075 5.89587 11.5132C8.86747 9.89224 12.0908 8.02195 15.5809 8.23958C16.0306 8.26793 16.1606 8.87329 15.7614 9.08509C12.8669 10.5243 10.5802 12.1119 8.76311 14.2298C8.16846 14.7602 8.74158 15.7257 9.48613 15.4489C10.9786 14.8544 14.9713 12.2537 15.9627 14.7168",stroke:"currentColor",strokeWidth:"2.8",strokeLinecap:"round",strokeLinejoin:"round"})})},61579:(e,t,n)=>{n.d(t,{FU:()=>g,HB:()=>p,Op:()=>u,TZ:()=>f,l_:()=>d,m3:()=>h,zv:()=>c});var a=n(30832),r=n.n(a),i=n(8963),o=n.n(i),l=n(91027),s=n.n(l);r().extend(s()),r().extend(o());let c=e=>{let{date:t,locale:n="en-US",year:a="numeric",month:r="long",day:i="numeric",timeZone:o="Australia/Sydney"}=e,l=new Date(t);return isNaN(l.getTime())?t:l.toLocaleDateString(n,{year:a,month:r,day:i,timeZone:o})},d=e=>{let t=r()();return r()(e).isSame(t,"day")},u=e=>{let t=r()().subtract(1,"day");return r()(e).isSame(t,"day")},p=e=>r().utc(e),h=e=>{let t;let n=r()(),a=("number"==typeof e?r().unix(e):r()(e)).diff(n);return r().duration(a)},m=(e,t)=>{let{dayFormat:n="DD",monthFormat:a="MMMM",yearFormat:i="YYYY"}=t,o=r()(e);if(isNaN(e.getTime()))throw console.error("Invalid date format"),Error("Invalid date format");return{day:o.format(n),month:o.format(a),year:o.format(i)}},g=e=>{try{let{day:t,month:n,year:a}=m(e,{yearFormat:"YY"});return"".concat(n,".").concat(t,".").concat(a)}catch(e){return""}},f=e=>{if(!e)return"soon";let t=h(e),n=Math.floor(t.asDays()),a=Math.floor(t.asHours()%24),r=Math.floor(t.asMinutes()%60);return n>0?"in ".concat(n," ").concat(1===n?"day":"days"):a>0||r>0?"in ".concat(a," hour").concat(1!==a?"s":""," and ").concat(r," minute").concat(1!==r?"s":""):"in less than a minute"}},64280:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(12115),r=n(68691),i=n(44334),o=n(91073),l=n(67029),s=n(41259);let c=async e=>{try{let t=await fetch(s.T2,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if([400,403,500].includes(t.status))return{errorMessage:n.message};if("subscription"!==n.subStatus)return{errorMessage:"did not receive expected subStatus of 'subscription'"};return n}catch(e){return{errorMessage:"remove plan subscription cancellation error: ".concat(e.message)}}},d=(e,t)=>{var n;let[s,d]=(0,a.useState)(!1),u=(0,r.j)(),p=(0,r.G)(e=>e.user.selectedTeam),h=(0,o.A)(),{startPolling:m}=(0,i.Y)({teamId:null!==(n=e.id)&&void 0!==n?n:""});return{renewSubscription:async()=>{try{var n,a,r;if(!e.akUUID||!e.paymentPlatformId)throw Error("Team UUID or payment platform ID is missing");if(d(!0),await c({teamUUID:null!==(n=e.akUUID)&&void 0!==n?n:"",paymentPlatformId:null!==(a=e.paymentPlatformId)&&void 0!==a?a:""}),!await m(e=>{var t;let{team:n,teamPlanHistory:a}=e,r=null==a?void 0:a.find(e=>e.plan===n.plan);return!(null==r?void 0:null===(t=r.paymentPlatformSubscriptionDetails)||void 0===t?void 0:t.schedule)}))throw Error("Failed to cancel plan downgrade");p===e.akUUID&&await u((0,l.T)(null!==(r=e.id)&&void 0!==r?r:"")).unwrap(),h({description:"Your subscription is renewed",position:"bottom-right",type:o.k.info,duration:9e3}),null==t||t()}catch(e){h({description:"We were unable to renew your subscription",position:"top",type:o.k.error,duration:9e3})}finally{d(!1)}},isRenewingSubscription:s}}},68466:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(95155),r=n(3740),i=n(27593);let o=e=>(0,a.jsxs)(r.Icon,{width:"calc(".concat(i.fb," * 1.3750)"),height:"calc(".concat(i.fb," * 1.3750)"),viewBox:"0 0 22 22",fill:"currentColor",...e,children:[(0,a.jsx)("path",{d:"M8.70833 6.45833C7.97195 6.45833 7.375 7.05529 7.375 7.79167C7.375 8.52805 7.97195 9.125 8.70833 9.125C9.44471 9.125 10.0417 8.52805 10.0417 7.79167C10.0417 7.05529 9.44471 6.45833 8.70833 6.45833ZM6.375 7.79167C6.375 6.503 7.41967 5.45833 8.70833 5.45833C9.997 5.45833 11.0417 6.503 11.0417 7.79167C11.0417 9.08033 9.997 10.125 8.70833 10.125C7.41967 10.125 6.375 9.08033 6.375 7.79167Z"}),(0,a.jsx)("path",{d:"M22.0417 7.29167V16.2488L16.2488 22.0417H7.29167V21.0417H15.8346L21.0417 15.8346V7.29167H22.0417Z"}),(0,a.jsx)("path",{d:"M20.4154 4.125L18.375 6.16544V11.6654L15.5045 14.5359L14.7974 13.8288L17.375 11.2512V5.75123L19.7083 3.41789L20.4154 4.125Z"}),(0,a.jsx)("path",{d:"M14.2083 13.7917C13.472 13.7917 12.875 14.3886 12.875 15.125C12.875 15.8614 13.472 16.4583 14.2083 16.4583C14.9447 16.4583 15.5417 15.8614 15.5417 15.125C15.5417 14.3886 14.9447 13.7917 14.2083 13.7917ZM11.875 15.125C11.875 13.8363 12.9197 12.7917 14.2083 12.7917C15.497 12.7917 16.5417 13.8363 16.5417 15.125C16.5417 16.4137 15.497 17.4583 14.2083 17.4583C12.9197 17.4583 11.875 16.4137 11.875 15.125Z"}),(0,a.jsx)("path",{d:"M9.20833 12.7917V16.7512L10.3321 17.875L9.625 18.5821L8.20833 17.1654V12.7917H9.20833Z"}),(0,a.jsx)("path",{d:"M13.2917 4.33456L14.7083 5.75123V10.125H13.7083V6.16544L12.5846 5.04167L13.2917 4.33456Z"}),(0,a.jsx)("path",{d:"M8.11927 9.08783L5.54167 11.6654V17.1654L3.66667 19.0404L2.95956 18.3333L4.54167 16.7512V11.2512L7.41217 8.38073L8.11927 9.08783Z"}),(0,a.jsx)("path",{d:"M6.66789 0.875H15.625V1.875H7.08211L1.875 7.08211V15.625H0.875V6.66789L6.66789 0.875Z"})]})},82431:(e,t,n)=>{n.d(t,{H:()=>o});var a=n(12115),r=n(63615),i=n(85756);let o=()=>{let e=(0,r.c)(),[t,n]=(0,a.useState)(),[o,l]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let[t,a]=await Promise.all([e(i.EE.STARTER),e(i.EE.GROWTH)]);if(t.error||a.error)throw Error("Failed to fetch plan details");n({[i.EE.STARTER]:t.teamPlanDetails,[i.EE.GROWTH]:a.teamPlanDetails})}catch(e){l("Unable to load subscription plans. Please try again.")}finally{c(!1)}})()},[e]),{data:t,error:o,isLoading:s}}},88663:(e,t,n)=>{n.d(t,{h:()=>s});var a=n(12115),r=n(94226),i=n(91073),o=n(85756),l=n(19738);let s=()=>{let[e,t]=(0,a.useState)(!1),n=(0,i.A)(),s=(0,r.R)();return{buyTeamPlanSubscription:async e=>{let{plan:a,seatQuantity:r,teamName:c,teamUUID:d,renewSubTeamUUID:u,priceId:p}=e;t(!0);try{{let{errorMessage:e}=await (0,l.Q)({plan:a,duration:o.d$.MONTHLY,seatQuantity:r,initialTeamName:c,teamDealUUID:void 0,teamUUID:d,priceId:p,renewSubTeamUUID:u});if(e){n({title:"Error",description:"Unable to access Stripe Portal. Please make sure you switch to the correct team.",type:i.k.error,duration:9e3,position:"top"});return}n({type:i.k.success,description:"Subscription renewed successfully.",duration:9e3,position:"top"})}}catch(e){s()}finally{t(!1)}},isBuyingTeamPlan:e,setIsBuyingTeamPlan:t}}},94226:(e,t,n)=>{n.d(t,{R:()=>d});var a=n(95155),r=n(58670),i=n(64430),o=n(12115),l=n(97386),s=n(91073),c=n(8614);let d=()=>{let e=(0,s.A)();return(0,o.useCallback)(()=>{e({title:"Something went wrong",description:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Text,{as:"span",children:"We were unable to update your team subscription. Please refresh and try again. If the error persists "}),(0,a.jsx)(r.Text,{as:"span",children:(0,a.jsx)(i.Link,{href:c.O.contact,target:"_blank",color:"content.negative",fontWeight:600,children:"Contact Us"})}),(0,a.jsx)(r.Text,{as:"span",children:"."})]}),variant:"errorOutline",position:"top",icon:(0,a.jsx)(l.A,{width:"100%",height:"100%",color:"content.negative"}),duration:5e3})},[e])}},94926:(e,t,n)=>{n.d(t,{k:()=>i});var a=n(88095),r=n(958);let i=()=>{let[e,{loading:t}]=(0,a.n)(r.CWL);return{updateTeam:async(t,n,a)=>await e({variables:{where:{id:{_eq:t}},_set:{[n]:a}}}),isUpdatingTeam:t}}},95518:(e,t,n)=>{n.d(t,{o:()=>p});var a=n(95155),r=n(77700),i=n(59108),o=n(58670),l=n(57599),s=n(31034),c=n(3740);let d=e=>(0,a.jsx)(c.Icon,{width:4,height:4,viewBox:"0 0 40 40",fill:"currentColor",...e,children:(0,a.jsx)("path",{d:"M35 33.7497H34.5833V31.6663C34.5833 29.8663 33.465 28.7497 31.6667 28.7497H31.25V19.583H31.6667C33.465 19.583 34.5833 18.4663 34.5833 16.6663V12.4012C34.5833 11.2895 33.965 10.2896 32.97 9.79297L21.6766 4.14641C20.625 3.62307 19.3717 3.62307 18.3234 4.14641L7.03003 9.79297C6.03503 10.2896 5.41667 11.2895 5.41667 12.4012V16.6663C5.41667 18.4663 6.535 19.583 8.33333 19.583H8.75V28.7497H8.33333C6.535 28.7497 5.41667 29.8663 5.41667 31.6663V33.7497H5C4.31 33.7497 3.75 34.3097 3.75 34.9997C3.75 35.6897 4.31 36.2497 5 36.2497H35C35.69 36.2497 36.25 35.6897 36.25 34.9997C36.25 34.3097 35.69 33.7497 35 33.7497ZM28.75 28.7497H24.5833V19.583H28.75V28.7497ZM17.9167 28.7497V19.583H22.0833V28.7497H17.9167ZM7.97343 17.0378C7.97176 17.0378 7.97176 17.0378 7.97343 17.0378C7.9651 17.0245 7.91667 16.9263 7.91667 16.6663V12.4012C7.91667 12.2429 8.0049 12.0997 8.14657 12.0281L19.4399 6.38151C19.7949 6.20485 20.2051 6.20485 20.5601 6.38151L31.8534 12.0281C31.9951 12.0981 32.0833 12.2412 32.0833 12.4012V16.6663C32.0833 16.9263 32.035 17.0231 32.0384 17.0281C32.025 17.0347 31.9267 17.083 31.6667 17.083H8.33333C8.08167 17.083 7.98176 17.0378 7.97343 17.0378ZM11.25 19.583H15.4167V28.7497H11.25V19.583ZM7.91667 31.6663C7.91667 31.4063 7.96496 31.3096 7.96163 31.3046C7.97496 31.2979 8.07333 31.2497 8.33333 31.2497H31.6667C31.97 31.2497 32.0301 31.2948 32.0284 31.2948C32.0351 31.3098 32.0833 31.4063 32.0833 31.6663V33.7497H7.91667V31.6663ZM17.9167 11.6663C17.9167 10.5163 18.85 9.58301 20 9.58301C21.15 9.58301 22.0833 10.5163 22.0833 11.6663C22.0833 12.8163 21.15 13.7497 20 13.7497C18.85 13.7497 17.9167 12.8163 17.9167 11.6663Z"})});var u=n(66415);let p=e=>{let{rolloverTokens:t}=e;return(0,a.jsx)(r.Box,{rounded:"xl",background:"surface.primary",borderWidth:"1px",borderStyle:"solid",borderColor:"content.negative",w:"100%",children:(0,a.jsxs)(i.Flex,{p:4,children:[(0,a.jsx)(d,{color:"content.negative",width:{base:6,md:10},height:{base:6,md:10}}),(0,a.jsxs)(i.Flex,{ml:2,justifyContent:"space-between",w:"100%",children:[(0,a.jsxs)(i.Flex,{flexDir:"column",children:[(0,a.jsx)(o.Text,{align:"left",fontSize:"xs",children:"Rollover Bank"}),(0,a.jsxs)(o.Text,{align:"left",fontWeight:500,fontSize:{base:"xs",md:"sm"},children:["Potential Tokens Lost",(0,a.jsx)(l.Tooltip,{hasArrow:!0,shouldWrapChildren:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:"Rollover bank is a premium feature. All banked tokens from previous cycles will be lost upon canceling the premium subscription.",children:(0,a.jsx)("span",{children:(0,a.jsx)(s.A,{ml:1,w:4,h:4,color:"primary.content"})})})]})]}),(0,a.jsxs)(i.Flex,{flexDir:"column",alignItems:"flex-end",children:[(0,a.jsx)(o.Text,{align:"right",fontSize:"xs",children:"Current Excess"}),(0,a.jsxs)(o.Text,{fontWeight:600,color:"content.negative","data-testid":"excess-rollover-tokens",children:[0!==t&&"-",(0,u.HY)(t)]})]})]})]})})}}}]);