try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5496bc88-ddb4-4d34-b4b1-6fd27c1ede1f",e._sentryDebugIdIdentifier="sentry-dbid-5496bc88-ddb4-4d34-b4b1-6fd27c1ede1f")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{68096:(e,t,n)=>{n.d(t,{q:()=>y});var i=n(95155),l=n(12115),o=n(43386),r=n(84612),a=n(81434),s=n(31117),d=n(60245),c=n.n(d),u=n(35095),m=n.n(u),g=n(70954),h=n.n(g),x=n(41998),p=n.n(x);let b=(e,t)=>{let n=h()(t,"__typename"),i=p()(h()(e,"__typename"),m()(t));return c()(n,i)};var f=n(91496),v=n(958),j=n(66415);let w=(e,t)=>{let n=(0,s.m)(),i=(0,l.useCallback)(i=>{if(!i.complete)return;let l=!1,o=e.reduce((e,t)=>t.id!==i.data.id?n.readFragment({id:(0,j.Fd)(t.id),fragment:v.Rrr})?[...e,t]:(l=!0,e):b(t,i.data)?[...e,t]:(l=!0,[...e,{...t,...i.data}]),[]);(l||o.length!==e.length)&&t(o)},[t,e,n]),o=(0,f.d)(i,r.J,[t,e,n]);return(0,l.useEffect)(()=>{let t=e.map(e=>n.cache.watchFragment({from:(0,j.Fd)(e.id),fragment:v.SK6,optimistic:!1}).subscribe(o));return()=>{t.forEach(e=>e.unsubscribe())}},[e,n,o]),[e,t]};var C=n(69122);let y=e=>{let{children:t}=e,{userSelectedTeam:n}=(0,C.s)(),s=n(),d=null==s?void 0:s.id,c=(0,o.V)({selectedItems:r.u.selectedImages,isSelectingItems:r.u.isSelectingImages}),[u,m]=w(c.selectedItems,c.setSelectedItems),g=u.map(e=>e.id),h=(0,l.useMemo)(()=>({isSelectingImages:c.isSelectingItems,selectedImages:u,selectedImageIds:g,clearSelectedImages:c.clearSelectedItems,setIsSelectingImages:c.setIsSelectingItems,toggleImageSelection:c.toggleItemSelection,isDragSelectingImages:c.isDragSelectingItems,toggleImageDragSelect:c.toggleItemDragSelect,setSelectedImages:m}),[c,u,m,g]);return(0,i.jsx)(a.c.Provider,{value:h,children:t},d)}},77252:(e,t,n)=>{n.d(t,{oK:()=>h});var i=n(88095),l=n(31117),o=n(62105),r=n(35695),a=n(69122),s=n(91073),d=n(81434),c=n(19321),u=n(958);let m=(e,t)=>{t.forEach(t=>{let n="generated_images:".concat(t);e.cache.evict({id:n})||console.warn("Error removing image with id '".concat(n,"' from apollo cache"))})},g=(e,t,n)=>{t.forEach(t=>{let i=e.identify({id:t,__typename:"generated_images"});if(!i){console.error("Could not generate cache ID for generated_images.id ".concat(t));return}e.modify({id:i,fields:{public:()=>n}})})},h=()=>{let[e,{loading:t}]=(0,i.n)(u.dfv),n=(0,s.A)(),{userSelectedTeam:h}=(0,a.s)(),{setSelectedImages:x,selectedImages:p}=(0,d.V)(),b=h(),f=(0,l.m)(),v=!!b.id,j=(0,r.usePathname)(),w=null==j?void 0:j.startsWith(c.a.TEAM_FEED);return{updateImagePrivacy:async function(t,i){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var r,a;let{data:o}=await e({variables:{generatedImageIds:t,public:i},update(e,n){let{data:l}=n;if(!(null==l?void 0:l.updateGeneratedImagesPublic)){console.error("Could not update cache for generated_images after updateGeneratedImagesPublic due to data.updateGeneratedImagesPublic being undefined");return}g(e,t,i)}});if(!(null==o?void 0:null===(r=o.updateGeneratedImagesPublic)||void 0===r?void 0:r.affectedRows))return!1;let d=null==o?void 0:null===(a=o.updateGeneratedImagesPublic)||void 0===a?void 0:a.affectedRows,c=1===d?"The selected image has been made ".concat(i?"public":"private"," in the team feed."):"".concat(d," selected images have been made ").concat(i?"public":"private"," in the feed."),u=1===d?"The selected image has been made ".concat(i?"public":"private"," in the feed."):"".concat(d," selected images have been made ").concat(i?"public":"private"," in the feed.");v&&!i&&(l&&m(f,t),w&&x(p.filter(e=>!t.includes(e.id)))),n({description:v?c:u,position:"bottom-right",type:s.k.info})}catch(e){return console.error("failed to update image privacy",e),o.Cp(e),n({title:"Error",description:"There was an error updating the privacy of the selected images.",type:s.k.error,position:"bottom-right"}),!1}return!0},loading:t}}},82756:(e,t,n)=>{n.d(t,{d:()=>l});var i=n(20927);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.map(e=>({id:e.id,url:e.imageUrl,generated_image_variation_generics:e.generated_image_variation_generics.map(e=>({__typename:"generated_image_variation_generic",...e})),generation:{...e.generation,motion:!!e.motionMp4Url,user:{__typename:"users",id:e.user.id,username:e.user.username}},nsfw:e.nsfw,generated_image_moderation:e.generated_image_moderation}));return(0,i.g)(n,t)}},91075:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(95155),l=n(3740);let o=e=>(0,i.jsxs)(l.Icon,{width:3.5,height:3.5,viewBox:"0 0 14 14",stroke:"currentColor",fill:"currentColor",...e,children:[(0,i.jsx)("path",{d:"M0.5 13.5L13.5 0.5"}),(0,i.jsx)("path",{d:"M0.5 7.5L7.5 0.5"}),(0,i.jsx)("path",{d:"M0.5 1.5L1.5 0.5"}),(0,i.jsx)("path",{d:"M6.5 13.5L13.5 6.5"}),(0,i.jsx)("path",{d:"M12.5 13.5L13.5 12.5"})]})},91496:(e,t,n)=>{n.d(t,{d:()=>r});var i=n(91959),l=n.n(i),o=n(12115);function r(e,t,n){let i=(0,o.useRef)(e);return(0,o.useEffect)(()=>{i.current=e},[e]),(0,o.useCallback)(l()(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.current(...t)},t),n)}},92905:(e,t,n)=>{n.d(t,{w:()=>e0});var i=n(95155),l=n(5138),o=n(52017),r=n(12974),a=n(22648),s=n(59108),d=n(85821),c=n(62105),u=n(55028),m=n(35695),g=n(12115);let h=(e,t,n)=>1===e?t:n,x=e=>0===e?"No images":"".concat(e," ").concat(h(e,"image","images")),p=e=>e>0?"".concat(e," ").concat(h(e,"variation","variations")):"",b=e=>e>0?"".concat(e," ").concat(h(e,"collection","collections")):"",f=e=>{let{imageCount:t,variationsCount:n,collectionsCount:i}=e,l=[];if(i>0&&l.push(b(i)),t>0&&l.push(x(t)),n>0&&l.push(p(n)),0===l.length)return"No images selected";if(1===l.length)return"".concat(l[0]," selected");if(2===l.length)return"".concat(l[0]," and ").concat(l[1]," selected");let o=l.pop();return"".concat(l.join(",")," and ").concat(o," selected")};var v=n(57599),j=n(1996),w=n(831),C=n(58670),y=n(77700),I=n(59771),k=n(59118),S=n(59133),A=n(90339),_=n(14331),O=n(43594),D=n(88833),B=n(84259);let E=e=>{let{isLoading:t,onDownloadOriginalImages:n,onDownloadAllImages:l,imageCount:o,handleOpenBuyModal:r,collectionCount:a,...c}=e,{hasPermission:u}=(0,_.S)(),m=!u("bulkDownload","create");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(v.Tooltip,{isDisabled:!m,hasArrow:!0,closeOnClick:!1,shouldWrapChildren:!0,label:"Unlock bulk actions and more with Leonardo Premium!",children:(0,i.jsxs)(j.Menu,{...m?{isOpen:!1}:{},children:[(0,i.jsxs)(s.Flex,{position:"relative",width:"100%",children:[(0,i.jsxs)(w.MenuButton,{isDisabled:0===o&&0===a,...m?{onClick:r}:{},as:d.Button,isLoading:t,width:"fit-content",size:"sm",variant:"outline",fontSize:"sm",fontWeight:500,bg:"background.darkblue",borderColor:"border.greyBlue",py:2,pl:4,pr:m?6:4,borderRadius:"lg",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",...c,children:[(0,i.jsx)(O.A,{boxSize:4,mr:2}),(0,i.jsx)(C.Text,{as:"span",children:"Download"}),(0,i.jsx)(S.A,{boxSize:2,ml:2})]}),m&&(0,i.jsx)(y.Box,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:"0 0.5rem",cursor:"pointer",children:(0,i.jsx)(A.A,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]}),(0,i.jsxs)(I.MenuList,{minWidth:48,bg:"border.nobleBlack",p:0,border:"none",children:[(0,i.jsxs)(k.MenuItem,{as:d.Button,borderBottomRadius:0,bg:"border.nobleBlack",display:"flex",alignItems:"center",justifyContent:"flex-start",onClick:m?r:n,children:[(0,i.jsx)(y.Box,{mr:1.5,children:(0,i.jsx)(D.A,{fill:"white",width:"1.25rem",height:"1.25rem"})}),"Original images"]}),(0,i.jsxs)(k.MenuItem,{as:d.Button,borderTopRadius:0,bg:"border.nobleBlack",display:"flex",alignItems:"center",justifyContent:"flex-start",onClick:m?r:l,children:[(0,i.jsx)(y.Box,{mr:1.5,children:(0,i.jsx)(B.A,{fill:"white",width:"1.125rem",height:"1.125rem"})}),"All images"]})]})]})})})};var T=n(81228),M=n(84025);let R=e=>{let{imagesCount:t,collectionsCount:n,isCollectionPage:l,onPaymentOptionsOpen:o,onRemoveCollectionImagesOpen:r,onRemoveCollectionsContentOpen:a,canTeamMemberDelete:c,onDeleteImagesOpen:u,...m}=e,{hasPermission:g}=(0,_.S)(),h=g("generation","delete"),{isBulkDeleteOfCollectionsEnabled:x}=(0,T.D0)();return(0,i.jsx)(v.Tooltip,{isDisabled:!(null===c?!h:!h||!c),hasArrow:!0,closeOnClick:!1,label:!1===c?"You don't have permission to delete team members images.":"Unlock removing images and more with Leonardo Premium!",shouldWrapChildren:!0,children:(0,i.jsxs)(s.Flex,{position:"relative",children:[(0,i.jsx)(d.Button,{isDisabled:t+n===0||!1===c||n>0&&!x,"aria-label":"Remove",bg:"background.darkblue",borderColor:"border.greyBlue",fontWeight:500,borderRadius:"lg",leftIcon:(0,i.jsx)(M.A,{}),onClick:()=>{if(n>0){a();return}if(t>0&&l){r();return}if(!h){o();return}u()},variant:"outline",h:8,flex:1,paddingLeft:4,paddingRight:h?4:6,...m,children:"Remove"}),!h&&(0,i.jsx)(y.Box,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:"0 0.5rem",cursor:"pointer",children:(0,i.jsx)(A.A,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]})})};var F=n(46671),z=n(40619),L=n(81434),N=n(56496),P=n(34849),W=n(19321),H=n(83833),V=n(69122),G=n(77252),U=n(80891),Q=n(64478),Y=n(49993);let $=e=>{let{isTeamSelected:t,isFirstImagePublic:n}=e;return t?n?"Hide in Team Feed":"Show in Team Feed":n?"Make Private":"Make Public"},q=e=>{let{isFirstImagePublic:t,hasReadOnlySelectedImages:n,shouldShowPremiumIcon:i}=e;return n?t?"You don't have permission to hide team members images.":"You don't have permission to show team members images.":i?"Unlock private generations and more with Leonardo Premium!":void 0},J=e=>{let{openBuyModal:t}=e,{loading:n,updateImagePrivacy:l}=(0,G.oK)(),{userSelectedTeam:o}=(0,V.s)(),{selectedImages:r}=(0,L.V)(),{isUserFreePlan:a}=(0,U.usePlan)(),{openCollectionPrivacyWarning:c}=(0,z.o)(),{isFreePlanElevated:u}=(0,H.D)(),g=(0,Q.w)(),h=(0,m.usePathname)(),x=null==h?void 0:h.startsWith(W.a.TEAM_FEED),p=o(),b=!!p.id,f=!!(r.length>0&&r[0].isPublic),j=p.userRole!==F.TEAM_ROLE_TYPE.OWNER&&r.some(e=>e.teamId&&e.userId!==g),w=!b&&a&&!u,C=(b||!a)&&!j,I=0===r.length||j,k=$({isTeamSelected:b,isFirstImagePublic:f}),S=q({isFirstImagePublic:f,shouldShowPremiumIcon:w,hasReadOnlySelectedImages:j}),_=async()=>{if(!C){t();return}if(0===r.length)return;let e=!r[0].isPublic;await l(r.map(e=>e.id),e,x)&&r.find(e=>{var t;return!!(null===(t=e.collection_images)||void 0===t?void 0:t.length)})&&b&&!e&&c()},O=f?(0,i.jsx)(N.A,{color:"white",height:4,width:4}):(0,i.jsx)(P.A,{color:"white",width:4,height:4});return(0,i.jsx)(v.Tooltip,{isDisabled:!S,hasArrow:!0,closeOnClick:!1,textAlign:"center",bgColor:"button.input",label:S,placement:"top",shouldWrapChildren:!0,children:(0,i.jsxs)(s.Flex,{position:"relative",children:[(0,i.jsx)(d.Button,{"aria-label":k,leftIcon:O,isLoading:n,isDisabled:I,size:{base:"sm"},variant:"outline",onClick:_,fontSize:"sm",borderColor:"border.greyBlue",bg:j?Y.C3.GRAY_DISABLED_BUTTON_BG:"background.darkblue",fontWeight:500,color:"white",py:2,paddingInline:{base:"1.5 !important",lg:"4 !important"},borderRadius:"lg",width:"100%",children:k}),w&&(0,i.jsx)(y.Box,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderBottomLeftRadius:"0.25rem",borderTopRightRadius:"0.25rem",cursor:"pointer",children:(0,i.jsx)(A.A,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]})})};var K=n(68031),Z=n(97386);let X=()=>{let{setIsSelectingImages:e,clearSelectedImages:t}=(0,L.V)(),{clearSelectedCollections:n}=(0,K._Q)();return(0,i.jsx)(d.Button,{"aria-label":"Exit mode",leftIcon:(0,i.jsx)(Z.A,{color:"white"}),size:"sm",variant:"outline",onClick:()=>{e(!1),t(),n()},fontSize:"sm",borderColor:"border.greyBlue",bg:"background.darkblue",fontWeight:500,color:"white",py:2,paddingInline:{base:"1.5 !important",xl:"3 !important"},borderRadius:"lg",children:"Exit mode"})};var ee=n(5520),et=n(23375),en=n(16299),ei=n(5643),el=n(49004),eo=n(75569),er=n(11649),ea=n(58727),es=n(84492),ed=n(19611),ec=n(27593);let eu=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Text,{mb:"calc(".concat(ec.fb," * 2.75) !important"),color:"#DBDBDB",opacity:.5,children:"If it is the only image within the generation, the generation will also be deleted."}),(0,i.jsx)(C.Text,{mb:"calc(".concat(ec.fb," * 2.75) !important"),color:"#FF8600",children:"If you are deleting the original image, all upscales and transparent images will be deleted as well."})]}),em=e=>{let{isOpen:t,onClose:n,deleteImage:l,loading:o,variation:r,title:a}=e;return(0,i.jsxs)(ee.Modal,{isOpen:t,onClose:n,closeOnOverlayClick:!0,isCentered:!0,children:[(0,i.jsx)(et.ModalOverlay,{}),(0,i.jsx)(en.ModalContent,{px:2,py:5,textAlign:"center",children:(0,i.jsx)(ei.ModalBody,{children:(0,i.jsx)(el.Center,{children:(0,i.jsxs)(eo.VStack,{maxW:"calc(".concat(ec.fb," * 39.125)"),children:[(0,i.jsx)(el.Center,{mb:"calc(".concat(ec.fb," * 0.9375)"),children:(0,i.jsx)(ed.A,{})}),(0,i.jsx)(er.Heading,{size:"lg",fontWeight:600,mb:"calc(".concat(ec.fb," * 1.125)"),children:a}),(0,i.jsx)(C.Text,{mb:"calc(".concat(ec.fb," * 0.5) !important"),color:"#DBDBDB",opacity:.5,children:"If you confirm, these will be impossible to recover."}),r?(0,i.jsx)(eu,{}):null,(0,i.jsxs)(ea.HStack,{spacing:{base:"calc(".concat(ec.fb," * 1)"),xs:"calc(".concat(ec.fb," * 2.25)")},justify:"center",width:"100%",children:[(0,i.jsx)(d.Button,{py:4,width:"50%",variant:"outline",onClick:n,isDisabled:o,children:"Cancel"}),(0,i.jsx)(d.Button,{isDisabled:o,onClick:async()=>{l()},py:4,width:"50%",variant:"solid",backgroundColor:Y.lm.ORANGE,leftIcon:o?(0,i.jsx)(es.Spinner,{w:4,h:4}):void 0,children:"Delete"})]})]})})})})]})};var eg=n(2044),eh=n(39376),ex=n(60078),ep=n(42982),eb=n(31034),ef=n(17973),ev=n(77062),ej=n(48392);let ew=(0,u.default)(()=>n.e(3216).then(n.bind(n,13216)).then(e=>e.TokensRunningLowUpgradeModal),{loadableGenerated:{webpack:()=>[13216]}}),eC=e=>{let{isOpen:t,onClose:n,deleteImage:l,removeImage:o,loading:r}=e,{open:a}=(0,ev.A)(ej.A.UPGRADE),{isUserFreePlan:s}=(0,U.usePlan)(),[c,u]=(0,g.useState)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ee.Modal,{isOpen:t,onClose:n,closeOnOverlayClick:!0,isCentered:!0,children:[(0,i.jsx)(et.ModalOverlay,{}),(0,i.jsx)(en.ModalContent,{px:8,py:10,textAlign:"center",children:(0,i.jsx)(ei.ModalBody,{children:(0,i.jsx)(el.Center,{children:(0,i.jsxs)(eo.VStack,{maxW:{base:88,md:"md"},children:[(0,i.jsx)(el.Center,{mb:4,children:c?(0,i.jsx)(ed.A,{}):(0,i.jsx)(ef.A,{})}),(0,i.jsx)(er.Heading,{size:"lg",fontWeight:600,children:c?"Are you sure you want to delete this image?":"Are you sure you want to remove this image?"}),(0,i.jsxs)(eo.VStack,{mb:6,children:[(0,i.jsx)(C.Text,{fontWeight:"normal",children:"Removing images from a collection doesn't affect the source image. To delete an image permanently from all locations, check the box below."}),(0,i.jsx)(v.Tooltip,{isDisabled:!s,hasArrow:!0,placement:"bottom",label:"Bulk delete is available to premium users only",children:(0,i.jsxs)(ea.HStack,{pt:6,onClick:()=>{s&&a()},children:[(0,i.jsx)(eg.Checkbox,{variant:"alternative",disabled:s,isChecked:c,onChange:e=>u(e.target.checked),children:"Delete source images"}),s&&(0,i.jsxs)(ea.HStack,{children:[(0,i.jsx)(eh.IconButton,{"aria-label":"Upgrade",size:"xs",bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)",_hover:{bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)"},color:"white",rounded:"md",icon:(0,i.jsx)(A.A,{width:4,height:4})}),(0,i.jsx)(y.Box,{children:(0,i.jsx)(eb.A,{})})]})]})})]}),(0,i.jsxs)(ex.Stack,{direction:{base:"column",md:"row"},spacing:{base:4,xs:9},justify:"center",width:"100%",children:[(0,i.jsx)(d.Button,{py:4,width:{base:"100%",md:"50%"},variant:"outline",onClick:n,isDisabled:r,children:"Cancel"}),c?(0,i.jsx)(d.Button,{isLoading:r,isDisabled:r,onClick:l,py:4,width:{base:"100%",md:"50%"},variant:"solid",backgroundColor:Y.lm.ORANGE,leftIcon:r?(0,i.jsx)(es.Spinner,{w:4,h:4}):void 0,children:"Delete Image Everywhere"}):(0,i.jsx)(d.Button,{isLoading:r,isDisabled:r,onClick:o,py:4,width:{base:"100%",md:"50%"},variant:"glow",children:"Remove from Collection"})]})]})})})})]}),(0,i.jsx)(ep.default,{}),(0,i.jsx)(g.Suspense,{children:(0,i.jsx)(ew,{})})]})};var ey=n(5136),eI=n(24077),ek=n(3740),eS=n(15876),eA=n(8376),e_=n(77078),eO=n(958);let eD=e=>{let{collection:t}=e,[n,l]=(0,g.useState)(null),{data:o}=(0,eI.I)({fragment:eO.l3f,from:{__typename:"collection",id:t.id}});if(o&&!n){var r,a;l(null!==(a=null==o?void 0:null===(r=o.collection_images)||void 0===r?void 0:r.map(e=>{var t,n;return null!==(n=null==e?void 0:null===(t=e.generated_image)||void 0===t?void 0:t.url)&&void 0!==n?n:""}).filter(e=>!!e))&&void 0!==a?a:[])}return(0,i.jsxs)(s.Flex,{direction:"column",alignItems:"flex-start",borderRadius:"lg",overflow:"hidden",bg:"gradient.background",border:"1px solid",borderColor:"border.greyBlue",w:"6.25rem",h:"6.25rem",flexShrink:0,children:[(0,i.jsx)(y.Box,{h:"90%",w:"full",overflow:"hidden",position:"relative",p:0,children:n&&n.length>0?(0,i.jsx)(eA.K,{images:null!=n?n:[],name:t.collectionName,count:4}):(0,i.jsx)(y.Box,{position:"relative",w:"full",h:"full",display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(e_.A,{opacity:.6,boxSize:"3.5rem"})})}),(0,i.jsxs)(ea.HStack,{justify:"space-between",align:"center",p:1,w:"full",children:[(0,i.jsx)(C.Text,{fontSize:"2xs",fontWeight:"medium",color:"white",noOfLines:1,textAlign:"left",children:t.collectionName}),(0,i.jsx)(ek.Icon,{as:eS.mqA,color:"white",boxSize:2})]})]})},eB=e=>{let{collections:t}=e;return(0,i.jsxs)(s.Flex,{position:"relative",w:"full",overflow:"hidden",bg:"gradient.background",py:5,alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(s.Flex,{justify:"center",align:"center",h:"full",gap:3,overflowX:"hidden",children:t.slice(0,7).map(e=>(0,i.jsx)(eD,{collection:e},e.id))}),t.length>=7&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Box,{position:"absolute",top:0,left:0,right:0,bottom:0,width:"5rem",bg:"linear-gradient(272.51deg, rgba(2, 4, 6, 0) 1.9%, #030407 97.77%)"}),(0,i.jsx)(y.Box,{position:"absolute",top:0,right:0,bottom:0,width:"5rem",bg:"linear-gradient(90deg, rgba(2, 4, 6, 0) 0%, #06080D 100%)"})]})]})};var eE=n(26420),eT=n(19022),eM=n(93322),eR=n(89929);let eF={INITIAL:"RemoveCollectionsOnlyView",CONFIRMATION:"RemoveEverywhereView"},ez={[eF.INITIAL]:e=>{let{onClose:t,onRemove:n,onViewChange:l,isDeleteEverywhereEnabled:o,deleteEverywhere:r,onDeleteEverywhereChange:a,onPaymentOptionsOpen:s}=e,[d,c]=(0,g.useState)(!1),{selectedCollections:u}=(0,K._Q)(),m=e=>{if(a(e),e){if(o){l(eF.CONFIRMATION);return}s(),a(!1);return}},h=async()=>{try{c(!0),await n(!1)}finally{c(!1)}};return(0,i.jsx)(ei.ModalBody,{p:0,children:(0,i.jsxs)(eo.VStack,{gap:6,children:[(0,i.jsx)(ef.A,{boxSize:12}),(0,i.jsx)(er.Heading,{fontSize:{base:"lg",sm:"2xl"},fontWeight:"semibold",children:"Are you sure you want to remove this content?"}),(0,i.jsx)(C.Text,{fontSize:{base:"sm",sm:"lg"},fontWeight:"normal",color:"content.secondary",children:"Removing collections is permanent. Original images remain in generations. To remove images permanently, check the box below."}),(0,i.jsx)(eB,{collections:u}),(0,i.jsx)(v.Tooltip,{isDisabled:o,hasArrow:!0,closeOnClick:!1,label:"Unlock image deletion and more with Leonardo Premium!",placement:"top",bgColor:"button.input",textAlign:"center",children:(0,i.jsxs)(ea.HStack,{gap:2,children:[(0,i.jsx)(eT.S,{id:"remove-everywhere-id",size:"sm",className:"border-2",checked:r,onCheckedChange:e=>m(e)}),(0,i.jsx)(eM.J,{htmlFor:"remove-everywhere-id",className:"text-sm md:text-lg",children:"Delete Everywhere"}),!o&&(0,i.jsx)(eh.IconButton,{"aria-label":"Upgrade",size:"xs",bg:"gradient.main",color:"content.primary",rounded:"md",onClick:s,icon:(0,i.jsx)(A.A,{boxSize:5})})]})}),(0,i.jsxs)(ex.Stack,{direction:{base:"column",sm:"row"},gap:4,py:4,width:"full",children:[(0,i.jsx)(eE.$,{size:"lg",variant:"outline",onClick:t,disabled:d,className:"w-full p-4",children:"Cancel"}),(0,i.jsx)(eE.$,{size:"lg",loading:d,variant:"gradientOutline",className:"w-full p-4",onClick:h,children:"Remove All"})]})]})})},[eF.CONFIRMATION]:e=>{let{onClose:t,onRemove:n,onDeleteEverywhereChange:l,deleteEverywhere:o,onViewChange:r}=e,{selectedCollections:a}=(0,K._Q)(),[s,d]=(0,g.useState)(!1),c=async()=>{try{d(!0),await n(!0)}finally{d(!1)}},u=e=>{l(e),e||r(eF.INITIAL)};return(0,i.jsx)(ei.ModalBody,{p:0,children:(0,i.jsxs)(eo.VStack,{gap:6,children:[(0,i.jsx)(ed.A,{boxSize:12}),(0,i.jsx)(er.Heading,{fontSize:{base:"lg",sm:"2xl"},fontWeight:"semibold",children:"Are you sure you want to delete everywhere?"}),(0,i.jsxs)(C.Text,{fontSize:{base:"sm",sm:"lg"},fontWeight:"normal",color:"content.secondary",children:["All selected content including collections, sub-collections images and variations will be ",(0,i.jsx)("strong",{children:"permanently deleted"}),"."]}),(0,i.jsx)(eB,{collections:a}),(0,i.jsxs)(ea.HStack,{gap:2,children:[(0,i.jsx)(eT.S,{id:"remove-everywhere-id",size:"sm",className:"border-2",checked:o,onCheckedChange:e=>u(e)}),(0,i.jsx)(eM.J,{htmlFor:"remove-everywhere-id",className:"text-sm md:text-lg",children:"Delete Everywhere"})]}),(0,i.jsxs)(ex.Stack,{direction:{base:"column",sm:"row"},gap:4,py:4,width:"full",justifyContent:"center",children:[(0,i.jsx)(eE.$,{size:"lg",variant:"outline",onClick:t,disabled:s,className:"w-full p-4",children:"Cancel"}),(0,i.jsxs)(eE.$,{size:"lg",loading:s,onClick:c,variant:"destructive",className:"w-full p-4",children:[(0,i.jsx)(M.A,{boxSize:6}),"Delete Everywhere"]})]})]})})}},eL=e=>{let{isOpen:t,onClose:n,handleRemoveCollections:l}=e,[r,a]=(0,g.useState)(!1),[s,d]=(0,g.useState)(eF.INITIAL),{isOpen:c,onClose:u,onOpen:m}=(0,o.useDisclosure)(),{selectedCollections:h,clearSelectedCollections:x}=(0,K._Q)(),{selectedImages:p,clearSelectedImages:b}=(0,L.V)(),{toast:f}=(0,eR.x)(),{hasPermission:v}=(0,_.S)(),j=v("bulkDelete","create"),w=async e=>{if(e&&!j){m();return}try{await l(h.map(e=>e.id),p.map(e=>e.id),e),x(),b(),a(!1),n(),d(eF.INITIAL)}catch(e){f({title:"Error",description:e instanceof Error?e.message:"An unexpected error occurred while removing content",status:"error",type:"floating",position:"top",duration:5e3,isClosable:!0})}},C=ez[s];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ee.Modal,{isOpen:t,onClose:n,children:[(0,i.jsx)(et.ModalOverlay,{}),(0,i.jsx)(en.ModalContent,{w:"full",maxW:"45rem",bg:"gradient.background",p:{base:6,sm:11},textAlign:"center",children:(0,i.jsx)(C,{onClose:()=>{n(),d(eF.INITIAL)},onRemove:w,onPaymentOptionsOpen:m,isDeleteEverywhereEnabled:j,deleteEverywhere:r,onDeleteEverywhereChange:a,onViewChange:d})})]}),(0,i.jsx)(ey.default,{isOpen:c,onClose:u})]})};var eN=n(52516),eP=n(21542),eW=n(64679);let eH=e=>(0,i.jsxs)(ek.Icon,{viewBox:"0 0 17 16",fill:"none",...e,children:[(0,i.jsx)("path",{d:"M7.97279 8.2233C8.04646 8.4007 8.04646 8.60136 7.97279 8.77876C7.93595 8.86794 7.88276 8.94839 7.81588 9.01528L5.8771 10.9541C5.73557 11.0956 5.54942 11.1673 5.3633 11.1673C5.17718 11.1673 4.99103 11.0966 4.8495 10.9541C4.56547 10.67 4.56547 10.2096 4.8495 9.92553L5.54743 9.22757H1.08056C0.679229 9.22757 0.353516 8.90185 0.353516 8.50053C0.353516 8.0992 0.679229 7.77349 1.08056 7.77349H5.54648L4.84855 7.07553C4.56452 6.7915 4.56452 6.33104 4.84855 6.04701C5.13258 5.76298 5.59307 5.76298 5.8771 6.04701L7.81588 7.98578C7.88276 8.05461 7.93595 8.13509 7.97279 8.2233Z",fill:"currentColor"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37398 4.16669H12.5C14.112 4.16669 14.9999 5.05469 15.0006 6.66669V11.3334C15.0006 12.9454 14.1126 13.8334 12.5006 13.8334H4.50061C2.88861 13.8334 2.00061 12.9454 2.00061 11.3334V10.5007H2.99996V11.3334C2.99996 12.3847 3.44863 12.8334 4.49996 12.8334H12.5C13.5513 12.8334 14 12.3847 14 11.3334L13.9993 6.66669C13.9993 5.61535 13.5506 5.16669 12.4993 5.16669H9.16597C9.03331 5.16669 8.90662 5.11402 8.81262 5.02002L6.95927 3.16669H4.49996C3.44863 3.16669 2.99996 3.61535 2.99996 4.66669V6.50067H2.00061V4.66669C2.00061 3.05469 2.88861 2.16669 4.50061 2.16669H7.16728C7.29994 2.16669 7.42663 2.21935 7.52063 2.31335L9.37398 4.16669Z",fill:"currentColor"})]});var eV=n(11819),eG=n(98371),eU=n(88095),eQ=n(4414);let eY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...n}=e,[i,l]=(0,eU.n)(eO.oLr,{...n,update(e,n,i){var l,o;let r=(0,eQ.E)(e),a=!1;null==n||null===(o=n.data)||void 0===o||null===(l=o.delete_generations)||void 0===l||l.returning.forEach(t=>{a=(0,eQ.i)(e,r,t.id)||a;let n=e.identify({id:t.id,__typename:"generations"}),i=e.evict({id:n});a||(a=i)}),a&&e.gc(),null==t||t(e,n,i)}});return[(0,g.useCallback)((e,t)=>i({variables:{ids:e},...t}),[i]),l]},e$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...n}=e,[i,l]=(0,eU.n)(eO.LVx,{...n,update(e,n,i){var l,o;null===(o=n.data)||void 0===o||null===(l=o.delete_generated_images)||void 0===l||l.returning.forEach(t=>{let n=e.identify({id:t.id,__typename:"generated_images"});e.evict({id:n})}),null==t||t(e,n,i)}});return[(0,g.useCallback)(e=>i({variables:{ids:e}}),[i]),l]};var eq=n(89444),eJ=n(45269);let eK=(0,u.default)(()=>Promise.resolve().then(n.bind(n,5136)).then(e=>e.default),{loadableGenerated:{webpack:()=>[5136]}}),eZ=e=>e.reduce((e,t)=>{var n;return e+((null===(n=t.variations)||void 0===n?void 0:n.length)||0)},0),eX=(e,t)=>{let n=eZ(t);return"Are you sure you want to delete ".concat(x(e)).concat(p(n),"?")},e0=e=>{let t,{showCollectionTree:n,collection:u,onConfirmationClose:h,onDeleteCallback:x,pl:p={base:2,md:6},pr:b={base:2,md:6}}=e,{isOpen:v,onClose:j,onOpen:w}=(0,o.useDisclosure)(),{isOpen:C,onClose:y,onOpen:I}=(0,o.useDisclosure)(),{isOpen:k,onClose:S,onOpen:A}=(0,o.useDisclosure)(),{isOpen:O,onClose:D,onOpen:B}=(0,o.useDisclosure)(),T=(0,Q.w)(),{userSelectedTeam:M}=(0,V.s)(),F=!!M(),N=(0,eJ.A)(),{hasPermission:P}=(0,_.S)(),W=P("generation","delete"),G=P("bulkDownload","create"),{isCreatingCollectionImages:U,isDeletingCollectionImages:Y,isUpdatingCollectionsLoading:$,handleAddCollectionImage:q,handleRemoveCollectionImage:Z,deleteCollection:ee}=(0,eV.A)(),{showCollectionImagesToast:et}=(0,eG.A)(),{isSelectingImages:en,selectedImages:ei,setIsSelectingImages:el,clearSelectedImages:eo}=(0,L.V)(),{selectedCollections:er}=(0,K._Q)(),{isLibraryCollections:ea,isTeamFeedYourCollections:es,isTeamFeedTeamCollections:ed}=(0,eq.G)(),{openCollectionPrivacyWarning:ec}=(0,z.o)(),eu=(0,r.useToast)(),eg=(0,g.useCallback)(()=>{null==h||h(),eo(),el(!1),x(),j(),y(),S(),D()},[eo,h,x,j,y,S,D,el]),[eh,{loading:ex}]=e$({onCompleted:eg}),[ep,{loading:eb}]=eY({onCompleted:eg}),{isBulkDownloadOfCollectionsEnabled:ef,isBulkDeleteOfCollectionsEnabled:ev}=(0,H.D)(),ej=P("bulkDownload","create"),{download:ew,isDownloading:ey}=(0,eW.rC)({images:ei,includeVariations:!1,filename:"original_images",collectionIds:ef&&ej?er.map(e=>e.id):[]}),{download:eI,isDownloading:ek}=(0,eW.rC)({images:ei,includeVariations:!0,filename:"all_images",collectionIds:ef&&ej?er.map(e=>e.id):[]}),[eS]=(0,l._)(eO.J02,{}),eA=async(e,t,n)=>{try{for(let t=0;t<e.length;t+=8){let i=e.slice(t,t+8);(await Promise.allSettled(i.map(e=>ee(BigInt(e),n)))).forEach(e=>{"rejected"===e.status&&c.Cp(e.reason)})}await eh(t),y()}catch(e){c.Cp(e),eu({title:"Error deleting items",description:"Some items could not be deleted. Please try again.",status:"error",duration:5e3,isClosable:!0})}},eD=async()=>{let e=ei.map(e=>e.id),t=new Set,n=[];if(e.length>0){for(let e of ei)e.generationId&&t.add(e.generationId);await eh(e);let l=Array.from(t);if(l)for(let e of l){var i;let{data:t}=await eS({variables:{generationId:e},fetchPolicy:"network-only"});0===((null==t?void 0:null===(i=t.generated_images_aggregate.aggregate)||void 0===i?void 0:i.count)||0)&&n.push(e)}}n.length>0&&ep(n,{refetchQueries:[{query:eO.NO$,variables:{where:{userId:{_eq:T}}}}]})},eB=async e=>{e&&ei&&await Z(e,ei,(e,t,n,i)=>{et(e,t,n,i),S()})},eE=async(e,t)=>{e&&t&&await q(e,t,(e,t,n,i)=>et(e,t,n,i))},eT=async(e,t)=>{e&&(ei.find(e=>!e.isPublic)&&F&&t&&ec(),t?await eE(e,ei):await eB(e))},eM=ei.length,eR=er.length,eF=ea||es||ed,ez=eF&&er.length,eU=eZ(ei),eQ=(0,m.useParams)();eF&&(t=Array.isArray(null==eQ?void 0:eQ.id)?null==eQ?void 0:eQ.id[0]:null==eQ?void 0:eQ.id);let[e0,e1]=(0,g.useState)(!1),e5=(0,g.useCallback)(e=>{e1(e)},[]);return!e0||ei.length||er.length||e1(!1),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.Collapse,{in:en,animateOpacity:!0,style:{zIndex:1},children:[(0,i.jsxs)(s.Flex,{bg:"#181F2F",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",rowGap:2,columnGap:2,py:2,pl:p,pr:b,children:[(0,i.jsx)(s.Flex,{display:{base:"none","2xl":"flex"},alignItems:"center",fontSize:"sm",whiteSpace:"nowrap",children:(0,i.jsx)(f,{imageCount:eM,variationsCount:eU,collectionsCount:er.length})}),(0,i.jsxs)(s.Flex,{gap:2,flexWrap:"wrap",display:{base:"grid","2xl":"flex"},gridTemplateColumns:{base:"1fr",sm:"1fr 1fr",md:"repeat(auto-fit, minmax(10rem, 1fr))",lg:"1fr 1fr 1fr"},justifyContent:{base:"flex-start",lg:"flex-end","2xl":"flex-end"},flex:1,children:[(0,i.jsx)(s.Flex,{display:{base:"flex","2xl":"none"},alignItems:"center",fontSize:"sm",whiteSpace:"nowrap",children:(0,i.jsx)(f,{imageCount:eM,variationsCount:eU,collectionsCount:er.length})}),(!W||!G)&&(0,i.jsx)(d.Button,{onClick:B,variant:"gradient",fontWeight:"semibold",borderRadius:"1.875rem",size:"sm",w:{base:"full",sm:20},height:8,color:"white",transition:"none",justifySelf:"flex-end",children:"Upgrade"}),(0,i.jsx)(J,{openBuyModal:B}),n&&(ez?(0,i.jsx)(eN.f,{displayText:"Move to",icon:(0,i.jsx)(eH,{boxSize:4.5,mr:2}),mode:eP.v1.MOVE,textAlign:"center",selectedImages:ei,onCollectionChecked:eT,currentCollectionId:t,isOpen:e0,onOpenChange:e5,closeModalOnEmptySelection:!0}):(0,i.jsx)(eN.f,{displayText:"Organize",rounded:"lg",icon:(0,i.jsx)(e_.A,{boxSize:4.5,mr:2}),mode:eP.v1.UPDATE,textAlign:"center",selectedImages:ei,onCollectionChecked:eT,currentCollectionId:t,isOpen:e0,onOpenChange:e5,closeModalOnEmptySelection:!0})),(0,i.jsx)(E,{isLoading:ey||ek,onDownloadOriginalImages:ew,onDownloadAllImages:eI,imageCount:eM,collectionCount:ef?er.length:0,handleOpenBuyModal:B,width:"100%"}),(0,i.jsx)(R,{imagesCount:eM,collectionsCount:eR,isCollectionPage:eF,onPaymentOptionsOpen:B,onDeleteImagesOpen:w,onRemoveCollectionImagesOpen:A,justifyContent:"center",onRemoveCollectionsContentOpen:I,canTeamMemberDelete:F?(()=>{let e=ei.some(e=>e.userId!==T);return!!N||!e})():null}),(0,i.jsx)(X,{})]})]}),(0,i.jsx)(em,{title:eX(eM,ei),isOpen:v,onClose:j,deleteImage:eD,loading:ex||eb||$||U||Y}),(0,i.jsx)(eC,{isOpen:k,onClose:S,deleteImage:eD,removeImage:()=>eB(u)}),ev&&(0,i.jsx)(eL,{isOpen:C,onClose:y,handleRemoveCollections:eA}),O&&(0,i.jsx)(g.Suspense,{children:(0,i.jsx)(eK,{isOpen:O,onClose:D})})]})})}}}]);