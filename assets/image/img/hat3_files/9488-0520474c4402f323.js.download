try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="be9c7232-d838-4a91-af79-ff44c65d5641",e._sentryDebugIdIdentifier="sentry-dbid-be9c7232-d838-4a91-af79-ff44c65d5641")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9488],{36460:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(95155),o=n(3740);let r=e=>(0,i.jsx)(o.Icon,{stroke:"currentcolor",viewBox:"-2 0 20 18",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M8.0007 1.8286C9.8798.1415 12.7838.1975 14.5941 2.011 16.4037 3.8254 16.4661 6.7149 14.7829 8.5997L7.9991 15.3932 1.2168 8.5997C-.4664 6.7149-.4032 3.8206 1.4056 2.011 3.2176.1999 6.1159.1391 8.0007 1.8286Z"})})},45061:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(95155),o=n(3740);let r=e=>(0,i.jsx)(o.Icon,{width:4,height:4,viewBox:"0 0 24 24",fill:"currentcolor",...e,children:(0,i.jsx)("path",{d:"M12 10.75a4.25 4.25 0 1 1 .02-8.51 4.25 4.25 0 0 1-.01 8.51Zm0-7a2.75 2.75 0 1 0 .01 5.5 2.75 2.75 0 0 0 0-5.5Zm4 18H8c-2.42 0-3.75-1.32-3.75-3.73 0-2.66 1.5-5.77 5.75-5.77h4c4.24 0 5.75 3.1 5.75 5.77 0 2.4-1.33 3.73-3.75 3.73Zm-6-8c-3.94 0-4.25 3.27-4.25 4.27 0 1.56.67 2.23 2.25 2.23h8c1.58 0 2.25-.67 2.25-2.23 0-1-.3-4.27-4.25-4.27h-4Z"})})},51695:(e,t,n)=>{n.d(t,{A:()=>ei});var i=n(95155),o=n(88095),r=n(77700),l=n(5571),a=n(29826),s=n(24369),d=n(59108),c=n(39376),u=n(58727),h=n(60078),g=n(58670),p=n(76604),x=n(35695),m=n(12115),b=n(15876),v=n(30552),j=n(8142),w=n(19149),f=n(91075),y=n(3038),C=n(30510),I=n(36460),k=n(64478);let S=e=>{let[t,n]=(0,m.useState)(!1),o=(0,k.w)(),{handleLike:r,likeCount:l,liked:a,itemUserId:s,iconOnLeft:d=!0,isSmall:c=!1}=e,p=!!o,x=(0,m.useMemo)(()=>s===o,[s,o]);return(0,i.jsx)(u.HStack,{cursor:x?"default":void 0,backgroundColor:"#63636355",rounded:"3xl",py:2,px:3,children:(0,i.jsx)("div",{onClick:p&&!x?r:void 0,children:(0,i.jsxs)(h.Stack,{direction:d?"row":"row-reverse",align:"center",children:[(0,i.jsx)(g.Text,{...c&&{size:"0.875rem"},children:l}),(0,i.jsx)(C.P.button,{initial:{scale:1},onHoverEnd:()=>n(!1),onTap:e=>{e.stopPropagation(),n(!0)},whileHover:x?void 0:{scale:t?1:1.2,transition:{type:"spring",stiffness:500,damping:5}},whileTap:{scale:1.2,transition:{type:"spring",delay:.5,stiffness:500,damping:5}},children:(0,i.jsx)(I.A,{cursor:x?"default":void 0,boxSize:c?6:8,stroke:a?"none":"white",fill:a?"red":"none"})})]})})})};var A=n(67223),B=n(69642);let M=e=>{let{user:t,imageSize:n="10"}=e,o=(null==t?void 0:t.username)||"No name";return(0,i.jsxs)(d.Flex,{alignItems:"center",overflow:"hidden",children:[(0,i.jsx)(B.Avatar,{name:o,src:void 0,boxSize:n}),(0,i.jsx)(g.Text,{fontWeight:"700",fontSize:"md",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mx:2,children:o})]})};var D=n(85756),E=n(98021),T=n(49993);let _=e=>{let{conditionalImageUrl:t,isImageSelected:n,setImageHovered:o,isLoaded:l,onLoad:a,title:s,imgWidth:c,imgHeight:u,isTransparent:h,innerBorderRadius:g,loadingStrategy:p="eager"}=e;return(0,i.jsxs)(r.Box,{position:"relative",rounded:g,overflow:"hidden",borderColor:"transparent",borderWidth:n?"md":"0",transition:".1s",w:"100%",h:"100%",children:[(0,i.jsx)(r.Box,{position:"relative",zIndex:1,opacity:+!!l,boxSizing:"border-box",minWidth:"100%",backgroundColor:"background.grey",__css:{filter:l?"none":"grayscale(100%)"},rounded:g,overflow:"hidden",...h&&T.c8,children:(0,i.jsx)(E._,{src:"".concat(t+D.xN),alt:s,width:c,height:u,onLoad:a,style:{width:"100%",height:"auto",objectFit:"cover"},loading:p})}),(0,i.jsx)(d.Flex,{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),opacity:n?"1":"0",_hover:{opacity:1},direction:"column",justifyContent:"space-between",position:"absolute",bottom:0,zIndex:2,left:0,height:"100%",width:"100%",p:"4",transition:".25s",background:n?"linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.3))":"linear-gradient(0deg, #000000c9, #00000083)"})]})};var F=n(70024),z=n(54092),U=n(37996);let O=e=>{let{imageUrl:t,isHovered:n,isImageLoaded:o,isSelected:l,motionMp4Url:a,onImageLoad:s,title:d}=e,[c,u]=(0,m.useState)(!1),[h,g]=(0,m.useState)(0),[p,x]=(0,m.useState)(1),b=(0,m.useRef)(null),v=(0,m.useCallback)(()=>{var e,t;c||u(!0),(null===(e=b.current)||void 0===e?void 0:e.paused)!==!1&&(null===(t=b.current)||void 0===t||t.play().catch(()=>{})),g(0)},[c]);(0,m.useEffect)(()=>{n&&v()},[n,v]),(0,m.useEffect)(()=>{var e,t;h>=3?null===(e=b.current)||void 0===e||e.pause():null===(t=b.current)||void 0===t||t.play().catch(()=>{})},[h]);let j="0.62rem";return(0,i.jsxs)(r.Box,{position:"relative",rounded:j,overflow:"hidden",borderColor:"transparent",borderWidth:l?"md":"0",transition:".1s",w:"100%",h:"100%",children:[1===p&&(0,i.jsx)(F.Image,{src:t+D.xN,alt:d,rounded:j,overflow:"hidden",width:"100%",position:"relative",zIndex:1,height:"100%",opacity:+!!o,onLoad:s,transition:".1s",__css:{filter:o?"none":"grayscale(100%)"}}),c&&(0,i.jsx)(r.Box,{rounded:"lg",width:"100%",position:"absolute",top:"0",zIndex:1,height:"100%",boxSizing:"border-box",transition:".1s",borderStyle:"solid",borderWidth:+!!l,borderColor:"transparent",children:(0,i.jsx)(U.C,{ref:b,videoUrl:a,posterUrl:t,fallbackText:d,loop:!1,onPlay:()=>x(0),onPause:()=>x(1),onEnded:()=>g(e=>e+1),startLoad:c,style:{display:1===p?"none":void 0}})}),(0,i.jsx)(z.A,{className:"feed-motion-play-icon",position:"absolute",right:3,bottom:3,width:12,height:12,zIndex:4,borderRadius:"full",transformOrigin:"center",transition:"0.375s",_hover:{transform:"scale(1.2)",boxShadow:"0 0 1rem hsl(274 100% 50% / 0.6)"},opacity:p,onPointerUp:v})]})};var L=n(84492),P=n(57599),W=n(83833),R=n(69122),G=n(75591),N=n(56496),H=n(80891);let V=e=>{let{isGenerationProcessing:t,isPublic:n}=e;return t?(0,i.jsx)(L.Spinner,{size:"sm"}):n?(0,i.jsx)(G.A,{color:"white"}):(0,i.jsx)(N.A,{color:"white"})},Z=e=>{let{isGenerationProcessing:t,isPublic:n,...o}=e,{isUserFreePlan:r}=(0,H.usePlan)(),{isFreePlanElevated:l}=(0,W.D)(),{userSelectedTeam:a}=(0,R.s)(),s=a(),d=r&&!l?"This image is public. Please subscribe to a paid plan if you wish to generate private images.":"This image is public",u="This image is private.";return s.id&&(d="This image is visible in the Team Feed",u="This image is not visible in the Team Feed"),(0,i.jsx)(P.Tooltip,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:n?d:u,children:(0,i.jsx)(c.IconButton,{icon:(0,i.jsx)(V,{isGenerationProcessing:t,isPublic:n}),"aria-label":"visibility indicator",...o})})};var Y=n(19321),q=n(68691),J=n(64843),Q=n(48035),K=n(81434),X=n(958),$=n(75264);let ee=e=>{let{isImageSelected:t,...n}=e;return(0,i.jsx)(r.Box,{position:"absolute",inset:0,w:"100%",h:"100%",rounded:"0.62rem",overflow:"hidden",bg:"background.codGrey",borderStyle:"solid",borderColor:"transparent",borderWidth:t?"md":"0",_before:{backgroundPosition:"center",opacity:"0.2",backgroundRepeat:"no-repeat",backgroundSize:"50%",backgroundImage:"url('".concat(D.$D,"')"),rounded:"0.62rem",content:"''",position:"absolute",width:"100%",height:"100%",display:"block",filter:"grayscale(100%)"},...n})},et={backgroundClip:"padding-box",background:"linear-gradient(#202125, #202125) padding-box, linear-gradient(81.02deg, #FA5560 -23.47%, #B14BF4 45.52%, #4D91FF 114.8%) border-box",backgroundRepeat:"no-repeat",__before:{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",zIndex:1}},en=e=>{let{viewerUserId:t,imageUser:n,isTeamImageFeed:i,pathName:o}=e,r=t===(null==n?void 0:n.id),l=o===Y.a.AI_GENERATIONS||o===Y.a.TEAM_LIBRARY,a=(null==o?void 0:o.startsWith(Y.a.TEAM_FEED_TEAM_COLLECTIONS))||(null==o?void 0:o.startsWith(Y.a.TEAM_FEED_YOUR_COLLECTIONS));return!!l||!i&&!!r&&!a},ei=e=>{let{title:t,user:n,prompts:r,id:C,isLiked:I,likes:k,public:B,openImageModal:D,generated_image_variation_generics:E,generation:T,conditionalImageUrl:F,imageUrl:z,motionGifUrl:U,motionMp4Url:L,nsfw:P,generated_image_moderation:G,collection_images:N,loadingStrategy:H,onImageClick:V,teamId:ei,isTeamImageFeed:eo=!1}=e,{isClickDragSelectionEnabled:er}=(0,W.D)(),el=(0,m.useRef)(null),{isSelectingImages:ea,toggleImageSelection:es,selectedImages:ed,isDragSelectingImages:ec,toggleImageDragSelect:eu}=(0,K.V)(),{isLoggedIn:eh,id:eg}=(0,J.J)(),{userSelectedTeam:ep}=(0,R.s)(),ex=ep(),em=T.imageWidth,eb=T.imageHeight,[ev]=(0,o.n)(X.wIx,{variables:{object:{generatedImageId:C}}}),[ej]=(0,o.n)(X.dTl,{variables:{generatedImageId:C,userId:eg}}),ew=!!(L||U),ef=ed.some(e=>e.id===C),[ey,eC]=(0,m.useState)(I),[eI,ek]=(0,m.useState)(null!=k?k:0),[eS,eA]=(0,m.useState)(!1),[eB,eM]=(0,m.useState)(!1),[eD,eE]=(0,m.useState)(!1),eT=(0,m.useRef)(null),e_=(0,p.W)(eT,{margin:"100%"}),eF=(0,q.G)(e=>e.user.showNsfw),ez=(0,Q.Gi)({image:{nsfw:P,generated_image_moderation:G},generation:T,nsfwAllowed:eF}),[eU,eO]=(0,m.useState)(ez),eL=(0,m.useCallback)(()=>{eE(!0)},[eE]),eP=(0,m.useCallback)(async e=>{e.stopPropagation(),eS||(eA(!0),eC(!ey),ey?(ek(e=>e-1),await ej({})):(ek(e=>e+1),await ev({})),eA(!1))},[eS,eA,eC,ey,ek,ej,ev]),eW=(0,m.useMemo)(()=>({liked:ey,likeCount:eI,handleLike:eP}),[ey,eI,eP]),eR=!!(0,$.yZ)(E).length,eG=!!(0,$.N2)(E).length,eN=!!(0,$.H5)(E).length,eH=T.transparency!==X.P2Y.Disabled,eV="".concat(T.imageWidth,"/").concat(T.imageHeight),eZ=(0,m.useCallback)(e=>{es({id:C,isPublic:B,url:z,variations:E,motionMp4Url:L,motionGifUrl:U,collection_images:N,teamId:ei,userId:eg,generationId:T.id},e)},[E,T.public,C,B,z,U,L,N,es,ei,eg,T.id]),eY=(0,l.useSize)(el),eq=200>((null==eY?void 0:eY.width)||0),eJ=(0,x.usePathname)(),eQ=eJ===Y.a.HOME,eK=(null==eJ?void 0:eJ.startsWith(Y.a.TEAM_LIBRARY))&&eJ!==Y.a.TEAM_LIBRARY,eX=en({viewerUserId:eg,imageUser:n,isTeamImageFeed:eo,pathName:eJ}),e$="0.62rem";return(0,i.jsx)(a.Card,{"data-test-hidden":!0,ref:el,cursor:"pointer",_groupHover:{bg:"#232323"},overflow:"hidden",maxW:"100%",onClick:ec?void 0:function(t){if(ea)er||eZ(!1);else if(V)V(e);else{var n;t.target instanceof SVGElement&&(null===(n=t.target.parentElement)||void 0===n?void 0:n.classList.contains("feed-motion-play-icon"))||null==D||D(C)}},onMouseDown:er?function(e){ea&&(eu(),eZ(!0),e.preventDefault(),e.stopPropagation())}:void 0,onMouseOver:er?function(){ec&&eZ(!1)}:void 0,onMouseUp:er?function(){ec&&eu()}:void 0,__css:{aspectRatio:eV,userSelect:ec?"none":void 0},rounded:"lg",children:(0,i.jsxs)(s.CardBody,{p:0,position:"relative",ref:eT,w:"100%",h:"100%",children:[ew?(0,i.jsx)(O,{imageUrl:z,isHovered:eB,isImageLoaded:eD,isSelected:ef,motionGifUrl:U||"",motionMp4Url:L||"",onImageLoad:eL,title:t}):(0,i.jsx)(_,{conditionalImageUrl:F,setImageHovered:eM,isImageSelected:ef,isLoaded:eD,onLoad:eL,title:t,imgWidth:em,imgHeight:eb,isTransparent:eH,innerBorderRadius:e$,loadingStrategy:H}),!eD&&(0,i.jsx)(ee,{isImageSelected:ef}),eU&&(0,i.jsx)(A.I,{onClose:()=>{eO(!1)},imageLoaded:eD}),ea&&!eU&&(0,i.jsx)(d.Flex,{position:"absolute",display:"flex",w:"100%",h:"100%",alignItems:"center",justifyContent:"center",top:0,transition:".1s",borderColor:"transparent",borderStyle:"solid",borderWidth:ef?"md":0,rounded:e$,__css:ef?et:void 0,children:(0,i.jsx)(c.IconButton,{icon:(0,i.jsx)(w.A,{icon:ef?(0,i.jsx)(v.A,{width:7,height:7}):(0,i.jsx)(j.A,{width:7,height:7})}),"aria-label":"Select Image",zIndex:3,minW:10,rounded:"full",w:10,transition:"0s",bg:ef?"gradient.main":"transparent",backdropFilter:ef?"none":"blur(0.5rem)",pointerEvents:"none"})}),!eU&&e_&&(0,i.jsxs)(i.Fragment,{children:[!eQ&&(0,i.jsxs)(u.HStack,{position:"absolute",top:3,right:3,transition:"0.1s",opacity:eB&&!ea?0:1,zIndex:2,children:[eR&&(0,i.jsx)(c.IconButton,{variant:"blurredBackground","aria-label":"View Upscale",icon:(0,i.jsx)(y.A,{})}),eG&&(0,i.jsx)(c.IconButton,{variant:"blurredBackground",icon:(0,i.jsx)(f.A,{}),"aria-label":"View Without Background"}),eN&&(0,i.jsx)(c.IconButton,{variant:"blurredBackground",icon:(0,i.jsx)(b.lsh,{}),"aria-label":"View Unzoom",_hover:{}}),eX&&(0,i.jsx)(Z,{variant:"blurredBackground",isGenerationProcessing:!1,isPublic:B})]}),eQ&&eX&&(0,i.jsx)(u.HStack,{position:"absolute",top:3,right:3,transition:"opacity 0.1s",opacity:eB&&!ea?0:1,zIndex:2,children:(0,i.jsx)(Z,{variant:"blurredBackground",isGenerationProcessing:!1,isPublic:B})}),!eB&&eK&&ea&&(0,i.jsx)(d.Flex,{direction:"column",justifyContent:"space-between",position:"absolute",bottom:0,zIndex:3,left:0,height:"100%",width:"100%",p:4,children:(0,i.jsx)(d.Flex,{justifyContent:"space-between",color:"white",children:(0,i.jsx)(M,{imageSize:eq?7:10,user:n})})}),!ea&&(0,i.jsxs)(d.Flex,{onMouseEnter:()=>eM(!0),onMouseLeave:()=>eM(!1),rounded:"lg",_hover:{opacity:1},opacity:0,direction:"column",justifyContent:"space-between",position:"absolute",bottom:0,zIndex:3,left:0,height:"100%",width:"100%",p:4,transition:".1s",background:"linear-gradient(0deg, hsl(0 0% 0% / ".concat(ew?.17:.51,"), hsl(0 0% 0% / ").concat(ew?.26:.79,"))"),children:[(0,i.jsxs)(d.Flex,{justifyContent:"space-between",color:"white",children:[(0,i.jsx)(M,{imageSize:eq?7:10,user:n}),eh&&!ex.id&&(0,i.jsx)(S,{...eW,itemUserId:null==n?void 0:n.id})]}),(0,i.jsxs)(h.Stack,{spacing:"2",children:[(0,i.jsx)(g.Text,{as:"h2",size:"md",color:"light",fontSize:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:t}),(0,i.jsx)(g.Text,{color:"#DBDBDB",fontSize:"0.75rem",children:r})]})]})]})]})})}},51845:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(95155),o=n(59108),r=n(42066),l=n(49747),a=n(33636),s=n(85821),d=n(12115),c=n(84493);let u=e=>{let{placeholderText:t="Search gallery",onChange:n,onSubmit:u,hideButton:h,disableHotkeys:g,isDisabled:p,fullWidth:x=!1,...m}=e,[b,v]=(0,d.useState)(""),j=()=>{null==u||u(b)};return(0,i.jsxs)(o.Flex,{w:x?"100%":"auto",alignItems:"center",children:[(0,i.jsxs)(r.InputGroup,{height:"2.0625rem",rounded:"lg",bg:"surface.inputDefault",boxShadow:"0 2px 4px -1px #0000001F",w:"100%",alignItems:"center",_placeholder:{color:"content.tertiary",fontWeight:500},_hover:{background:"old.darkblue"},...m,children:[(0,i.jsx)(l.InputLeftElement,{pointerEvents:"none",height:"2.0625rem",children:(0,i.jsx)(c.A,{viewBox:"0 0 20 20",w:5,h:5})}),(0,i.jsx)(a.Input,{onChange:e=>{let t=e.target.value.slice(0,50);v(t),null==n||n({...e,target:{...e.target,value:t}})},onKeyDown:e=>{"Enter"!==e.key||g||j()},placeholder:t,value:b,variant:"searchInput","aria-label":"Search gallery",isDisabled:p})]}),!h&&(0,i.jsx)(s.Button,{ml:2,height:"2.0625rem",w:"4.95rem",variant:"primary",px:2,py:2,onClick:j,isDisabled:p,"aria-label":"Search gallery",fontWeight:500,children:"Search"})]})}},54235:(e,t,n)=>{n.d(t,{M:()=>a,z:()=>l});var i=n(95155),o=n(12115);let r=(0,o.createContext)({virtualItem:{}}),l=()=>(0,o.useContext)(r),a=e=>{let{virtualItem:t,children:n}=e,l=(0,o.useMemo)(()=>({virtualItem:t}),[t]);return(0,i.jsx)(r.Provider,{value:l,children:n})}},71098:(e,t,n)=>{n.d(t,{D:()=>p});var i=n(95155),o=n(30510),r=n(12115),l=n(89213),a=n(81434),s=n(51695),d=n(8387),c=n(80994),u=n(54235),h=n(83833);let g={hidden:{opacity:0,y:"1.875rem"},show:{opacity:1,y:0}},p=(0,r.memo)(e=>{let{card:t,onOpenModal:n,onClick:r,onDelete:p,onCollectionClick:x,onCollectionMouseDown:m,onCollectionMouseOver:b,onCollectionMouseUp:v}=e,{isSelectingImages:j}=(0,a.V)(),{virtualizer:w}=(0,c.q)(),{virtualItem:f}=(0,u.z)(),{virtualizedFeedImageLoadingStrategy:y="eager"}=(0,h.D)();if("skeleton"===t.type)return(0,i.jsx)(d.A,{sx:{aspectRatio:1}});if("collection"===t.type)return(0,i.jsx)(l.k,{card:t,onCollectionClick:x,onCollectionMouseDown:m,onCollectionMouseOver:b,onCollectionMouseUp:v,onDelete:p});let C="backward"!==w.scrollDirection&&f.index<50;return(0,i.jsx)(o.P.div,{variants:g,...C&&{initial:"hidden",animate:"show"},children:(0,i.jsx)(s.A,{...t,imageSelectionMode:j,loadingStrategy:y,openImageModal:n,onClick:r,isTeamImageFeed:!!e.isTeamImageFeed})})});p.displayName="FeedCard"},76157:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(95155),o=n(30510),r=n(12115),l=n(89213),a=n(51695);let s={hidden:{opacity:0,y:"1.875rem"},show:{opacity:1,y:0,transition:{duration:.2,ease:"easeOut"}}},d=e=>{let{card:t,isCollectionMenuVisible:n=!0,onCollectionClick:d,onCollectionMouseDown:c,onCollectionMouseOver:u,onCollectionMouseUp:h,onOpenImageModal:g,onDelete:p,onImageClick:x}=e;return(0,i.jsx)(r.Fragment,{children:"collection"===t.type?(0,i.jsx)(l.k,{card:t,isCollectionMenuVisible:n,onCollectionClick:d,onCollectionMouseDown:c,onCollectionMouseOver:u,onCollectionMouseUp:h,onDelete:p}):(0,i.jsx)(o.P.div,{variants:s,children:(0,i.jsx)(a.A,{...t,openImageModal:g,onDelete:p,onImageClick:x})})},t.id)}},80994:(e,t,n)=>{n.d(t,{p:()=>a,q:()=>l});var i=n(95155),o=n(12115);let r=(0,o.createContext)({virtualizer:{},gap:4,lanes:1}),l=()=>(0,o.useContext)(r),a=e=>{let{virtualizer:t,gap:n,children:l}=e,{lanes:a}=t.options,s=(0,o.useMemo)(()=>({virtualizer:t,gap:n,lanes:a}),[a,n,t]);return(0,i.jsx)(r.Provider,{value:s,children:l})}},89213:(e,t,n)=>{n.d(t,{k:()=>Y});var i=n(95155),o=n(52017),r=n(35695),l=n(11103),a=n(85270),s=n(81434),d=n(69507),c=n(5520),u=n(23375),h=n(16299),g=n(5643),p=n(49004),x=n(75569),m=n(11649),b=n(58670),v=n(57599),j=n(58727),w=n(2044),f=n(39376),y=n(77700),C=n(85821),I=n(84492),k=n(55028),S=n(12115),A=n(42982),B=n(86285),M=n(90339),D=n(31034),E=n(958),T=n(15707),_=n(77062),F=n(14331),z=n(69122),U=n(48392),O=n(49993);let L=(0,k.default)(()=>n.e(3216).then(n.bind(n,13216)).then(e=>e.TokensRunningLowUpgradeModal),{loadableGenerated:{webpack:()=>[13216]}}),P=e=>{var t;let{isOpen:n,onClose:o,collectionId:r}=e,{open:l}=(0,_.A)(U.A.UPGRADE),[a,s]=(0,S.useState)(),{userSelectedTeam:k}=(0,z.s)(),{deleteCollection:P,isDeletingCollection:W}=(0,T.j)({teamId:k().id}),{data:R}=(0,d.I)(E.g1F,{variables:{collectionId:String(r)}}),G=(null!==(t=null==R?void 0:R.collection_image)&&void 0!==t?t:[]).length>0,{hasPermission:N}=(0,F.S)(),H=N("bulkDelete","create");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.Modal,{isOpen:n,onClose:o,closeOnOverlayClick:!0,isCentered:!0,children:[(0,i.jsx)(u.ModalOverlay,{}),(0,i.jsx)(h.ModalContent,{maxW:{base:80,md:"45rem"},w:"100%",bg:"linear-gradient(90.08deg, #06080D 0%, #0D121C 100%)",px:8,py:10,textAlign:"center",children:(0,i.jsx)(g.ModalBody,{children:(0,i.jsx)(p.Center,{children:(0,i.jsxs)(x.VStack,{children:[(0,i.jsx)(p.Center,{mb:"0.9375rem",children:(0,i.jsx)(B.A,{width:16,height:16,color:O.lm.ORANGE})}),(0,i.jsx)(m.Heading,{size:{base:"md",md:"lg"},fontWeight:500,mb:"1.125rem",children:"Are you sure you want to delete this Collection?"}),(0,i.jsxs)(x.VStack,{pt:8,mb:"2.75rem",children:[(0,i.jsxs)(b.Text,{fontWeight:400,color:"#9094A6",children:["Removing a collection is permanent. Images within this collection can also be removed or"," ",(0,i.jsx)("strong",{children:"permanently deleted"}),"."]}),G&&(0,i.jsx)(v.Tooltip,{isDisabled:H,hasArrow:!0,placement:"bottom",label:"Bulk delete is available to premium users only",children:(0,i.jsxs)(j.HStack,{role:"button",pt:6,onClick:()=>{H||l()},children:[(0,i.jsx)(w.Checkbox,{variant:"alternative",disabled:!H,isChecked:a,onChange:e=>s(e.target.checked),children:"Delete images everywhere"}),!H&&(0,i.jsxs)(j.HStack,{children:[(0,i.jsx)(f.IconButton,{"aria-label":"Upgrade",size:"xs",bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)",_hover:{bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)"},color:"white",rounded:"md",icon:(0,i.jsx)(M.A,{width:4,height:4})}),(0,i.jsx)(y.Box,{children:(0,i.jsx)(D.A,{})})]})]})})]}),(0,i.jsxs)(j.HStack,{spacing:{base:"4",xs:"9"},justify:"center",width:"100%",children:[(0,i.jsx)(C.Button,{py:4,width:"50%",variant:"outline",onClick:o,bg:"transparent",isDisabled:W,children:"Cancel"}),(0,i.jsx)(C.Button,{isDisabled:W,isLoading:W,onClick:async()=>{await P(r,null!=a&&a),o()},py:4,width:"50%",variant:"solid",backgroundColor:O.lm.ORANGE,leftIcon:W?(0,i.jsx)(I.Spinner,{w:4,h:4}):void 0,children:"Delete"})]})]})})})})]}),(0,i.jsx)(A.default,{}),(0,i.jsx)(S.Suspense,{children:(0,i.jsx)(L,{})})]})};var W=n(68031),R=n(88095),G=n(78547),N=n(64478);let H=e=>{let{teamId:t}=e,[n,{loading:i}]=(0,R.n)(E.gwt),o=(0,N.w)();return{updateCollectionName:async(e,i)=>{await n({variables:{id:Number(e),collectionName:i},refetchQueries:[...(0,G.U)({teamId:t,userId:o}),"GetCollectionDescendants"]})},isUpdatingCollectionName:i}};var V=n(89444),Z=n(90824);let Y=e=>{var t;let n=(0,r.usePathname)(),{card:d,isCollectionMenuVisible:c=!0,onCollectionClick:u,onCollectionMouseDown:h,onCollectionMouseOver:g,onCollectionMouseUp:p,onDelete:x}=e,{isTeamFeedTeamCollections:m}=(0,V.G)(),{isOpen:b,onClose:v,onOpen:j}=(0,o.useDisclosure)(),{selectedCollections:w}=(0,W._Q)(),{pathPrefix:f}=(0,Z.F6)(n),{userSelectedTeam:y}=(0,z.s)(),{id:C}=y(),{updateCollectionName:I,isUpdatingCollectionName:k}=H({teamId:y().id}),{isSelectingImages:S}=(0,s.V)(),A=!!w.find(e=>String(e.id)===String(d.id)),B=async(e,t)=>{await I(e,t)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.D,{thumbnailUrls:d.thumbnailUrls,id:BigInt(d.id),name:d.title,teamId:C,owner:d.owner,isSelected:A,onClick:e=>{null==u||u(e)},onMouseDown:h,onMouseOver:g,onMouseUp:p,isSelectingImages:S,url:"".concat(f,"/").concat(d.uuid),parentCollectionId:d.parentCollectionId,children:(0,i.jsx)(a.c,{name:d.title,isMenuEnabled:c&&!S,id:BigInt(d.id),akUUID:null!==(t=d.uuid)&&void 0!==t?t:"",owner:d.owner,onDelete:()=>j(),onUpdateCollection:(e,t)=>B(e,t),isUpdating:k,isTeamsCollection:m})}),b&&(0,i.jsx)(P,{collectionId:BigInt(d.id),isOpen:b,onClose:()=>{v(),null==x||x()}})]})}},93792:(e,t,n)=>{n.d(t,{g:()=>v});var i=n(95155),o=n(77700),r=n(12115),l=n(54235),a=n(80994);let s=(0,r.memo)(e=>{let{virtualItem:t,children:n}=e,{virtualizer:r,gap:s,lanes:d}=(0,a.q)(),{measureElement:c}=r,{index:u,start:h,lane:g}=t;return(0,i.jsx)(o.Box,{ref:c,"data-index":u,position:"absolute",pt:s,pl:s,style:{width:"".concat(100/d,"%"),transform:"translate(".concat(100*g,"%, ").concat(h,"px)")},children:(0,i.jsx)(l.M,{virtualItem:t,children:n})})});s.displayName="VirtualizedFeedItem";let d=e=>{let{items:t,offset:n,limit:i,start:o=0}=e,l=n+i;return[(0,r.useMemo)(()=>t.slice(o,l),[l,t,o]),{count:l}]};var c=n(51250),u=n(91959),h=n.n(u);let g=(e,t,n)=>!!(n<=1)&&!!(e/t>=n)||!!(t-e<=n);var p=n(58537);let x=e=>{let{isLoading:t,count:n,lanes:i,overscan:o,scrollOffset:l=.6,hasNext:a,getItemKey:s,onNext:d,...u}=e,x=(0,c.XW)({count:n,overscan:o,lanes:i,getItemKey:s,estimateSize:()=>300,...u});(0,r.useLayoutEffect)(()=>(document.documentElement.style.scrollbarGutter="stable",()=>{document.documentElement.style.scrollbarGutter=""}),[]);let m=x.getVirtualItems(),b=(0,p.J)(e=>{if(!a||t)return;let{clientHeight:n,scrollHeight:i,scrollTop:o}=e.target.documentElement;g(o+n,i,l)&&d()});return(0,r.useEffect)(()=>{let e=h()(b,150);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[b]),{virtualizer:x,virtualItems:m}};var m=n(83833);let b=e=>Array.from(Array(e).keys()).map(e=>({id:"placeholder-".concat(e),type:"skeleton"})),v=e=>{var t;let{items:n,isLoading:c,hasNext:u,offset:h,limit:g,start:p=0,lanes:v=1,gap:j=4,renderItem:w,onNext:f}=e,{virtualizedFeedOffset:y}=(0,m.D)(),C=v*v*5,I=null!==(t=e.scrollOffset)&&void 0!==t?t:y,[k,{count:S}]=d({items:n,offset:h,limit:g,start:p}),A=(0,r.useMemo)(()=>c?[...k,...b(3*v)]:k,[c,v,k]),B=(0,r.useCallback)(e=>A[e].id||e,[A]),{virtualizer:M,virtualItems:D}=x({isLoading:c,count:A.length,lanes:v,overscan:C,scrollOffset:I,hasNext:u,getItemKey:B,onNext:()=>f(S,k[k.length-1])}),E=M.getTotalSize();return(0,i.jsx)(a.p,{virtualizer:M,gap:j,children:(0,i.jsx)(o.Box,{position:"relative",overflow:"hidden",ml:-j,style:{height:E},children:D.map(e=>(0,i.jsx)(l.M,{virtualItem:e,children:(0,i.jsx)(s,{virtualItem:e,children:w(A[e.index],e)})},e.key))})})}},97772:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),o=n(81434),r=n(52383);let l=e=>{let{category:t,exploreFilter:n,generatedCategoryFilter:l,generationTypeFilter:a,hideCategories:s,hideSearchOnMobile:d,onCategoryChange:c,onExploreFilterChange:u,onGeneratedCategoryChange:h,onGenerationTypeChange:g,onSearchSubmit:p,showNsfwToggle:x,showSelectImagesToggle:m,feedsType:b,onSelectFeed:v}=e,{clearSelectedImages:j,isSelectingImages:w,setIsSelectingImages:f}=(0,o.V)();return(0,i.jsx)(r.M,{category:t,clearSelectedImages:j,exploreFilter:n,generatedCategoryFilter:l,generationTypeFilter:a,hideCategories:s,hideSearchOnMobile:d,isSelectingImages:w,onCategoryChange:c,onExploreFilterChange:u,onGeneratedCategoryChange:h,onGenerationTypeChange:g,onSearchSubmit:p,setIsSelectingImages:f,showNsfwToggle:x,showSelectImagesToggle:m,feedsType:b,onSelectFeed:v})}}}]);