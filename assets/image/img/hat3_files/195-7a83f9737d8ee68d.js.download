try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a135bbab-04b3-4cae-99a7-83d710530654",e._sentryDebugIdIdentifier="sentry-dbid-a135bbab-04b3-4cae-99a7-83d710530654")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{1107:(e,n,t)=>{t.d(n,{a:()=>l});var i=t(65352),o=t(31188);let l=(e,n)=>(0,i.d4)(o.$,e,n)},4414:(e,n,t)=>{t.d(n,{E:()=>o,i:()=>l});var i=t(958);let o=e=>Object.values(e.extract()).filter(e=>"generated_images"===e.__typename),l=(e,n,t)=>{let o=!1;return n.forEach(n=>{var l;let a=e.identify({id:n.id,__typename:"generated_images"}),r=e.readFragment({id:a,fragment:i.qYZ});if((null==r?void 0:null===(l=r.generation)||void 0===l?void 0:l.id)===t){let n=e.evict({id:a});o||(o=n)}}),o}},4859:(e,n,t)=>{t.d(n,{D:()=>x});var i=t(95155),o=t(59108),l=t(11649),a=t(58670),r=t(88254),s=t(2044),d=t(85821),c=t(24450),u=t(1107),g=t(61185),m=t(95),p=t(60855),h=t(74824);let x=e=>{let{instruction:n,setInstruction:t,usingFixedSeed:x,setUsingFixedSeed:v,numImagesToGenerate:b,setNumImagesToGenerate:f,handleGenerate:C,onClose:j,setIsInteractingWithSelect:I,generation:w,tokenCost:y,textareaRef:L}=e,k=(0,u.a)(e=>e.matches({generate:"generating"}));return(0,i.jsxs)(o.Flex,{w:{base:"xs",lg:"39rem"},h:{base:"xs",lg:"2xs"},backgroundColor:"#090D14",padding:4,borderWidth:"px",borderColor:"border.darkBlue",alignItems:"stretch",gap:2,position:"relative",direction:"column",children:[(0,i.jsxs)(l.Heading,{as:"h4",fontSize:"lg",whiteSpace:"nowrap",children:[(0,i.jsx)(a.Text,{as:"span",children:"Edit with"})," ",(0,i.jsx)(a.Text,{variant:"gradient",as:"span",children:"AI"})]}),(0,i.jsx)(a.Text,{fontSize:"xs",children:'Examples: "change the coat to red" or "add a blue hat" or "make it vintage" or "add dramatic lighting".'}),(0,i.jsx)(r.Textarea,{placeholder:"Type what you would like to change...",ref:L,size:"sm",flex:1,value:n,onChange:e=>{let n=e.target.value;n.length<c.a&&t(n)},onKeyDown:e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),C())},color:"secondary.inactive"}),(0,i.jsxs)(o.Flex,{justifyContent:"space-between",gap:2,flexWrap:"wrap",children:[(0,i.jsx)(s.Checkbox,{variant:"alternative","aria-label":"Use fixed seed",spacing:0,isChecked:x,onChange:e=>v(e.target.checked),children:(0,i.jsx)(a.Text,{fontSize:"sm",lineHeight:1,children:"Use fixed seed"})}),(0,i.jsxs)(o.Flex,{gap:2,children:[(0,i.jsxs)(h.l6,{value:b.toString(),onValueChange:e=>f(Number(e)),onOpenChange:e=>null==I?void 0:I(e),children:[(0,i.jsxs)(h.bq,{size:"sm",children:[(0,i.jsx)(m.A,{}),(0,i.jsx)(h.yv,{})]}),(0,i.jsx)(h.gC,{children:[...Array(w.quantity)].map((e,n)=>(0,i.jsx)(h.eb,{value:(n+1).toString(),onClick:e=>e.stopPropagation(),children:n+1},"num-images-".concat(n+1)))})]}),(0,i.jsx)(g.C,{isGenerating:k,isDisabled:!n||k,imageTokenCost:y,generate:C,suppressTokenCostTooltip:!0})]})]}),(0,i.jsx)(d.Button,{"aria-label":"Close",position:"absolute",borderRadius:"50%",borderColor:"old.greyblue",borderWidth:"px",background:"transparent",_hover:{borderColor:"primary.accent"},cursor:"pointer",w:4,h:4,top:3,right:4,onClick:j,minW:4,p:3,children:(0,i.jsx)(p.A,{width:2.5,height:2.5})})]})}},6661:(e,n,t)=>{t.d(n,{usePhotoReal:()=>a});var i=t(65352),o=t(31188),l=t(14331);let a=()=>{let{hasPermission:e}=(0,l.S)(),n=e("generationPhotoReal","create"),t=(0,i.d4)(o.$,e=>e.context.photoReal),a=(0,i.d4)(o.$,e=>e.context.photoRealVersion),r=(0,i.d4)(o.$,e=>e.can({type:"input.photoReal",params:{photoReal:t,isUserFreePlan:!n}}));return{inputPhotoReal:e=>{o.$.send({type:"input.photoReal",params:{photoReal:e,isUserFreePlan:!n}})},isPhotoRealAllowed:n,inputPhotoRealIfValid:e=>{o.$.send({type:"input.setPhotoRealIfValid",params:{photoReal:e,isUserFreePlan:!n}})},photoReal:t,photoRealVersion:a,inputPhotoRealEnabled:r}}},7056:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(95155),o=t(3740),l=t(27593);let a=e=>(0,i.jsx)(o.Icon,{width:"calc(".concat(l.fb," * 1)"),height:"calc(".concat(l.fb," * 1.0625)"),viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M7.47059 2.94461C7.49265 2.87823 7.55882 2.83398 7.64706 2.83398C7.71324 2.83398 7.77941 2.87823 7.80147 2.94461L8.11029 3.78534L8.94853 4.09509C9.01471 4.11721 9.05882 4.18359 9.05882 4.24996C9.05882 4.33846 9.01471 4.40483 8.94853 4.42696L8.11029 4.7367L7.80147 5.55531C7.77941 5.62169 7.71324 5.66594 7.64706 5.66594C7.55882 5.66594 7.49265 5.62169 7.47059 5.55531L7.16176 4.7367L6.32353 4.42696C6.25735 4.40483 6.23529 4.33846 6.23529 4.24996C6.23529 4.18359 6.25735 4.11721 6.32353 4.09509L7.16176 3.78534L7.47059 2.94461ZM12.9191 3.16585L13.6691 3.91809C14.0882 4.33846 14.0882 5.0022 13.6691 5.42256L5.26471 13.852C4.84559 14.2724 4.18382 14.2724 3.76471 13.852L3.01471 13.0998C2.59559 12.6794 2.59559 12.0157 3.01471 11.5953L11.4191 3.16585C11.8382 2.74549 12.5 2.74549 12.9191 3.16585ZM12.1691 3.89597L9.74265 6.32967L10.5147 7.10403L12.9191 4.67033L12.1691 3.89597ZM4.51471 13.0998L9.76471 7.85627L8.99265 7.08191L3.76471 12.3476L4.51471 13.0998ZM2.15441 5.44469L3.41176 4.95795L3.875 3.71897C3.89706 3.60835 4.00735 3.54197 4.11765 3.54197C4.20588 3.54197 4.31618 3.60835 4.33824 3.71897L4.82353 4.95795L6.05882 5.44469C6.16912 5.46681 6.23529 5.57744 6.23529 5.66594C6.23529 5.77656 6.16912 5.88718 6.05882 5.90931L4.82353 6.37392L4.33824 7.63503C4.31618 7.72352 4.20588 7.7899 4.11765 7.7899C4.00735 7.7899 3.89706 7.72352 3.875 7.63503L3.41176 6.37392L2.15441 5.90931C2.04412 5.88718 2 5.77656 2 5.66594C2 5.57744 2.04412 5.46681 2.15441 5.44469ZM9.91912 11.1086L11.1765 10.6218L11.6397 9.38287C11.6618 9.27225 11.7721 9.20587 11.8824 9.20587C11.9706 9.20587 12.0809 9.27225 12.1029 9.38287L12.5882 10.6218L13.8235 11.1086C13.9338 11.1307 14 11.2413 14 11.3298C14 11.4405 13.9338 11.5511 13.8235 11.5732L12.5882 12.0378L12.1029 13.2989C12.0809 13.3874 11.9706 13.4538 11.8824 13.4538C11.7721 13.4538 11.6618 13.3874 11.6397 13.2989L11.1765 12.0378L9.91912 11.5732C9.80882 11.5511 9.76471 11.4405 9.76471 11.3298C9.76471 11.2413 9.80882 11.1307 9.91912 11.1086Z",fill:"currentColor"})})},7522:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(95155),o=t(3740),l=t(27593);let a=e=>(0,i.jsx)(o.Icon,{width:"calc(".concat(l.fb," * 1.3750)"),height:"calc(".concat(l.fb," * 1.3750)"),viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M19.7083 5.04297V4.1263C19.7083 2.96122 19.04 2.29297 17.8749 2.29297H16.9583C15.8738 2.29297 15.2276 2.8778 15.1423 3.89714H6.85841C6.77316 2.8778 6.1269 2.29297 5.04248 2.29297H4.12581C2.96073 2.29297 2.29248 2.96122 2.29248 4.1263V5.04297C2.29248 6.12739 2.87731 6.77362 3.89665 6.85887V15.1428C2.87731 15.2281 2.29248 15.8743 2.29248 16.9587V17.8754C2.29248 19.0405 2.96073 19.7087 4.12581 19.7087H5.04248C6.1269 19.7087 6.77316 19.1239 6.85841 18.1045H15.1423C15.2276 19.1239 15.8738 19.7087 16.9583 19.7087H17.8749C19.04 19.7087 19.7083 19.0405 19.7083 17.8754V16.9587C19.7083 15.8743 19.1234 15.2281 18.1041 15.1428V6.85887C19.1234 6.77362 19.7083 6.12739 19.7083 5.04297ZM15.1423 16.7305H6.85841C6.77958 15.7872 6.2149 15.2226 5.27165 15.1437V6.8598C6.2149 6.78096 6.77958 6.21631 6.85841 5.27306H15.1423C15.2212 6.21631 15.7858 6.78096 16.7291 6.8598V15.1437C15.7858 15.2226 15.2212 15.7872 15.1423 16.7305Z"})})},10610:(e,n,t)=>{t.d(n,{usePromptEnhance:()=>m});var i=t(65352),o=t(70070),l=t(33383),a=t(78203),r=t(12643),s=t(31188),d=t(26709),c=t(958),u=t(35936),g=t(12142);let m=()=>{let e=(0,o.Z)(),n=(0,i.d4)(s.$,e=>e.context.promptEnhance),t=(0,i.d4)(s.$,e=>e.can({type:"input.promptEnhance",params:{promptEnhance:n}})),m=(0,i.d4)(s.$,e=>e.context.isUsingCustomResolution);return{inputPromptEnhance:e=>{s.$.send({type:"input.promptEnhance",params:{promptEnhance:e}})},inputPromptEnhanceEnabled:t,promptEnhance:n,regenerate:async(n,t,i,o)=>{var p;let h={...n,prompt:n.prompt,negativePrompt:n.negativePrompt,seed:i?n.seed:Math.floor(0x3b9ac9ff*Math.random()),quantity:o,promptModification:{instruction:t,originalPrompt:n.prompt}};s.$.send({type:"generate.regenerate",params:{settings:h}});let x=(0,u.L7)(n.sdVersion)?(0,a.z6)(n.imageWidth,n.imageHeight,l.hO,l.hi):(0,a.z6)(n.imageWidth,n.imageHeight),[v,b]=(0,d.h5)(n.imageWidth,n.imageHeight,null!==(p=n.alchemy)&&void 0!==p&&p,x,m);try{await e({contrast:n.guidanceScale,imageSize:(0,r.z)(x),enhancePrompt:!0,enhancePromptInstruction:t,guidanceScale:g.TG.guidanceScale,height:n.imageHeight,modelId:n.modelId,negativePrompt:n.negativePrompt,numberOfImages:o,photoRealVersion:n.photoRealVersion,prompt:n.prompt,public:n.public,seed:i?n.seed:void 0,styleUUID:n.styleUUID,tiling:n.tiling,usingAlchemy:n.alchemy,usingFixedSeed:i,usingNegativePrompt:!!n.negativePrompt,usingPhotoReal:n.photoReal,usingTransparency:n.transparency,width:n.imageWidth,ultra:n.ultra,usingLeonardoMagic:!1,elements:[],userElements:[],imageGuidanceInfo:(e=>{let n={controlnets:[]};return e.imageToImage&&(n.init_strength=e.initStrength,e.init_image&&(n.init_image_id=e.init_image.id),e.initGeneratedImageId&&(n.init_generation_image_id=e.initGeneratedImageId)),e.controlnetsUsed&&(n.controlnets=e.generation_controlnets.reduce((e,n)=>{let t=n.initImageId||n.initGeneratedImageId;return t&&n.controlnet_definition&&n.controlnet_preprocessor_matrix?[...e,{preprocessorId:n.controlnet_preprocessor_matrix.id,initImageType:n.initImageId?c.AbP.Uploaded:c.AbP.Generated,initImageId:t,strengthType:n.imageGuidanceStrengthType,influence:n.influence}]:e},[])),n})(n)},v,b),s.$.send({type:"generate.success"})}catch(e){s.$.send({type:"generate.fail",params:{error:e instanceof Error?e.message:null==e?void 0:e.toString()}})}}}}},12643:(e,n,t)=>{t.d(n,{T:()=>o,z:()=>l});var i=t(78203);function o(e){let{width:n,height:t,alchemy:o,ultra:l,imageSize:a,modelVersion:r}=e;if(!a)return[n,t];let s=(0,i.Zk)(r)[a];if(l&&s.ultraMultiplier){let e=s.ultraMultiplier;return[n*e,t*e]}if(o){let e=s.upscaleMultiplier;return[n*e,t*e]}return[n,t]}function l(e){return"Low"===e?1:"Medium"===e?4:"High"===e?7:void 0}},17368:(e,n,t)=>{t.d(n,{A:()=>Z});var i=t(95155),o=t(52017),l=t(5520),a=t(23375),r=t(49174),s=t(59108),d=t(58727),c=t(57599),u=t(77700),g=t(39376),m=t(58670),p=t(12115),h=t(65751),x=t(81574),v=t(52516),b=t(21542),f=t(52049),C=t(3740);let j=e=>{let n=(0,p.useId)();return(0,i.jsxs)(C.Icon,{width:4,height:4,viewBox:"0 0 14 18",...e,children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"arrow-down-to-line-icon-linear-gradient-".concat(n),x1:"-5.94833",y1:"0.0820286",x2:"15.6652",y2:"-3.33331",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0.0001",stopColor:"#FA5560"}),(0,i.jsx)("stop",{offset:"0.499028",stopColor:"#B14BF4"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#4D91FF"})]})}),(0,i.jsx)("path",{fill:"url(#arrow-down-to-line-icon-linear-gradient-".concat(n,")"),stroke:"url(#arrow-down-to-line-icon-linear-gradient-".concat(n,")"),d:"M1.9308 9.4859a.6877.6877 0 1 1 .9726-.9727l3.41 3.41V.75c0-.3795.308-.6875.6875-.6875s.6875.308.6875.6875v11.1732l3.41-3.41a.6877.6877 0 1 1 .9726.9727l-4.5833 4.5833a.6937.6937 0 0 1-.2227.1484.6858.6858 0 0 1-.2632.0532.6882.6882 0 0 1-.263-.0532.6849.6849 0 0 1-.2229-.1484L1.931 9.4859ZM12.5 16.5625h-11a.6878.6878 0 0 0-.6875.6875c0 .3795.308.6875.6875.6875h11a.6878.6878 0 0 0 .6875-.6875.6878.6878 0 0 0-.6875-.6875Z"})]})};var I=t(72461),w=t(51614),y=t(71983),L=t(69122),k=t(71757),M=t(78373),S=t(69756),T=t(5112),A=t(92796);let _=e=>{let{image:n,generationType:t,...o}=e,{currentPlan:l}=(0,f.t)(),{selectedTeamUUID:a}=(0,L.s)(),r=(0,k.hA)(n,t),s=(0,y.X)(),d=t===w.x.IMAGE,u="Download ".concat(t);return(0,i.jsx)(c.Tooltip,{label:u,hasArrow:!0,children:(0,i.jsx)(I._,{"aria-label":u,w:d?10:16,h:10,p:0,rounded:"full",background:"rgba(25, 25, 25, 0.5)",iconSpacing:+!d,rightIcon:(0,i.jsx)(j,{width:3.5,height:3.5,color:"whiteAlpha.500"}),fontSize:"xs",fontWeight:"normal",filter:"grayscale(100%) contrast(1) brightness(1.5)",_hover:{transition:0,filter:"none",backdropFilter:"blur(0.5)",background:"linear-gradient(81.02deg, rgba(250, 85, 96, 0.08) -23.47%, rgba(177, 75, 244, 0.08) 45.52%, rgba(77, 145, 255, 0.08) 114.8%)"},_active:{},onClick:e=>{e.stopPropagation();let t={trackingData:JSON.stringify(n),plan:l,teamId:a};(0,M.u4)(T.sMc,t),(0,M.u4)(S.DV,{...t,mediaType:A.Uo.MEDIA_TYPE.IMAGE_CLASSIC,downloadType:A.Uo.DOWNLOAD_TYPE.SINGLE,eventType:A.Uo.EVENT_TYPE.CLICK}),r&&s({imageUrl:r})},dataTrackingId:T.sMc,...o,children:d?"":t})})};var D=t(40619),P=t(9948),U=t(96576),E=t(77078),R=t(84025),G=t(37996),B=t(11819),F=t(98371),O=t(36816),z=t(83833),V=t(80891),W=t(64478),N=t(85756),H=t(49993);let Z=e=>{var n,t;let{generation:f,image:C,isOpen:j,onClose:I}=e,{isUserFreePlan:y}=(0,V.usePlan)(),{isFreeTierRestrictingEnabled:k}=(0,z.D)(),M=y&&k,{onDelete:S}=(0,U.g)(),{openCollectionPrivacyWarning:T}=(0,D.o)(),{handleAddCollectionImage:A,handleRemoveCollectionImage:Z}=(0,B.A)(),{showCollectionImagesToast:$}=(0,F.A)(),Y={intrinsicWidth:(null==f?void 0:f.imageWidth)||(null==C?void 0:C.generation.imageWidth)||"auto",intrinsicHeight:(null==f?void 0:f.imageHeight)||(null==C?void 0:C.generation.imageHeight)||"auto",isLoading:!1,isZoomed:!1},q=null==f?void 0:null===(n=f.generated_images)||void 0===n?void 0:n[0],K=(null==q?void 0:q.motionMP4URL)||(null==C?void 0:C.motionMp4Url),X=(null==q?void 0:q.url)||(null==C?void 0:C.originalUrl)||(null==C?void 0:C.conditionalUrl),J=(0,W.w)(),Q=(null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.id)===J||(null==C?void 0:C.userId)===J,{userSelectedTeam:ee}=(0,L.s)(),en=!!ee(),{isOpen:et,onClose:ei,onOpen:eo}=(0,o.useDisclosure)(),[el,{loading:ea}]=(0,O.b)({onCompleted:()=>{null==S||S(),ei(),I(),(0,P.g)()}}),er=(0,p.useCallback)(async()=>{await el((null==f?void 0:f.id)||(null==C?void 0:C.generation.id)||""),await (null==S?void 0:S())},[el,S,null==f?void 0:f.id,null==C?void 0:C.generation.id]);if(!q&&!C||!K||!X)return null;let es=q||C,ed=[{id:String(null==es?void 0:es.id),isPublic:!1,url:"",variations:[],userId:null,collection_images:[],teamId:null,generationId:null==C?void 0:C.generation.id}],ec=async(e,n)=>{es&&e&&(!es.public&&en&&n&&T(),n?await A(e,es,(e,n,t,i)=>$(e,n,t,i)):await Z(e,es,(e,n,t,i)=>$(e,n,t,i)))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Modal,{variant:"imageDetailModal",isOpen:j,isCentered:!0,onClose:I,children:[(0,i.jsx)(a.ModalOverlay,{}),(0,i.jsxs)(x.A.Content,{...Y,children:[(0,i.jsx)(x.A.Body,{...Y,children:(0,i.jsx)(G.C,{controls:!0,fallbackText:(null==f?void 0:f.prompt)||"",videoUrl:K,poster:X+N.xN,style:{cursor:"pointer",objectFit:"contain"}})}),(0,i.jsx)(r.ModalFooter,{p:0,children:(0,i.jsx)(s.Flex,{justifyContent:"flex-end",padding:4,w:"full",children:(0,i.jsxs)(d.HStack,{gap:1.5,position:"relative",children:[Q&&(0,i.jsx)(v.f,{displayText:"Organize",rounded:"md",icon:(0,i.jsx)(E.A,{boxSize:4.5}),mode:b.v1.UPDATE,onCollectionChecked:ec,selectedImages:ed,closeModalOnEmptySelection:!1}),((null==q?void 0:q.motionGIFURL)||(null==C?void 0:C.motionGifUrl))&&(0,i.jsx)(_,{shape:"default",image:es,generationType:w.x.GIF}),((null==q?void 0:q.motionMP4URL)||(null==C?void 0:C.motionMp4Url))&&(0,i.jsx)(_,{shape:"default",image:es,generationType:w.x.MP4}),Q&&(0,i.jsx)(c.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:M?"Upgrade to Premium to delete videos":"Delete video",shouldWrapChildren:!0,children:(0,i.jsxs)(u.Box,{position:"relative",children:[(0,i.jsx)(g.IconButton,{onClick:eo,variant:"solid",rounded:"full",icon:(0,i.jsx)(R.A,{width:4,height:4}),background:"#00000057","aria-label":"Delete",justifyContent:"center",alignItems:"center",isDisabled:M}),(0,i.jsx)(m.Text,{display:M?"block":"none",position:"absolute",top:"-4px",fontSize:8,color:"white",bg:H.C3.PURPLE_TWO,borderRadius:7,px:1.5,right:0,left:-.5,minWidth:"fit-content",children:"Premium"})]})})]})})})]})]}),(0,i.jsx)(h.A,{isMotion:!0,isOpen:et,onClose:ei,deleteImage:er,loading:ea})]})}},20389:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(68691),o=t(31698);let l=()=>(0,i.G)(e=>{var n,t;return((null==e?void 0:null===(t=e.generation)||void 0===t?void 0:null===(n=t.settings)||void 0===n?void 0:n.imageInputs)||[]).find(e=>e.type===o.w.Img2Img)})},20927:(e,n,t)=>{t.d(n,{g:()=>o});var i=t(12115);let o=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{loopAround:t=!1,initialIndex:o}=n,l=e.length,[a,r]=(0,i.useState)(void 0!==o&&e[o]?e[o].id:""),[s,d]=(0,i.useState)(""),c=(0,i.useMemo)(()=>e.find(e=>e.id===a),[e,a]),u=(0,i.useCallback)(()=>d(""),[]),g=(0,i.useCallback)(e=>{u(),r(e)},[u]),[m,p]=(0,i.useState)(null!=o?o:0);(0,i.useLayoutEffect)(()=>{if(!c&&e.length>0)e[m]?g(e[m].id):e[m-1]?g(e[m-1].id):g(e[0].id);else{let n=e.findIndex(e=>{let{id:n}=e;return n===a});n!==m&&p(n)}},[e,c,o,g,a,m]);let h=(0,i.useMemo)(()=>{var n;let i=l-1,o=null!==(n=e.findIndex(e=>{let{id:n}=e;return n===a}))&&void 0!==n?n:0,r=l>1&&(!!t||0!==o),s=l>1&&(!!t||o!==i),d=r&&e[(o+l-1)%l]||void 0;return{prevItem:d,nextItem:s&&e[(o+l+1)%l]||void 0,hasPrevItem:r,hasNextItem:s,handleNext:()=>{var n;if(s)return u(),g(null===(n=e[(o+l+1)%l])||void 0===n?void 0:n.id)},handlePrev:()=>{var n;if(r)return u(),g(null===(n=e[(o+l-1)%l])||void 0===n?void 0:n.id)}}},[l,e,t,a,u,g]);return(0,i.useMemo)(()=>({mainItem:c,handleSetRelatedItemId:g,mainItemId:a,setMainItemId:r,relatedItemId:s,setRelatedItemId:d,resetRelatedItemId:u,...h}),[a,u,g,c,s,h])}},21131:(e,n,t)=>{t.d(n,{YE:()=>r,cN:()=>l,vT:()=>s});var i=t(95155),o=t(12115),l=function(e){return e.V1="V1",e.V2="V2",e}({});let a=(0,o.createContext)({version:"V1",onUseAsImageGuidanceInput:void 0}),r=()=>(0,o.useContext)(a),s=e=>{let{version:n,onUseAsImageGuidanceInput:t,children:l}=e,r=(0,o.useMemo)(()=>({version:n,onUseAsImageGuidanceInput:t}),[n,t]);return(0,i.jsx)(a.Provider,{value:r,children:l})}},22761:(e,n,t)=>{t.d(n,{p:()=>u,y:()=>c});var i=t(95155),o=t(69507),l=t(12115),a=t(98959),r=t(958),s=t(83833);let d=(0,l.createContext)({loading:!1});function c(){return(0,l.useContext)(d)}function u(e){let{children:n}=e,[t,c]=(0,l.useState)(void 0),[u,g]=(0,l.useState)(!0),[m,p]=(0,l.useState)(void 0),{data:h,loading:x,error:v}=(0,o.I)(r.kvz),{isFaceStyleTransferEnabled:b,isFaceTransferEnabled:f,isContentReferenceEnabled:C}=(0,s.D)();(0,l.useEffect)(()=>{if(x)g(!0);else if(v)p(v),g(!1);else if(h){let e=h.controlnet_definition.filter(e=>!!(null==e?void 0:e.controlnetType)),n=Object.entries(e.reduce((e,n)=>{let t=n.controlnetType;return(e[t]=e[t]||[]).push(n),e},{})).reduce((e,n)=>{let[t,i]=n;return e[t]=(null!=i?i:[]).map(e=>e.preprocessors).filter(Boolean).flat(),e},{}),t=[...Array.from(new Map(e.reverse().map(e=>[e.controlnetType,e])).values())].map(e=>{var t,i,o,l,a,r,s;return{controlnetType:e.controlnetType,displayDescription:null!==(t=e.displayDescription)&&void 0!==t?t:void 0,weightMin:null!==(i=e.weightMin)&&void 0!==i?i:void 0,weightMax:null!==(o=e.weightMax)&&void 0!==o?o:void 0,weightDefault:null!==(l=e.weightDefault)&&void 0!==l?l:void 0,tokenCost:null!==(a=e.tokenCost)&&void 0!==a?a:void 0,thumbnailURL:null!==(r=e.thumbnailURL)&&void 0!==r?r:void 0,thumbnailResultURL:null!==(s=e.thumbnailResultURL)&&void 0!==s?s:void 0,preprocessors:(n[e.controlnetType]||[]).map(n=>{var t;return{name:"".concat(e.displayName||e.controlnetType),availableToPlan:n.availableToPlan,preprocessorBaseModel:n.preprocessorBaseModel,preprocessorName:null!==(t=n.preprocessorName)&&void 0!==t?t:void 0,id:n.id}})}}),i=a.$y.map(e=>e.controlnetType).filter(e=>(!b||"StyleTransfer"!==e)&&(!f||"FaceTransfer"!==e)&&(!C||"ContentTransfer"!==e));i.length>0&&(t=t.filter(e=>!i.includes(e.controlnetType))),c(t),g(!1)}},[x,v,h,f,C,b]);let j=(0,l.useMemo)(()=>({imageInputDefinitions:t,loading:u,error:m}),[t,u,m]);return(0,i.jsx)(d.Provider,{value:j,children:n})}},26709:(e,n,t)=>{t.d(n,{C:()=>b,h5:()=>h,xt:()=>x});var i=t(12115),o=t(1107),l=t(33383),a=t(91697),r=t(35519),s=t(42380),d=t(6661),c=t(40807),u=t(33036),g=t(52592),m=t(35936),p=t(12142);let h=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("Low"===i&&t&&!o){let t=l.PD[i];return[e*(t.upscaleMultiplier/t.legacyUpscaleMultiplier),n*(t.upscaleMultiplier/t.legacyUpscaleMultiplier)]}return[e,n]},x=(e,n,t)=>{let[i,o]=h(e.imageWidth,e.imageHeight,e.isUsingAlchemy,n,t);return(0,u.Jv)({...e,imageWidth:i,imageHeight:o})},v=e=>(null==e?void 0:e.length)?e.filter(e=>!e.isDisabled&&e.akUUID!==l.bG.akUUID).map(e=>e.controlnetType):[],b=()=>{let{numberOfImages:e}=(0,a.s)(),{width:n,height:t,imageSize:l,isUsingCustomResolution:u}=(0,r.f)(),{modelVersion:h}=(0,s.R)(),b=(0,o.a)(e=>e.context.alchemy),f=(0,o.a)(e=>e.context.ultra),{photoReal:C,inputPhotoRealEnabled:j}=(0,d.usePhotoReal)(),{imageGuidanceInputs:I}=(0,c.useImageGuidance)(),w=v(I),y=(0,m.L7)(h);return{tokenCost:(0,i.useMemo)(()=>x({controlnets:w,highResolution:!1,imageHeight:t,imageWidth:n,inferenceSteps:p.TG.stepCount,modelVersion:h,motionPrompts:[],numImages:e,isUsingAlchemy:b,isUsingUltra:f,usingLeonardoMagic:!1,usingMotion:!1,usingPhotoReal:C&&j,usingSdxl:!0,usingSdxlLightning:h===g.gP.SDXL_LIGHTNING,...y&&{usingSdxl:!1}},l,u),[w,t,n,h,e,b,f,C,j,y,l,u])}}},30850:(e,n,t)=>{t.d(n,{Y:()=>o});var i=t(95155);let o=e=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.713 11.06c1.06-.627 3.501-2.067 3.709-2.057.434.021.97.378 1.444.397.945.04 3.497-1.492 4.826-2.273.633-.373 1.228.578.59.953l-3.587 2.111v3.18c0 .535 0 .578.361 1.3.32.642.989 1.933 1.64 3.197.33.64-.697 1.142-1.026.501l-2.058-4.014h-1.193L9.36 18.37c-.33.644-1.352.133-1.026-.502.637-1.235 1.241-2.411 1.561-3.052.36-.722.36-.765.36-1.3v-3.18c-.493.295-1.839 1.09-2.92 1.733-.646.383-1.259-.63-.622-1.008Zm5.258-5.727c-.945 0-1.712.748-1.712 1.67 0 .92.767 1.668 1.712 1.668s1.712-.747 1.712-1.669c0-.921-.767-1.669-1.712-1.669Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M21.23 8.667a.77.77 0 0 1-.768-.77v-3.59c0-.603-.166-.769-.77-.769h-3.59a.77.77 0 0 1 0-1.538h3.59C21.137 2 22 2.863 22 4.308v3.59a.77.77 0 0 1-.77.769Zm-17.692-.77v-3.59c0-.603.166-.769.77-.769h3.59a.77.77 0 0 0 0-1.538h-3.59C2.863 2 2 2.863 2 4.308v3.59a.77.77 0 0 0 1.538 0Zm5.129 13.334a.77.77 0 0 0-.77-.77h-3.59c-.603 0-.769-.165-.769-.769v-3.59a.77.77 0 0 0-1.538 0v3.59C2 21.137 2.863 22 4.308 22h3.59a.77.77 0 0 0 .769-.77ZM22 19.692v-3.59a.77.77 0 0 0-1.538 0v3.59c0 .604-.166.77-.77.77h-3.59a.77.77 0 0 0 0 1.538h3.59C21.137 22 22 21.137 22 19.692Z",fill:"currentColor"})]})},34694:(e,n,t)=>{t.d(n,{H:()=>A});var i=t(95155),o=t(58670),l=t(59108),a=t(64346),r=t(21118),s=t(20338),d=t(59118),c=t(77700),u=t(30510),g=t(12115),m=t(70912),p=t(98021),h=t(958),x=t(49993);let v=e=>{var n;let{image:t,onSelect:o,isUpload:l}=e,[a,r]=(0,g.useState)(!1),s=(0,g.useRef)(null),d=(null===(n=t.generation)||void 0===n?void 0:n.transparency)!==h.P2Y.Disabled,v=e=>{var n,t;o({...e,...!e.dimensions&&{dimensions:{height:(null===(n=s.current)||void 0===n?void 0:n.naturalHeight)||1,width:(null===(t=s.current)||void 0===t?void 0:t.naturalWidth)||1}}})};return a&&l?null:(0,i.jsx)(m.t,{minW:75,h:75,p:0,justifyContent:"center",bgColor:"transparent",_hover:{bgColor:"transparent"},onClick:()=>v(t),children:(0,i.jsx)(c.Box,{as:u.P.div,position:"relative",rounded:"lg",overflow:"hidden",h:"100%",w:"100%",transition:"opacity 100ms linear",...d&&x.c8,whileHover:{filter:"brightness(0.9)"},children:(0,i.jsx)(p._,{fill:!0,ref:s,alt:"recent image",src:t.url||"",style:{objectFit:"cover"},onError:()=>{r(!0)}},t.url)})})};var b=t(69507),f=t(23432),C=t(69122),j=t(64478),I=t(85756),w=t(71757),y=t(54254),L=t(66415);let k=()=>{let e=(0,j.w)(),{userSelectedTeam:n}=(0,C.s)(),t=n(),{data:i,loading:o}=(0,b.I)(h.CSU,{variables:{where:{userId:{_eq:e},...(0,L.F2)(t.id)},limit:8},fetchPolicy:"cache-and-network"}),{data:l,loading:a}=(0,b.I)(h.yYE,{variables:{where:{generation:{status:{_eq:f.P.COMPLETE},canvasRequest:{_eq:!1},...(0,L.E9)(t.akUUID)},...I.LL,userId:{_eq:e}},limit:8,order_by:[{createdAt:h.V47.Desc}]},fetchPolicy:"cache-and-network"});return{uploads:((null==i?void 0:i.init_images)||[]).map(e=>({initImageId:e.id,initImageType:h.AbP.Uploaded,url:e.url+I.xN,alt:"Uploaded image"})),generations:((null==l?void 0:l.generated_images)||[]).slice(0,8).map(e=>{var n,t;let i=e.generation,{width:o,height:l}=i?(0,y.s)(i):{width:0,height:0};return{initImageId:e.id,initImageType:h.AbP.Generated,url:e.url+I.xN,motionGifUrl:(0,w.iS)(e),motionMp4Url:(0,w.f_)(e),alt:null!==(t=null==i?void 0:i.prompt)&&void 0!==t?t:"Generation by ".concat((null===(n=e.user)||void 0===n?void 0:n.username)||"Leonardo User"),aspectRatio:"".concat(o," / ").concat(l),dimensions:{width:o,height:l}}}),isLoading:o||a}};var M=t(1353);let S=e=>{let{onSelect:n,onShowMore:t,uploadsDisabled:c,menuProps:u,gridProps:g}=e,{uploads:m,generations:p,isLoading:h}=k(),x=[...c?[]:[{label:"Uploads",images:m}],{label:"Generations",images:p}],b=!h&&x.every(e=>0===e.images.length);return(0,i.jsxs)(i.Fragment,{children:[b&&(0,i.jsx)(o.Text,{px:2,py:4,children:"No images are available."}),(0,i.jsx)(l.Flex,{flexDirection:"column",maxHeight:"18rem",overflowY:"auto",w:"100%",children:x.map(e=>(0,i.jsx)(a.MenuGroup,{title:e.label,bgColor:"darkbluealt",color:"secondary.inactive",fontSize:"xs",fontWeight:400,m:0,py:1.5,px:2.5,w:"100%",...!h&&!e.images.length&&{display:"none"},...u,children:(0,i.jsxs)(r.Grid,{gridTemplateColumns:{base:"repeat(2, 1fr)",sm:"repeat(auto-fill, minmax(75px, 1fr))"},gap:2.5,px:2.5,pb:2.5,bgColor:"darkbluealt",...g,children:[h&&!e.images.length&&Array.from({length:8},(e,n)=>(0,i.jsx)(s.Skeleton,{h:75,w:"100%",minW:20,rounded:"lg"},n)),e.images.map(t=>(0,i.jsx)(v,{image:t,onSelect:n,isUpload:"Uploads"===e.label},t.initImageId))]})},e.label))}),(0,i.jsxs)(d.MenuItem,{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"md",fontWeight:700,px:2.5,py:1.5,h:8,bgColor:"#181F2F",_hover:{bgColor:"#263149"},onClick:t,children:["Show More",(0,i.jsx)(M.A,{color:"white",fontSize:"md",w:3,ml:1.5})]})]})};var T=t(52937);let A=e=>{let{compact:n,dropdownProps:t,gridProps:o,menuProps:l,isDisabled:a,onSelect:r,onShowMore:s,uploadsDisabled:d}=e;return(0,i.jsx)(T.m,{type:"button",isDisabled:a,label:(0,i.jsxs)("div",{children:[n?"":"Select from ",(0,i.jsx)("b",{children:"Recent Images"})]}),borderWidth:"px",borderStyle:"solid",borderColor:"borderNew.primary",matchWidth:!0,...t,children:(0,i.jsx)(S,{gridProps:o,menuProps:l,onShowMore:s,onSelect:r,uploadsDisabled:d})})}},35519:(e,n,t)=>{t.d(n,{f:()=>s});var i=t(65352),o=t(42380),l=t(78203),a=t(31188),r=t(14331);let s=()=>{let e=(0,i.d4)(a.$,e=>e.context.aspectRatio),n=(0,i.d4)(a.$,e=>e.context.namedAspectRatioKey),t=(0,i.d4)(a.$,e=>e.context.imageSize),s=(0,i.d4)(a.$,e=>e.context.customWidth),d=(0,i.d4)(a.$,e=>e.context.customHeight),c=(0,i.d4)(a.$,e=>e.context.isUsingCustomResolution),{hasPermission:u}=(0,r.S)(),g=u("generationAspectRatioPremium","create"),m=u("generationImageResolutionPremium","create"),{modelInfo:p}=(0,o.R)(),h=p.sdVersion,[x,v]=(0,l.Nt)({aspectRatio:e,imageSize:t,modelVersion:h});return{aspectRatio:e,namedAspectRatioKey:n,width:c?s:x,height:c?d:v,calculatedWidth:x,calculatedHeight:v,customWidth:s,customHeight:d,imageSize:t,isUsingCustomResolution:c,inputImageSize:e=>{a.$.send({type:"input.imageSize",params:{imageSize:e,isUserFreePlan:!m}})},inputAspectRatio:e=>{a.$.send({type:"input.aspectRatio",params:{aspectRatio:e,isUserFreePlan:!g}})},inputNamedAspectRatio:e=>{a.$.send({type:"input.aspectRatio.named",params:{namedAspectRatioKey:e,isUserFreePlan:!g}})},inputCustomResolution:(e,n)=>{a.$.send({type:"input.customResolution",params:{width:e,height:n,isUserFreePlan:!m}})},inputIsUsingCustomResolution:e=>{a.$.send({type:"input.toggleIsUsingCustomResolution",params:{isUsingCustomResolution:e,isUserFreePlan:!m}})}}}},36816:(e,n,t)=>{t.d(n,{b:()=>r});var i=t(88095),o=t(12115),l=t(4414),a=t(958);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:n,...t}=e,[r,s]=(0,i.n)(a.$xh,{...t,update(e,t,i){var o,a;let r=null===(a=t.data)||void 0===a?void 0:null===(o=a.delete_generations_by_pk)||void 0===o?void 0:o.id;if(r){let n=(0,l.E)(e),t=(0,l.i)(e,n,r),i=e.identify({id:r,__typename:"generations"}),o=e.evict({id:i});t||(t=o),t&&e.gc()}null==n||n(e,t,i)}});return[(0,o.useCallback)((e,n)=>r({variables:{id:e},...n}),[r]),s]}},37996:(e,n,t)=>{t.d(n,{C:()=>c});var i=t(95155),o=t(30044),l=t(62105),a=t(12115);let r=e=>{let[n,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!e)return;let n=new Image;n.onload=()=>t(!0),n.src=e,n.complete&&t(!0)},[e]),n};var s=t(58537),d=t(38973);let c=(0,o.forwardRef)((e,n)=>{let{autoPlay:t=!0,controls:o=!1,disableRemotePlayback:c=!0,loop:u=!0,muted:g=!0,playsInline:m=!0,fallbackText:p,lazyLoad:h=!1,pauseOnIntersectLeave:x=!0,playOnIntersectEnter:v=!1,onPosterLoad:b,posterUrl:f,startLoad:C=!0,videoUrl:j,videoType:I="video/mp4",...w}=e,y=(0,a.useRef)(null),L=(0,a.useRef)(null),k=n||y,[M,S]=(0,a.useState)(null),[T,A]=(0,a.useState)(null),_=r(f),D=(0,s.J)(()=>b&&b());return(0,a.useEffect)(()=>{_&&D()},[D,_]),(0,a.useEffect)(()=>{k&&"function"!=typeof k&&S(k.current),L.current&&A(L.current)},[k]),(0,d.B)({target:k,onIntersectEnter:()=>{M&&T&&(h&&!T.src&&(T.src=j,M.load()),t&&v&&M.play().catch(e=>{e instanceof Error&&"AbortError"!==e.name&&(0,l.Cp)(e)}))},onIntersectLeave:()=>{M&&x&&M.pause()}}),M&&t&&!1!==g&&(M.muted=!0,M.defaultMuted=!0,M.playsInline=!0),(0,i.jsxs)("video",{ref:k,width:"100%",height:"100%",autoPlay:t,controls:o,disableRemotePlayback:c,loop:u,muted:g,poster:f,playsInline:m,...w,children:[(0,i.jsx)("source",{ref:L,src:C&&!h?j:void 0,type:I}),p]})})},40807:(e,n,t)=>{t.d(n,{useImageGuidance:()=>u});var i=t(65352),o=t(67215),l=t(42380),a=t(72681),r=t(1107),s=t(31188),d=t(83833),c=t(52592);let u=()=>{var e,n;let t=(0,d.D)(),{modelVersion:u}=(0,l.R)(),{allGuidanceTypes:g,categorizedGuidanceTypes:m,loading:p}=(0,o.useImageGenerationGuidanceDataContext)(),{isImageToImageForFluxEnabled:h}=t,x=null!==(n=(0,r.a)(e=>e.context.imageGuidanceInputs))&&void 0!==n?n:[],v=(0,r.a)(e=>e.can({type:"input.imageToImage",params:{inputs:x,isImageToImageForFluxEnabled:h}})),b=(0,r.a)(e=>e.can({type:"input.imageGuidance",params:{inputs:x}}));return{categorizedGuidanceTypes:m,imageGuidanceInputs:x,imageGuidanceInputsWithMetaData:(0,i.d4)(s.$,e=>(0,a.h0)(e.context.imageGuidanceInputs,g,u,t)),inputControlNetsEnabled:b,inputGuidanceInfluence:(e,n,t)=>{s.$.send({type:"input.imageGuidance.influence",params:{input:e,influence:n,controlnetType:t}})},inputGuidanceStrength:(e,n,t)=>{s.$.send({type:"input.imageGuidance.strength",params:{input:e,strength:n,controlnetType:t}})},inputImageGuidance:e=>{s.$.send({type:"input.imageGuidance",params:{inputs:e}})},inputImageToImageEnabled:v,isBelowStyleReferenceLimit:!(null===(e=g.find(e=>e.controlnetType===c.bd.StyleTransfer))||void 0===e?void 0:e.isDisabled),loading:p,removeImage:e=>{s.$.send({type:"input.imageGuidance.remove",params:{input:e}})},toggleDisabled:e=>{s.$.send({type:"input.imageGuidance.toggleDisabled",params:{input:e}})}}}},42380:(e,n,t)=>{t.d(n,{R:()=>l});var i=t(54646),o=t(68691);let l=()=>{let{modelId:e}=(0,i.G)(),n=(0,o.G)(e=>e.generation.modelInfo.modelInfoMap)[e],t=null==n?void 0:n.sdVersion;return{modelInfo:n,modelVersion:t}}},45269:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(958),o=t(69122);let l=()=>{let{userSelectedTeam:e}=(0,o.s)(),{userRole:n}=e();return n===i.RUS.Owner}},48035:(e,n,t)=>{t.d(n,{Gi:()=>a});let i={EXTREME_VIOLENCE:"EXTREME_VIOLENCE",NUDITY:"NUDITY"},o=[i.NUDITY,i.EXTREME_VIOLENCE];function l(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.flatMap(e=>{var n;return e?Array.isArray(e)?e.flatMap(e=>null==e?void 0:e.moderationClassification):null!==(n=null==e?void 0:e.moderationClassification)&&void 0!==n?n:[]:[]})}function a(e){var n,t;let{image:i,generation:a,nsfwAllowed:r,overlayOpen:s}=e;return!!i&&!!a&&!0!==r&&!1!==s&&(n=i,!1===(t=a).nsfw?n.nsfw:0===l(t.prompt_moderations).length?t.nsfw:l(n.generated_image_moderation,t.prompt_moderations).some(e=>o.includes(e)))}},48513:(e,n,t)=>{t.d(n,{A:()=>o});var i=t(83833);let o=()=>{let{developerMode:e}=(0,i.D)();return!!e}},51196:(e,n,t)=>{t.d(n,{T:()=>a});var i=t(12115),o=t(68691),l=t(12142);let a=()=>{let e=(0,o.G)(e=>e.generation.modelInfo.modelInfoMap);return(0,i.useCallback)(n=>e[n]||e[l.TG.modelId]||{},[e])}},54092:(e,n,t)=>{t.d(n,{A:()=>r});var i=t(95155),o=t(3740),l=t(12115),a=t(27593);let r=e=>{let n=(0,l.useId)();return(0,i.jsxs)(o.Icon,{width:a.fb,height:a.fb,viewBox:"0 0 41 41",fill:"currentcolor",...e,children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"play-linear-gradient-".concat(n),x1:"1.75",x2:"33.97",y1:"8.98",y2:"4.01",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#DB519E"}),(0,i.jsx)("stop",{offset:".5",stopColor:"#B14BF4"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#666BD1"})]})}),(0,i.jsx)("circle",{cx:"20.23",cy:"20.55",r:"18.99",fill:"#242C3E",stroke:"url(#play-linear-gradient-".concat(n,")"),strokeWidth:"2"}),(0,i.jsx)("path",{fill:"#242C3E",d:"M12.18 12.5h16.1v16.1h-16.1z"}),(0,i.jsx)("path",{fill:"white",d:"m24.7 22.15-6.76 4.14a2.02 2.02 0 0 1-3.08-1.72v-8.04a2.02 2.02 0 0 1 3.08-1.71l6.76 4.13c1.2.73 1.2 2.47 0 3.2Z"})]})}},54254:(e,n,t)=>{t.d(n,{s:()=>a});var i=t(31481),o=t(35936),l=t(66262);let a=e=>{let{imageWidth:n,imageHeight:t,alchemy:a,highResolution:r,photoReal:s,sdVersion:d,photoRealVersion:c}=e;if(a){let{finalResolutionWidth:e,finalResolutionHeight:a}=(0,l.K)({width:n,height:t,isHighResolution:!!r,isUsingAlchemyV2:(0,o.kt)(d),isUsingPhotoRealV2:!!s&&c===i.PhotoRealVersion.V2});return{width:e,height:a}}return{width:n,height:t}}},54373:(e,n,t)=>{t.d(n,{A:()=>u});var i=t(95155),o=t(69507),l=t(70024),a=t(46671),r=t(12115),s=t(37479),d=t(958),c=t(85756);let u=(0,r.memo)(function(e){var n;let{modelId:t}=e,{data:r,loading:u}=(0,o.I)(d.fsA,{variables:{id:t},skip:!t||a.sd_versions.hasOwnProperty(t)});if(u||!(null==r?void 0:r.custom_models_by_pk))return(0,i.jsx)(s.A,{});let g=r.custom_models_by_pk,m=null===(n=g.generated_image)||void 0===n?void 0:n.url,p=g.name;return m?(0,i.jsx)(l.Image,{alt:p,src:"".concat(m+c.ij),objectFit:"cover",w:"100%",h:"100%"}):(0,i.jsx)(s.A,{})})},54646:(e,n,t)=>{t.d(n,{G:()=>a});var i=t(65352),o=t(31188),l=t(68691);let a=()=>{let e=(0,i.d4)(o.$,e=>e.context.modelId),n=(0,l.G)(e=>e.generation.modelInfo.modelInfoMap);return{inputModelId:e=>{let t=n[e].sdVersion;o.$.send({type:"input.model",params:{modelId:e,modelVersion:t}})},modelId:e}}},54836:(e,n,t)=>{t.d(n,{L:()=>m});var i=t(95155),o=t(59108),l=t(58670),a=t(39376),r=t(6874),s=t.n(r),d=t(35695),c=t(12115),u=t(3740);let g=e=>(0,i.jsx)(u.Icon,{width:4,height:4,viewBox:"0 0 14 12",...e,children:(0,i.jsx)("path",{fill:"currentcolor",d:"M13.4706 6.47203L8.80461 11.138C8.67461 11.268 8.50392 11.3334 8.33325 11.3334C8.16259 11.3334 7.9919 11.268 7.8619 11.138C7.60123 10.8774 7.60123 10.456 7.8619 10.1953L11.3905 6.66669H0.999919C0.631252 6.66669 0.333252 6.36802 0.333252 6.00002C0.333252 5.63202 0.631252 5.33336 0.999919 5.33336H11.3905L7.8619 1.80471C7.60123 1.54405 7.60123 1.12267 7.8619 0.862004C8.12256 0.601337 8.54394 0.601337 8.80461 0.862004L13.4706 5.52802C13.5326 5.59002 13.5813 5.6633 13.6153 5.74531C13.6826 5.90797 13.6826 6.09208 13.6153 6.25475C13.5813 6.33674 13.5326 6.41003 13.4706 6.47203Z"})}),m=e=>{let{modelId:n}=e,t=(0,d.usePathname)();return(0,c.useMemo)(()=>null==t?void 0:t.includes("/models/[id]"),[t])?null:(0,i.jsxs)(o.Flex,{as:s(),href:"/models/".concat(n),alignItems:"center",gap:2,children:[(0,i.jsx)(l.Text,{as:"span",fontSize:"sm",fontWeight:400,lineHeight:1,children:"View More"}),(0,i.jsx)(a.IconButton,{as:"span",icon:(0,i.jsx)(g,{}),"aria-label":"View more",variant:"none",minW:3,h:"auto"})]})}},54914:(e,n,t)=>{t.d(n,{a:()=>o});var i=t(95155);let o=e=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{d:"M11.4706 3C11.3382 3 11.239 3.06552 11.2059 3.16379L10.7426 4.4086L9.48529 4.86721C9.38603 4.89997 9.35294 4.99825 9.35294 5.09652C9.35294 5.22755 9.38603 5.32583 9.48529 5.35859L10.7426 5.8172L11.2059 7.02925C11.239 7.12753 11.3382 7.19304 11.4706 7.19304C11.5699 7.19304 11.6691 7.12753 11.7022 7.02925L12.1654 5.8172L13.4228 5.35859C13.5221 5.32583 13.5882 5.22755 13.5882 5.09652C13.5882 4.99825 13.5221 4.89997 13.4228 4.86721L12.1654 4.4086L11.7022 3.16379C11.6691 3.06552 11.5699 3 11.4706 3Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M5.11765 6.14478L3.23162 6.86546C3.06618 6.89822 3 7.06201 3 7.19304C3 7.35683 3.06618 7.52062 3.23162 7.55338L5.11765 8.2413L5.8125 10.1085C5.84559 10.2395 6.01103 10.3378 6.17647 10.3378C6.30882 10.3378 6.47426 10.2395 6.50735 10.1085L7.23529 8.2413L9.08823 7.55338C9.25368 7.52062 9.35294 7.35683 9.35294 7.19304C9.35294 7.06201 9.25368 6.89822 9.08823 6.86546L7.23529 6.14478L6.50735 4.31033C6.47426 4.14653 6.30882 4.04826 6.17647 4.04826C6.01103 4.04826 5.84559 4.14653 5.8125 4.31033L5.11765 6.14478Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M16.7647 16.807L14.8787 17.5276C14.7132 17.5604 14.6471 17.7242 14.6471 17.8552C14.6471 18.019 14.7132 18.1828 14.8787 18.2156L16.7647 18.9035L17.4596 20.7707C17.4926 20.9017 17.6581 21 17.8235 21C17.9559 21 18.1213 20.9017 18.1544 20.7707L18.8824 18.9035L20.7353 18.2156C20.9007 18.1828 21 18.019 21 17.8552C21 17.7242 20.9007 17.5604 20.7353 17.5276L18.8824 16.807L18.1544 14.9725C18.1213 14.8087 17.9559 14.7104 17.8235 14.7104C17.6581 14.7104 17.4926 14.8087 17.4596 14.9725L16.7647 16.807Z",fill:"currentColor"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2695 6.33243L19.0177 8.08057C19.4265 8.48857 19.6508 9.03152 19.65 9.609C19.6492 10.1857 19.4232 10.7278 19.0144 11.135L9.27664 20.8289C9.16679 20.938 9.01689 21 8.86154 21H4.93846C4.61363 21 4.35 20.7364 4.35 20.4115V16.4885C4.35 16.3331 4.4112 16.184 4.52183 16.0734L14.215 6.33559C14.6214 5.9268 15.1636 5.70079 15.7411 5.7C16.35 5.69922 16.8607 5.92443 17.2695 6.33243ZM5.52692 19.8231H8.61826L15.7074 12.767L12.5829 9.64348L5.52692 16.7317V19.8231ZM16.5414 11.9369L18.1844 10.301C18.3704 10.1158 18.4731 9.86943 18.4738 9.60737C18.4738 9.34452 18.3719 9.09817 18.1867 8.91221L16.4386 7.16407C16.2526 6.9789 16.0062 6.87692 15.7442 6.87692C15.4813 6.87771 15.2342 6.97974 15.049 7.1657L13.4131 8.80944L16.5414 11.9369Z",fill:"currentColor"})]})},55872:(e,n,t)=>{t.d(n,{S:()=>eQ});var i=t(95155),o=t(23375),l=t(5520),a=t(12115),r=t(23205),s=t(77700),d=t(59108),c=t(58670),u=t(84492),g=t(16299),m=t(5643),p=t(19782),h=t(49174),x=t(52017),v=t(41719),b=t(58727),f=t(55028),C=t(35695),j=t(62398),I=t(31188),w=t(20151),y=t(96576),L=t(38322),k=t(57599),M=t(85821),S=t(62240);let T=e=>{let{onUpscaleClick:n}=e,{upscaleUltraLoading:t,upscaleHdLoading:o,upscaleSmoothLoading:l,alchemyRefinerLoading:a}=(0,L.L)(),r=t||o||l||a;return(0,i.jsx)(k.Tooltip,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:r?"Upscaling...":"Upscale image",children:(0,i.jsxs)(M.Button,{variant:"glassmorph","aria-label":"Upscale Image",onClick:n,w:"fit-content",px:{md:3},display:"flex",gap:2,children:[r?(0,i.jsx)(u.Spinner,{boxSize:{base:"1.25rem",md:"1.325rem"}}):(0,i.jsx)(S.A,{boxSize:{base:"1.25rem",md:"1.325rem"}}),(0,i.jsx)(c.Text,{display:{base:"none",md:"block"},children:"Upscale"})]})})};var A=t(39376),_=t(80436),D=t(84536),P=t(59789),U=t(77062),E=t(14331),R=t(10225),G=t(83833),B=t(64478),F=t(48392);let O=e=>{let{onMotionClick:n}=e,t=(0,B.w)(),{hasPermission:o}=(0,E.S)(),{isMotionV3Enabled:l}=(0,G.D)(),{setAcknowledged:a,isAcknowledged:r}=(0,R.T)(t),d=o("generationMotion","create"),{open:c}=(0,U.A)(F.A.UPGRADE),u=!r(R.X.MOTION_V3)&&l;return(0,i.jsx)(k.Tooltip,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:"Generate video",children:(0,i.jsxs)(s.Box,{position:"relative",children:[(0,i.jsx)(A.IconButton,{variant:"glassmorph",icon:(0,i.jsx)(D.A,{boxSize:5}),"aria-label":"Generate Video",onClick:()=>{if(!d){c();return}u&&a(R.X.MOTION_V3,!0),n()}}),d?u?(0,i.jsx)(_.Badge,{className:"absolute -top-2.5 -left-0.5",size:"xs",children:"New"}):void 0:(0,i.jsx)(P.W,{badgePosition:"topRight",badgeSize:3,height:4,borderRadius:2,borderTopRightRadius:4})]})})};var z=t(7522),V=t(19321),W=t(68691),N=t(91073),H=t(54916);let Z=e=>{let{imageUrl:n}=e,t=(0,W.j)(),o=(0,C.useRouter)(),l=(0,N.A)();return(0,i.jsx)(k.Tooltip,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:"Edit in canvas",children:(0,i.jsx)(A.IconButton,{variant:"glassmorph",icon:(0,i.jsx)(z.A,{fill:"white"}),"aria-label":"Edit in canvas",onClick:()=>{if(!n){l({title:"Failed to edit in canvas",description:"Please try again",type:N.k.error});return}t((0,H.Sp)(n)),o.push(V.a.CANVAS)}})})};var $=t(14073),Y=t(84025);let q=()=>{let{handleDelete:e}=(0,L.L)(),{hasPermission:n}=(0,E.S)(),t=n("generation","delete"),{open:o}=(0,U.A)(F.A.UPGRADE);return(0,i.jsx)(k.Tooltip,{label:t?"Delete image":"Upgrade to Premium to delete images",hasArrow:!0,placement:"top",shouldWrapChildren:!0,children:(0,i.jsxs)(s.Box,{position:"relative",children:[(0,i.jsx)(A.IconButton,{variant:"glassmorph",backdropFilter:"none","aria-label":t?"Delete image":"Upgrade to Premium to delete images",icon:(0,i.jsx)(Y.A,{boxSize:5}),onClick:()=>{if(t){e();return}o()}}),!t&&(0,i.jsx)(P.W,{badgePosition:"topRight",badgeSize:3,height:4,borderRadius:2,borderTopRightRadius:4})]})})};var K=t(52516),X=t(21542),J=t(40619),Q=t(11819),ee=t(98371),en=t(69122);let et=()=>{let{handleAddCollectionImage:e,handleRemoveCollectionImage:n}=(0,Q.A)(),{showCollectionImagesToast:t}=(0,ee.A)(),{openCollectionPrivacyWarning:o}=(0,J.o)(),{userSelectedTeam:l}=(0,en.s)(),r=!!l(),{image:s}=(0,y.g)(),{modalNavigator:d}=(0,w.cr)(),[c,u]=(0,a.useState)(!1),{mainItem:g}=d,m=s||g,p=[{id:(null==m?void 0:m.id)||"",isPublic:!1,url:"",variations:[],userId:null,collection_images:[],teamId:null,generationId:null==s?void 0:s.generation.id}],h=async(i,l)=>{if(s&&i){let a=!s.public;r&&a&&l&&o(),l?await e(i,s,(e,n,i,o)=>t(e,n,i,o)):await n(i,s,(e,n,i,o)=>t(e,n,i,o))}};return(0,i.jsx)(K.f,{mode:X.v1.UPDATE,onCollectionChecked:h,selectedImages:p,isQuickActionsButton:!0,isOpen:c,onOpenChange:u})};var ei=t(43594),eo=t(71983);let el=e=>{let{imageUrl:n}=e,t=(0,N.A)(),o=(0,eo.X)();return(0,i.jsx)(k.Tooltip,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:"Download image",children:(0,i.jsx)(A.IconButton,{variant:"glassmorph",backdropFilter:"none",icon:(0,i.jsx)(ei.A,{boxSize:5}),"aria-label":"Download image",onClick:()=>{if(!n){t({title:"Failed to download image",description:"Please try again",type:N.k.error});return}o({imageUrl:n})}})})};var ea=t(91887),er=t(81839),es=t(75264);let ed=()=>{let{handleRemoveBg:e,removeBgLoading:n}=(0,L.L)(),{image:t,setSelectedVariationId:o}=(0,y.g)(),l=(0,es.t5)((null==t?void 0:t.generated_image_variation_generics)||[]),a=!!(null==l?void 0:l.id);return(0,i.jsx)(er.w,{variant:"ImageGenerationPopoverMenu",buttonLabel:a?"View Removed Background":"Remove Background",leftIcon:(0,i.jsx)(ea.A,{boxSize:4,color:"white"}),isLoading:n,handleButtonClick:()=>{a&&l?o(l.id):e()}})};var ec=t(54999),eu=t(958);let eg=e=>{let{isLoading:n,describeImage:t}=e,o=(0,N.A)(),{image:l}=(0,y.g)(),a=async()=>{var e;await t({imageId:(null==l?void 0:l.id)||"",initImageType:eu.Nyx.Generated,teamId:l?null===(e=l.teamId)||void 0===e?void 0:e.toString():void 0}).catch(e=>{o({title:"Error describing image",description:e.message,type:N.k.error})})};return(0,i.jsx)(er.w,{variant:"ImageGenerationPopoverMenu",buttonLabel:"Describe with AI",leftIcon:(0,i.jsx)(ec.Z,{className:"text-primary-foreground"}),handleButtonClick:a,isLoading:n})};var em=t(21131),ep=t(4076);let eh=e=>{let{closeImageFullModal:n}=e,{image:t}=(0,y.g)(),o=(0,C.useRouter)(),{version:l,onUseAsImageGuidanceInput:a}=(0,em.YE)();return(0,i.jsx)(er.w,{variant:"ImageGenerationPopoverMenu",buttonLabel:"Use as Image Guidance",leftIcon:(0,i.jsx)(ep.d,{className:"text-primary-foreground"}),handleButtonClick:()=>{if(null==t?void 0:t.originalUrl){if(n(),l===em.cN.V2&&a){a({url:t.originalUrl,initImageId:t.id,initImageType:eu.AbP.Generated,alt:""});return}if(t.id)try{let e=new URLSearchParams({"guidance-id":t.id,"guidance-type":eu.AbP.Generated}).toString();o.push("".concat(V.a.IMAGE_GENERATION,"?").concat(e))}catch(e){console.error("Error redirecting to Image Generation with Image Guidance:",e)}}}})};var ex=t(54914);let ev=e=>{let{onOpen:n}=e;return(0,i.jsx)(er.w,{variant:"ImageGenerationPopoverMenu",buttonLabel:"Edit with AI",leftIcon:(0,i.jsx)(ex.a,{className:"text-primary-foreground"}),handleButtonClick:n})};var eb=t(31481),ef=t(30850);let eC=e=>{let{onOpen:n,generation:t}=e,{image:o}=(0,y.g)();return(null==o?void 0:o.generation.modelId)!==eb.MODEL_IDS.FLUX_DEV&&(null==o?void 0:o.generation.modelId)!==eb.MODEL_IDS.FLUX_SCHNELL&&t?(0,i.jsx)(er.w,{variant:"ImageGenerationPopoverMenu",buttonLabel:"Edit Character Pose",leftIcon:(0,i.jsx)(ef.Y,{className:"text-primary-foreground"}),handleButtonClick:n,stickerLabel:"Beta"}):null};var ej=t(19460),eI=t(58195),ew=t(688),ey=t(4859),eL=t(78203),ek=t(10610),eM=t(1107),eS=t(26709),eT=t(35936),eA=t(12142);let e_=e=>{var n,t,o,l;let{generation:r,onClose:s,onGenerate:d}=e,[c,u]=(0,a.useState)(""),[g,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)(r.quantity),x=(0,eM.a)(e=>e.context.isUsingCustomResolution),{regenerate:v}=(0,ek.usePromptEnhance)(),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.focus()},2);return()=>clearTimeout(e)},[b]);let f=(0,eL.z6)(r.imageWidth,r.imageHeight),C=(0,eS.xt)({controlnets:r.generation_controlnets.map(e=>e.controlnet_definition.controlnetType),highResolution:!1,imageHeight:r.imageHeight,imageWidth:r.imageWidth,inferenceSteps:eA.TG.stepCount,motionPrompts:[],numImages:r.quantity,isUsingAlchemy:null!==(n=r.alchemy)&&void 0!==n&&n,isUsingUltra:null!==(t=r.ultra)&&void 0!==t&&t,usingLeonardoMagic:!1,usingMotion:!1,usingPhotoReal:null!==(o=r.photoReal)&&void 0!==o&&o,usingSdxl:(0,eT.kt)(r.sdVersion),usingSdxlLightning:(0,eT.Ye)(r.sdVersion),modelVersion:null!==(l=r.sdVersion)&&void 0!==l?l:void 0},f,x);return(0,i.jsx)(ey.D,{instruction:c,setInstruction:u,usingFixedSeed:g,setUsingFixedSeed:m,numImagesToGenerate:p,setNumImagesToGenerate:h,handleGenerate:()=>{c&&r&&(v(r,c,g,p),d())},onClose:s,generation:r,tokenCost:C,textareaRef:b})},eD=e=>{let{isOpen:n,onClose:t,onGenerate:o,generation:l}=e;return l?(0,i.jsxs)(ej.Popover,{isOpen:n,isLazy:!0,lazyBehavior:"keepMounted",placement:"top-end",children:[(0,i.jsx)(eI.PopoverContent,{width:"100%",children:(0,i.jsx)(e_,{generation:l,onClose:t,onGenerate:o})}),(0,i.jsx)(ew.PopoverAnchor,{children:(0,i.jsx)("div",{className:"pointer-events-none absolute top-6 right-6"})})]}):null};var eP=t(17710),eU=t(18104),eE=t(1936),eR=t(2102);let eG=(0,f.default)(()=>t.e(7971).then(t.bind(t,57971)).then(e=>e.ImageUpscalerModal),{loadableGenerated:{webpack:()=>[57971]}}),eB=(0,f.default)(()=>t.e(9665).then(t.bind(t,99665)).then(e=>e.MotionGenerationModal),{loadableGenerated:{webpack:()=>[99665]}}),eF=(0,f.default)(()=>Promise.all([t.e(9167),t.e(2106),t.e(786)]).then(t.bind(t,92106)).then(e=>e.EditPoseModal),{loadableGenerated:{webpack:()=>[92106]}}),eO=e=>{let{imageUrl:n,closeImageFullModal:t}=e,o=(0,B.w)(),l=(0,C.useRouter)(),r=(0,C.usePathname)(),{image:s}=(0,y.g)(),{startPollingImageVariations:c}=(0,L.L)(),{modalNavigator:u}=(0,w.cr)(),g=(null==s?void 0:s.userId)===o,{isOpen:m,onOpen:p,onClose:h}=(0,x.useDisclosure)(),{isOpen:f,onOpen:k,onClose:M}=(0,x.useDisclosure)(),{isOpen:S,onOpen:A,onClose:_}=(0,x.useDisclosure)(),{isOpen:D,onOpen:P,onClose:U}=(0,x.useDisclosure)(),{isOpen:E,onOpen:R,onClose:G}=(0,x.useDisclosure)(),F=(0,eE.p)(s),{mainItem:z}=u,W=(null==F?void 0:F.url)?F:z,N=(null==W?void 0:W.id)||"",H=null==r?void 0:r.includes(V.a.IMAGE_GENERATION),{isLoading:Y,describeImage:K}=(0,j.useDescribeImage)({actor:I.$,onSuccess:e=>{if(!H){l.push("".concat(V.a.IMAGE_GENERATION,"?prompt=").concat(encodeURIComponent(e)));return}(0,eR.eG)(),t()}}),X=(0,v.useBreakpointValue)({base:"auto",md:"top-start"}),J=null==s?void 0:s.generation,Q=!!J,ee=!!J,en=!!s;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Flex,{flexDirection:{base:"column-reverse",md:"row"},gap:4,justifyContent:"space-between",alignItems:{base:"center",md:"flex-end"},padding:5,w:"full",transform:{base:"translateY(4.25rem)",md:"translateY(0)"},children:[(0,i.jsx)(eU.R,{placement:X,variations:null==s?void 0:s.generated_image_variation_generics}),(0,i.jsxs)(b.HStack,{gap:1.5,position:"relative",children:[(0,i.jsx)(T,{onUpscaleClick:p}),(0,i.jsx)(O,{onMotionClick:P}),(0,i.jsx)(Z,{imageUrl:n}),(0,i.jsx)($.v,{imageUrl:n}),g&&(0,i.jsx)(q,{}),g&&(0,i.jsx)(et,{}),(0,i.jsx)(el,{imageUrl:n}),(0,i.jsxs)(eP.x,{variant:"glassmorph",shouldWrapWithPortal:!1,isLoading:Y,moreOptionsDisclosure:{isOpen:E,onOpen:()=>{f&&M(),R()},onClose:G},children:[(0,i.jsx)(ed,{}),en&&(0,i.jsx)(eg,{closeImageFullModal:t,isLoading:Y,describeImage:K}),ee&&(0,i.jsx)(eh,{generation:J,closeImageFullModal:t}),Q&&(0,i.jsx)(ev,{onOpen:k}),(0,i.jsx)(eC,{onOpen:A,generation:J})]})]}),(0,i.jsx)(eD,{isOpen:f,onClose:M,onGenerate:()=>{M(),t()},generation:J})]}),(0,i.jsx)(a.Suspense,{children:s&&(0,i.jsx)(eB,{image:s,inputIsPrivate:!s.generation.public,isOpen:D,onClose:U})}),(0,i.jsx)(a.Suspense,{children:(0,i.jsx)(eG,{imageId:N,isOpen:m,onClose:h,onUpscale:()=>c(5e3)})}),(0,i.jsx)(a.Suspense,{children:s&&J&&(0,i.jsx)(eF,{image:{...s,generation:J,url:s.originalUrl,image_width:J.imageWidth,image_height:J.imageHeight},isOpen:S,onClose:()=>{_(),t()}})})]})};var ez=t(52534),eV=t(90898),eW=t(98021),eN=t(42595),eH=t(76765),eZ=t(34667),e$=t(85756),eY=t(49993);let eq=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Box,{position:"absolute",top:0,left:0,w:"full",h:"full",zIndex:4,children:(0,i.jsx)(d.Flex,{bgColor:"#202020",w:"full",minH:"20vh",h:"full",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(eH.a,{})})}),(0,i.jsxs)(d.Flex,{position:"absolute",bottom:20,right:0,m:2,alignItems:"center",transition:"0.1s",backgroundColor:"rgba(25, 25, 25, 0.9)",rounded:"3xl",py:2,px:3,zIndex:6,children:[(0,i.jsx)(c.Text,{mr:1,fontWeight:300,children:"Loading..."})," ",(0,i.jsx)(u.Spinner,{size:"sm"})]})]}),eK=(0,i.jsxs)(d.Flex,{position:"absolute",bottom:20,right:0,m:2,alignItems:"center",transition:"0.1s",backgroundColor:"rgba(25, 25, 25, 0.9)",rounded:"3xl",py:2,px:3,zIndex:6,children:[(0,i.jsx)(c.Text,{mr:1,fontWeight:300,children:"Loading..."})," ",(0,i.jsx)(u.Spinner,{size:"sm"})]}),eX=e=>{var n;let{closeImageFullModal:t}=e,{image:o,setLoadingSelectedVariation:l,selectedImageVariation:r,setSelectedVariationId:c}=(0,y.g)(),{modalNavigator:u}=(0,w.cr)({onNavigate:()=>c(void 0)}),{zoomToMouseClickLocation:x,isZoomed:v}=(0,ez.H)();(0,w.t)(eX.name);let{mainItem:b,prevItem:f,nextItem:C}=u,j=(0,a.useRef)(null),I=(0,a.useRef)(null),L=(0,a.useRef)(null),k=(0,a.useRef)(null),M=(0,eE.p)(o),S=(null==M?void 0:M.url)?M:b,T=(null==r?void 0:r.url)||(null==S?void 0:S.url),{width:A,height:_}=(0,eZ.p)(null!==(n=null==S?void 0:S.generation)&&void 0!==n?n:null),D="number"==typeof A&&"number"==typeof _,[P,U]=(0,a.useState)(!1);(0,a.useLayoutEffect)(()=>{U(!1)},[]);let E=e=>{P&&x(e,k.current)},R=(0,eT.vM)(null==S?void 0:S.generation);return(0,i.jsx)(s.Box,{pointerEvents:"none",display:v?"none":"block",children:(0,i.jsxs)(g.ModalContent,{ref:I,w:{base:"inherit",md:"auto"},maxH:{base:"100vh"},maxW:{base:"none",md:"85vw",lg:"90vw"},mt:0,mb:0,mx:{base:0,md:4},position:"relative",children:[(0,i.jsx)(eV.X,{pointerEvents:"auto",displayOnBase:!0}),(0,i.jsxs)(m.ModalBody,{bg:"gradient.background",p:"0",rounded:"lg",minW:"100%",minH:{base:"100%",md:"auto"},pointerEvents:"auto",overflow:"hidden",children:[(0,i.jsx)(p.ModalCloseButton,{zIndex:7}),(0,i.jsx)(d.Flex,{ref:j,justifyContent:"center",m:"auto",minH:{base:32,md:64},minW:{base:32,md:"xl",lg:"2xl"},maxH:"100vh",maxW:{base:"100vw",md:"90vw"},position:"relative",sx:{aspectRatio:"auto ".concat(A," / ").concat(_),_before:{content:'""',bg:"linear-gradient(180deg, rgba(0, 0, 0, 0.00) 85%, rgba(0, 0, 0, 0.70) 100%)",position:"absolute",bottom:0,left:0,right:0,top:0,pointerEvents:"none",zIndex:6}},children:(0,i.jsxs)(d.Flex,{justifyContent:"center",w:"full",position:"relative",onClick:E,sx:{aspectRatio:"inherit","&:hover":{cursor:P?"zoom-in":"default"}},...!T&&{w:"100%"},...R&&eY.c8,zIndex:5,children:[(0,i.jsx)(eN.o,{src:T||"Unknown image",fallbackSrc:"".concat(T+e$.xN),...D&&{fill:!1,height:_,width:A},style:{objectFit:"contain"},alt:(null==o?void 0:o.prompt)||"",onClick:E,customLoader:eq,fallbackLoader:eK,onLoad:()=>{l(!1),U(!0)},ref:k},T),f&&(0,i.jsx)(eW._,{src:f.url||"",alt:"",height:0,width:0}),C&&(0,i.jsx)(eW._,{src:C.url||"",alt:"",height:0,width:0})]})})]}),(0,i.jsx)(h.ModalFooter,{ref:L,p:0,pointerEvents:"auto",position:"absolute",bottom:0,left:0,right:0,zIndex:7,children:(0,i.jsx)(eO,{closeImageFullModal:t,imageUrl:T})})]})})};var eJ=t(50206);let eQ=e=>{let{modalNavigator:n,isOpen:t,onClose:s,showCollectionDropdown:d,selectedVariationValue:c}=e,{mainItemId:u,relatedItemId:g}=n,m=n.mainItem,{isFocusModalRedesignEnabled:p}=(0,G.D)(),h=!(0,y.g)().contextExists,x=(0,a.useRef)(null),v=(0,i.jsx)(L.S,{children:(0,i.jsx)(w.K4,{modalNavigator:n,children:(0,i.jsxs)(ez.u,{children:[(0,i.jsx)(o.ModalOverlay,{onClick:s,ref:x}),p&&(0,i.jsx)(eX,{closeImageFullModal:s}),!p&&(0,i.jsx)(r.f,{showCollectionDropdown:d}),(0,i.jsx)(eJ.H,{})]})})});return(0,i.jsx)(l.Modal,{variant:"imageDetailModal",isCentered:!0,isOpen:t,onClose:s,children:h?(0,i.jsx)(y.z,{imageId:g||u,onClose:s,fallbackImage:m,selectedVariationValue:c,children:v}):v})}},60663:(e,n,t)=>{t.d(n,{Ay:()=>c,t$:()=>d});var i=t(95155),o=t(77700),l=t(70024),a=t(85756),r=t(27593);let s="2.125",d=e=>{let{element:n,imageProps:t,...d}=e;return(0,i.jsx)(o.Box,{height:"calc(".concat(r.fb," * ").concat(s,")"),width:"calc(".concat(r.fb," * ").concat(s,")"),minHeight:"calc(".concat(r.fb," * ").concat(s,")"),minWidth:"calc(".concat(r.fb," * ").concat(s,")"),borderWidth:"sm",borderColor:"#B14BF4",borderStyle:"solid",rounded:"50%",overflow:"hidden",bg:"rgba(19, 25, 38, 1)",...d,children:(0,i.jsx)(l.Image,{src:n.urlImage?"".concat(n.urlImage+a.ij):a.$D,alt:n.name,objectFit:"cover",rounded:"50%",w:"calc(".concat(r.fb," * ").concat(s,")"),h:"calc(".concat(r.fb," * ").concat(s,")"),...t||{}})})},c=e=>{let{elements:n,...t}=e;return(0,i.jsx)(o.Box,{height:"calc(".concat(r.fb," * ").concat(s,")"),width:"calc(".concat(r.fb," * ").concat(s," * ").concat((n.length+1)*.5,")"),position:"relative",...t,children:n.map((e,n)=>e?(0,i.jsx)(d,{element:e,position:"absolute",left:"calc(".concat(r.fb," * ").concat(s," * ").concat(.5*n,")")},n):(0,i.jsx)(i.Fragment,{}))})}},61364:(e,n,t)=>{t.d(n,{c:()=>m});var i=t(69507),o=t(12115),l=t(33383),a=t(71579),r=t(958),s=t(68691),d=t(83833),c=t(69122),u=t(35936);let g=(e,n,t)=>e.filter(e=>{let i=e.modelId&&n[e.modelId];return!i||!!((0,u.W0)(i.sdVersion,t)&&(0,u.cB)(i.id,t))}),m=()=>{let{userSelectedTeam:e}=(0,c.s)(),n=e(),t={isPublic:{_eq:!0},ownerType:{_eq:"LEONARDO"}},u={teamId:{_eq:n.id},ownerType:{_eq:"TEAM"}},m=n.id?{_or:[t,u]}:t,p={akUUID:{_neq:a.yM}},{data:h}=(0,i.I)(r.olf,{variables:{where:{...m,...p,payload:{_is_null:!1}},order_by:{name:r.V47.Asc}}}),x=(0,o.useMemo)(()=>(null==h?void 0:h.preset)||[],[null==h?void 0:h.preset]),v=(0,s.G)(e=>e.generation.modelInfo.modelInfoMap),b=(0,d.D)(),f=(0,o.useMemo)(()=>g(x,v,b),[b,v,x]),C=f.map(e=>e.payload.preferredStyles).flat(),j="flow-state"!==b.isDefaultPresetSplitEnabled&&b.isDefaultPresetSplitEnabled||l.SO,I=f.find(e=>e.akUUID===j);return{platformPresets:f,allPresetPreferredStyles:C,defaultPreset:I}}},62158:(e,n,t)=>{t.d(n,{q:()=>c});var i=t(35695),o=t(12115),l=t(68691),a=t(19321),r=t(35936),s=t(31698),d=t(60519);let c=e=>{let{imageId:n,imageToImage:t,generationProps:c}=e,u=(0,l.j)(),g=(0,l.G)(e=>e.generation.lastModelIds),m=(0,i.useRouter)();return{handleGenerateModelLink:(0,o.useCallback)(()=>{if(c&&(u((0,d.oc)({newSettings:c})),c.modelId&&(u((0,d.oc)({newSettings:{modelId:c.modelId}})),g.includes(c.modelId)||u((0,d.Kt)([c.modelId])))),(0,r.ef)(null==c?void 0:c.sdVersion)){var e,i;let n=null==c?void 0:null===(e=c.elements)||void 0===e?void 0:e.map(e=>e.id),t=null==c?void 0:null===(i=c.userElements)||void 0===i?void 0:i.map(e=>e.id),o="modelId=".concat(null==c?void 0:c.modelId).concat(n?"&elements=".concat(n):"").concat(t?"&userElements=".concat(t):"");return m.push("".concat(a.a.IMAGE_GENERATION,"?").concat(o))}return n?m.push("".concat(a.a.AI_GENERATIONS,"?imageId=").concat(n)):t?m.push("".concat(a.a.AI_GENERATIONS,"/image-guidance")):m.push(a.a.AI_GENERATIONS)},[c,n,t,m,u,g]),handleImageGenV2Img2ImgLink:(0,o.useCallback)(e=>{let n="imageId=".concat(e,"&guidanceType=").concat(s.w.Img2Img);return m.push("".concat(a.a.IMAGE_GENERATION,"?").concat(n))},[m])}}},64664:(e,n,t)=>{t.d(n,{Q:()=>ti});var i=t(95155),o=t(69507),l=t(5520),a=t(23375),r=t(16299),s=t(19782),d=t(5643),c=t(75569),u=t(12115),g=t(55872),m=t(21118),p=t(77700),h=t(59108),x=t(43508),v=t(20338),b=t(88095),f=t(58670),C=t(91690),j=t(60663),I=t(85438);let w=e=>"name"in e&&"urlImage"in e&&"akUUID"in e&&"weight"in e,y=e=>{let{elements:n,userElements:t}=e,o=[...n,...t];return(0,i.jsxs)(h.Flex,{bgColor:"rgba(23, 23, 23, 1)",borderRadius:"lg",flexDir:"column",p:2,px:3.5,children:[(0,i.jsx)(f.Text,{lineHeight:1,fontWeight:"400",color:"rgba(219, 219, 219, 0.5)",fontSize:"0.875rem",mb:2,children:"Elements"}),(0,i.jsx)(m.Grid,{mt:2,rowGap:"0.3125rem",columnGap:"0.9375rem",gridTemplateColumns:"repeat(2, 1fr)",children:o.map(e=>(0,i.jsxs)(h.Flex,{fontSize:"0.8rem",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(h.Flex,{children:[(0,i.jsx)(j.t$,{element:e,width:"1.875rem",height:"1.875rem"}),(0,i.jsx)(h.Flex,{alignItems:"center",justifyContent:"space-between",ml:2,children:(0,i.jsx)(I.A,{children:e.name})})]}),(0,i.jsx)(C.A,{background:"#181F2F",color:"#9094A6",fontWeight:"initial",px:1,fontSize:"xs",rounded:"md",weight:e.weight})]},w(e)?e.akUUID:e.id))})]})};var L=t(27593);let k=e=>{let{name:n,weight:t,strengthType:o,...l}=e;return(0,i.jsxs)(h.Flex,{fontSize:"calc(".concat(L.fb," * 0.8)"),alignItems:"center",justifyContent:"space-between",...l,children:[(0,i.jsx)(h.Flex,{children:(0,i.jsx)(h.Flex,{alignItems:"center",justifyContent:"space-between",children:(0,i.jsx)(I.A,{children:n})})}),(0,i.jsx)(C.A,{background:"#181F2F",color:"#9094A6",fontWeight:"initial",px:1,fontSize:"xs",rounded:"md",strengthType:o,weight:t})]})},M=e=>{let{controlnets:n,initStrength:t,imagePromptStrength:o}=e;return(0,i.jsxs)(h.Flex,{bgColor:"rgba(23, 23, 23, 1)",borderRadius:"lg",flexDir:"column",p:2,px:3.5,children:[(0,i.jsx)(f.Text,{lineHeight:1,fontWeight:"400",color:"rgba(219, 219, 219, 0.5)",fontSize:"sm",mb:2,children:"Image Guidance"}),(0,i.jsxs)(m.Grid,{mt:2,rowGap:"calc(".concat(L.fb," * 0.3125)"),columnGap:"calc(".concat(L.fb," * 0.9375)"),gridTemplateColumns:"repeat(2, 1fr)",children:[n.map(e=>{var n;return(0,i.jsx)(k,{name:null!==(n=e.controlnet_definition.displayName)&&void 0!==n?n:e.controlnet_definition.controlnetType,weight:e.weightApplied,strengthType:e.imageGuidanceStrengthType},e.id)}),t&&(0,i.jsx)(k,{name:"Image to Image",weight:t}),o&&(0,i.jsx)(k,{name:"Image Prompt",weight:o})]})]})};var S=t(85821),T=t(7056),A=t(62158);let _=e=>{let{model:n,elements:t,userElements:o,onClose:l,isDisabled:a}=e,r=t.map(e=>({id:e.akUUID,isEnabled:!0,weight:e.weight})),s=o.map(e=>({id:String(e.id),isEnabled:!0,weight:e.weight})),{handleGenerateModelLink:d}=(0,A.q)({generationProps:{modelId:n.id,width:768,height:768,elements:r,userElements:s,sdVersion:n.sdVersion}});return(0,i.jsx)(S.Button,{leftIcon:(0,i.jsx)(T.A,{width:L.fb,height:L.fb}),iconSpacing:1,"aria-label":"Generate with this model",onClick:async()=>{await d(),null==l||l()},variant:"gradient",fontSize:"sm",height:"unset",fontWeight:500,px:4,py:2,lineHeight:"calc(".concat(L.fb," * 0.875)"),isDisabled:a,children:"Generate with this model"})};var D=t(54373);let P=e=>{let{model:n,showCreatedWith:t}=e;return(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(f.Text,{fontSize:"sm",textAlign:"center",fontWeight:"500",color:"white",children:"Original image created with"}),(0,i.jsx)(h.Flex,{bgColor:"rgba(23, 23, 23, 1)",borderRadius:"lg",justify:"space-between",p:2,children:(0,i.jsxs)(h.Flex,{alignItems:"stretch",gap:3.5,children:[(0,i.jsx)(p.Box,{w:"calc(".concat(L.fb," * 2.625)"),h:"calc(".concat(L.fb," * 2.625)"),rounded:"md",overflow:"hidden",children:(0,i.jsx)(D.A,{modelId:n.id})}),(0,i.jsxs)(h.Flex,{flexDirection:"column",justifyContent:"space-between",children:[(0,i.jsx)(f.Text,{fontWeight:"400",fontSize:"sm",color:"rgba(219, 219, 219, 0.5)",children:"Finetuned Model"}),(0,i.jsx)(f.Text,{fontWeight:"400",fontSize:"sm",...n.isPrivate&&{color:"#FF8600"},children:n.name})]})]})})]})};var U=t(84492);let E=e=>{let{updateLoading:n,modelName:t,onClick:o}=e;return(0,i.jsxs)(S.Button,{whiteSpace:"normal",fontSize:"sm",height:"unset",px:4,py:2,variant:"gradient",onClick:o,disabled:n,textAlign:"center",lineHeight:"calc(".concat(L.fb," * 0.875)"),children:[n&&(0,i.jsx)(U.Spinner,{speed:"1s",size:"sm",mr:2}),(0,i.jsxs)(f.Text,{lineHeight:"110%",textAlign:"center",children:["Use this image as the cover for"," ",(0,i.jsx)(f.Text,{color:"white",as:"span",fontWeight:"bold",children:t})," ","model"]})]})};var R=t(958),G=t(35936);let B=e=>{let{customModel:n,modelCreatedByUserId:t,currentUserId:o,generatedByUserId:l,imageId:a,onUpdateCoverImageCompleted:r,isPrivate:s,elements:d=[],userElements:c=[],controlnets:u=[],onClose:g,initStrength:m,imagePromptStrength:p,showGenerateWithModel:x=!0,disableGenerateWithModel:v,sdVersion:f}=e,{id:C,name:j}=n||{},I={id:C,name:s?"This model is private":j,isPrivate:s,sdVersion:f},[w,{loading:L}]=(0,b.n)(R.BkK,{variables:{pk_columns:{id:I.id},_set:{featuredImageId:a}},onCompleted:()=>{null==r||r()}}),k=!!d.length||!!c.length,S=!!u.length||m||p,T=x&&!s&&(0,G.ef)(I.sdVersion);return(0,i.jsxs)(h.Flex,{padding:2,bgColor:"rgba(32, 32, 32, 1)",borderRadius:"lg",flexDir:"column",gap:2,children:[(0,i.jsx)(P,{model:I,showCreatedWith:!T}),S&&(0,i.jsx)(M,{controlnets:u,initStrength:m,imagePromptStrength:p}),k&&(0,i.jsx)(y,{elements:d,userElements:c}),T&&(0,i.jsx)(_,{elements:d,userElements:c,model:I,onClose:g,isDisabled:v}),o===l&&o===t?(0,i.jsx)(E,{updateLoading:L,modelName:I.name,onClick:()=>{w()}}):null]})};var F=t(58727),O=t(39376),z=t(64449);let V=e=>{let{label:n,onClick:t}=e;return(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},leftIcon:(0,i.jsx)(z.P0n,{style:{color:"white"}}),borderBottom:"none",onClick:t,children:n})};var W=t(43552);let N=e=>{let{label:n,onClick:t}=e;return(0,i.jsx)(S.Button,{px:2,h:8,leftIcon:(0,i.jsx)(W.A,{}),size:"sm",fontWeight:300,variant:"ModalImageButtonsStyles",onClick:t,flexGrow:1,fontSize:{base:"xs",md:"sm"},children:n})};var H=t(52516),Z=t(21542),$=t(40619),Y=t(96576),q=t(77078),K=t(3740);let X=e=>(0,i.jsx)(K.Icon,{width:3,height:3,viewBox:"0 0 12 12",fill:"currentColor",...e,children:(0,i.jsx)("path",{d:"M11.9999 0.666672V4C11.9999 4.276 11.7759 4.5 11.4999 4.5C11.2239 4.5 10.9999 4.276 10.9999 4V1.87403L5.85327 7.02068C5.75594 7.11801 5.62792 7.16732 5.49992 7.16732C5.37192 7.16732 5.2439 7.11868 5.14657 7.02068C4.95123 6.82534 4.95123 6.50865 5.14657 6.31332L10.2932 1.16667H8.16658C7.89058 1.16667 7.66658 0.942672 7.66658 0.666672C7.66658 0.390672 7.89058 0.166672 8.16658 0.166672H11.4999C11.5653 0.166672 11.63 0.180075 11.6913 0.205409C11.8133 0.256075 11.9107 0.353413 11.962 0.476079C11.9867 0.536746 11.9999 0.601338 11.9999 0.666672ZM11.4999 6.16667C11.2239 6.16667 10.9999 6.39067 10.9999 6.66667V9.33334C10.9999 10.3847 10.5513 10.8333 9.49992 10.8333H2.83325C1.78192 10.8333 1.33325 10.3847 1.33325 9.33334V2.66667C1.33325 1.61534 1.78192 1.16667 2.83325 1.16667H5.49992C5.77592 1.16667 5.99992 0.942672 5.99992 0.666672C5.99992 0.390672 5.77592 0.166672 5.49992 0.166672H2.83325C1.22125 0.166672 0.333252 1.05467 0.333252 2.66667V9.33334C0.333252 10.9453 1.22125 11.8333 2.83325 11.8333H9.49992C11.1119 11.8333 11.9999 10.9453 11.9999 9.33334V6.66667C11.9999 6.39067 11.7759 6.16667 11.4999 6.16667Z"})});var J=t(56438),Q=t(11819),ee=t(98371),en=t(89444),et=t(71983),ei=t(69122);let eo=e=>{e&&navigator.clipboard.writeText(e)},el=()=>{let{image:e}=(0,Y.g)(),{handleAddCollectionImage:n,handleRemoveCollectionImage:t}=(0,Q.A)(),{showCollectionImagesToast:o}=(0,ee.A)(),{isHomeExact:l}=(0,en.G)(),{openCollectionPrivacyWarning:a}=(0,$.o)(),{userSelectedTeam:r}=(0,ei.s)(),s=!!r(),d=[{id:String(null==e?void 0:e.id),isPublic:!1,url:"",variations:[],userId:null,collection_images:[],teamId:null,generationId:null==e?void 0:e.generation.id}],c=null==e?void 0:e.motionGifUrl,g=null==e?void 0:e.motionMp4Url,m=(0,et.X)(),p=(0,u.useCallback)(()=>eo(c),[c]),x=(0,u.useCallback)(()=>eo(g),[g]),v=async(i,l)=>{e&&i&&(d.find(e=>!e.isPublic)&&s&&l&&a(),l?await n(i,e,(e,n,t,i)=>o(e,n,t,i)):await t(i,e,(e,n,t,i)=>o(e,n,t,i)))};return(0,i.jsxs)(h.Flex,{w:"full",justifyContent:"space-between",gap:3,children:[!l&&(0,i.jsx)(H.f,{displayText:"Organize",icon:(0,i.jsx)(q.A,{boxSize:4.5}),w:"100%",rounded:"sm",mode:Z.v1.UPDATE,onCollectionChecked:v,selectedImages:d,closeModalOnEmptySelection:!1}),(0,i.jsx)(N,{label:"Download MP4",onClick:()=>g&&m({imageUrl:g})}),(0,i.jsx)(N,{label:"Download GIF",onClick:()=>c&&m({imageUrl:c})}),(0,i.jsx)(J.A,{placement:"bottom-start",menuButtons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{label:"Copy MP4 link",onClick:x}),(0,i.jsx)(V,{label:"Copy GIF link",onClick:p})]}),children:(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(X,{color:"white"}),"aria-label":"Share"})})]})};var ea=t(52017),er=t(57599),es=t(55028),ed=t(32237),ec=t(65751),eu=t(84025),eg=t(64478),em=t(45269);let ep=e=>{var n;let t=(0,eg.w)(),i=(0,em.A)(),{userSelectedTeam:o}=(0,ei.s)(),l=null===(n=o())||void 0===n?void 0:n.id,a=null==e?void 0:e.teamId;return(null==e?void 0:e.userId)===t||i&&a===l};var eh=t(14331);let ex=(0,es.default)(()=>t.e(7571).then(t.bind(t,7571)),{loadableGenerated:{webpack:()=>[7571]}}),ev=e=>{e&&navigator.clipboard.writeText(e)},eb=e=>{let{onDelete:n}=e,{hasPermission:t}=(0,eh.S)(),o=!t("generation","delete"),{image:l}=(0,Y.g)(),a=ep(l),{isOpen:r,onClose:s,onOpen:d}=(0,ea.useDisclosure)(),{isOpen:c,onClose:g,onOpen:m}=(0,ea.useDisclosure)(),[p,x]=(0,u.useState)(!1),{handleAddCollectionImage:v,handleRemoveCollectionImage:f}=(0,Q.A)(),{showCollectionImagesToast:C}=(0,ee.A)(),{openCollectionPrivacyWarning:j}=(0,$.o)(),{userSelectedTeam:I}=(0,ei.s)(),w=!!I(),{isHomeExact:y}=(0,en.G)(),L=[{id:String(null==l?void 0:l.id),isPublic:!1,url:"",variations:[],userId:null,collection_images:[],teamId:null,generationId:null==l?void 0:l.generation.id}],[k,{loading:M}]=(0,b.n)(R.$xh,{onCompleted:()=>{null==n||n(),g()}}),S=(0,u.useCallback)(async()=>{await k({variables:{id:(null==l?void 0:l.generation.id)||""}})},[k,null==l?void 0:l.generation.id]),T=null==l?void 0:l.motionMp4Url,A=(0,et.X)(),_=(0,u.useCallback)(()=>ev(T),[T]),D=async(e,n)=>{l&&e&&(L.find(e=>!e.isPublic)&&w&&n&&j(),n?await v(e,l,(e,n,t,i)=>C(e,n,t,i)):await f(e,l,(e,n,t,i)=>C(e,n,t,i)))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.Flex,{w:"full",justifyContent:"flex-end",gap:3,children:[!y&&(0,i.jsx)(H.f,{displayText:"Organize",rounded:"md",w:"100%",icon:(0,i.jsx)(q.A,{boxSize:4.5}),mode:Z.v1.UPDATE,onCollectionChecked:D,selectedImages:L,closeModalOnEmptySelection:!1}),!a&&(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(ed.eHT,{size:"0.875rem"}),"aria-label":"Report",title:"Report",onClick:()=>{x(!0),d()}}),a&&(0,i.jsx)(er.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:"Upgrade to Premium to delete videos",shouldWrapChildren:!0,isDisabled:!o,children:(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(eu.A,{color:"white",boxSize:3.5}),"aria-label":"Delete",title:"Delete",onClick:m,isDisabled:o})}),(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(W.A,{color:"white",boxSize:3.5}),"aria-label":"Download",title:"Download",onClick:()=>T&&A({imageUrl:T})}),(0,i.jsx)(J.A,{placement:"bottom-start",menuButtons:(0,i.jsx)(V,{label:"Copy video link",onClick:_}),children:(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(X,{color:"white",boxSize:3}),"aria-label":"Share",title:"Share"})})]}),p&&(0,i.jsx)(u.Suspense,{children:(0,i.jsx)(ex,{isOpen:r,onClose:s,modelId:(null==l?void 0:l.generation.modelId)||void 0})}),(0,i.jsx)(ec.A,{isMotion:!0,isOpen:c,onClose:g,deleteImage:S,loading:M})]})};var ef=t(46016),eC=t(52049),ej=t(38322),eI=t(55880),ew=t(62240),ey=t(34718);let eL=e=>{let{isLoading:n,onClick:t}=e,o={h:4,w:4};return(0,i.jsx)(p.Box,{children:(0,i.jsxs)(S.Button,{"aria-label":"Upscale Image",rounded:"md",role:"group",leftIcon:n?(0,i.jsx)(U.Spinner,{...o}):(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)(ew.A,{_groupHover:{display:"none"},...o}),(0,i.jsx)(ey.A,{display:"none",_groupHover:{display:"block"},...o})]}),fontWeight:300,variant:"ModalImageButtonsStyles",_hover:{transition:"0",filter:"none",backdropFilter:"0.125rem",background:"linear-gradient(81.02deg, rgba(250, 85, 96, 0.08) -23.47%, rgba(177, 75, 244, 0.08) 45.52%, rgba(77, 145, 255, 0.08) 114.8%)"},bg:"background.darkblue",borderStyle:"solid",borderWidth:"px",borderColor:"border.greyBlue",onClick:t,height:8,children:[(0,i.jsx)(f.Text,{display:{base:"none",md:"block"},children:"Upscale Image"}),(0,i.jsx)(f.Text,{display:{base:"block",md:"none"},children:"Upscale"})]})})};var ek=t(83833),eM=t(78373),eS=t(69756),eT=t(5112),eA=t(92796);let e_=e=>{e&&navigator.clipboard.writeText(e)},eD=()=>{let{currentPlan:e}=(0,eC.t)(),{image:n,selectedImageVariation:t,loading:o}=(0,Y.g)(),{alchemyRefinerLoading:l,openAlchemyRefinerModal:a,startPollingImageVariations:r,upscaleLoading:s}=(0,ej.L)(),{handleAddCollectionImage:d,handleRemoveCollectionImage:c}=(0,Q.A)(),{showCollectionImagesToast:g}=(0,ee.A)(),{openCollectionPrivacyWarning:m}=(0,$.o)(),{userSelectedTeam:p,selectedTeamUUID:x}=(0,ei.s)(),v=!!p(),{isUltraGenerationModeEnabled:b}=(0,ek.D)(),f=ep(n),C=(null==n?void 0:n.id)||"",{isOpen:j,onOpen:I,onClose:w}=(0,ea.useDisclosure)(),{isHomeExact:y}=(0,en.G)(),L=(null==t?void 0:t.url)||(null==n?void 0:n.originalUrl),k=(0,et.X)(),M=t=>{var i;let o={elements:null==n?void 0:n.generation.generation_elements,elements_count:null==n?void 0:n.generation.quantity,gen_opt_model:null==n?void 0:n.generation.modelId,gen_opt_preset:null==n?void 0:n.generation.presetStyle,gen_opt_sd_version:null==n?void 0:n.generation.sdVersion,image_width:null==n?void 0:n.imageWidth,image_height:null==n?void 0:n.imageHeight,modelId:null==n?void 0:n.generation.modelId,plan:e,presetId:null==n?void 0:null===(i=n.preset)||void 0===i?void 0:i.id,teamId:x,ultra:null==n?void 0:n.generation.ultra};(0,eM.u4)(eT.bp_,o),(0,eM.u4)(eS.DV,{...o,mediaType:eA.Uo.MEDIA_TYPE.IMAGE_CLASSIC,downloadType:eA.Uo.DOWNLOAD_TYPE.SINGLE,eventType:eA.Uo.EVENT_TYPE.TRACK}),k({imageUrl:t})},S=(0,u.useCallback)(()=>e_(L),[L]),T=[{id:String(null==n?void 0:n.id),isPublic:!1,url:"",variations:[],userId:null,collection_images:[],teamId:null,generationId:null==n?void 0:n.generation.id}],A=async(e,t)=>{n&&e&&(t&&!n.public&&v&&m(),t?await d(e,n,(e,n,t,i)=>g(e,n,t,i)):await c(e,n,(e,n,t,i)=>g(e,n,t,i)))};return(0,i.jsxs)(h.Flex,{w:"full",justifyContent:"space-between",gap:3,children:[(0,i.jsx)(h.Flex,{w:"100%",children:b?(0,i.jsx)(eL,{onClick:I,isLoading:s||l}):(0,i.jsx)(eI.T,{isLoading:l,isDisabled:o,onClick:a})}),!y&&f&&(0,i.jsx)(H.f,{displayText:"Organize",w:"100%",rounded:"md",icon:(0,i.jsx)(q.A,{boxSize:4.5}),mode:Z.v1.UPDATE,onCollectionChecked:A,selectedImages:T,closeModalOnEmptySelection:!1}),(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(W.A,{color:"white"}),"aria-label":"Download",onClick:()=>L&&M(L),"data-tracking-id":eT.bp_}),(0,i.jsx)(J.A,{placement:"bottom-start",menuButtons:(0,i.jsx)(V,{label:"Copy link",onClick:S}),children:(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(X,{color:"white"}),"aria-label":"Share"})}),(0,i.jsx)(ef.w,{imageId:C,isOpen:j,onClose:w,onUpscale:()=>r(5e3)})]})};var eP=t(35695),eU=t(7522),eE=t(68691),eR=t(54916);let eG=e=>{let{url:n}=e,t=(0,eE.j)(),o=(0,eP.useRouter)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(S.Button,{display:{base:"none",sm_next:"flex"},variant:"ModalPopoverMenu",fontSize:{base:"xs",sm:"sm"},onClick:()=>{n&&(t((0,eR.Sp)(n)),o.push("/canvas"))},leftIcon:(0,i.jsx)(eU.A,{height:15,width:15,fill:"white"}),children:"Edit in canvas"})})};var eB=t(15876),eF=t(91073);let eO=e=>{let{image:n}=e,t=(0,eF.A)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.Button,{onClick:()=>{n&&(navigator.clipboard.writeText(n.id),t({title:"Copied to Clipboard",description:"Image ID '".concat(n.id,"' copied to clipboard."),type:eF.k.success}))},leftIcon:(0,i.jsx)(eB.GVt,{color:"rgb(189, 189, 189)",height:4,width:4}),variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",children:"(Admin) Copy Image ID"}),(0,i.jsx)(S.Button,{onClick:()=>{(null==n?void 0:n.generation)&&(navigator.clipboard.writeText(null==n?void 0:n.generation.id),t({title:"Copied to Clipboard",description:"Generation ID '".concat(null==n?void 0:n.generation.id,"' copied to clipboard."),type:eF.k.success}))},leftIcon:(0,i.jsx)(eB.GVt,{color:"rgb(189, 189, 189)",height:4,width:4}),variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",children:"(Admin) Copy Generation ID"}),(0,i.jsx)(S.Button,{onClick:()=>{var e;(null==n?void 0:n.generation)&&(navigator.clipboard.writeText(null!==(e=n.generation.modelId)&&void 0!==e?e:""),t({title:"Copied to Clipboard",description:"Model ID '".concat(n.generation.modelId,"' for generation ID '").concat(n.generation.id,"' copied to clipboard."),type:eF.k.success}))},leftIcon:(0,i.jsx)(eB.GVt,{color:"rgb(189, 189, 189)",height:4,width:4}),variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",children:"(Admin) Copy Model ID"}),(0,i.jsx)(S.Button,{onClick:()=>{var e;(null==n?void 0:n.generation)&&(navigator.clipboard.writeText(null!==(e=n.userId)&&void 0!==e?e:""),t({title:"Copied to Clipboard",description:"User ID '".concat(n.userId,"' for generation ID '").concat(n.generation.id,"' copied to clipboard."),type:eF.k.success}))},leftIcon:(0,i.jsx)(eB.GVt,{color:"rgb(189, 189, 189)",height:4,width:4}),variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",children:"(Admin) Copy User ID"}),(0,i.jsx)(S.Button,{onClick:()=>{(null==n?void 0:n.generation)&&(navigator.clipboard.writeText(JSON.stringify(null==n?void 0:n.generation,void 0,4)),t({title:"Copied to Clipboard",description:"Generation query data for generation ID '".concat(null==n?void 0:n.generation.id,"' copied to clipboard."),type:eF.k.success}))},leftIcon:(0,i.jsx)(eB.GVt,{color:"rgb(189, 189, 189)",height:4,width:4}),variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",children:"(Admin) Copy Generation Data From Query"}),(0,i.jsx)(S.Button,{onClick:()=>{n&&(navigator.clipboard.writeText(JSON.stringify(n,void 0,4)),t({title:"Copied to Clipboard",description:"Image query data for image ID '".concat(null==n?void 0:n.id,"' copied to clipboard."),type:eF.k.success}))},leftIcon:(0,i.jsx)(eB.GVt,{color:"rgb(189, 189, 189)",height:4,width:4}),variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",children:"(Admin) Copy Image Data From Query"})]})};var ez=t(46671),eV=t(17485),eW=t(23653),eN=t(15571);let eH=e=>{let{image:n,selectedImageVariation:t}=(0,Y.g)(),i=(0,eW.C)(null==n?void 0:n.generated_image_variation_generics,t),o=(0,eN.$)(e);return{...i,afford:o,image:n}};var eZ=t(53956),e$=t(85756),eY=t(14192);let eq="Remove background",eK=e=>{let{loading:n,onClick:t}=e,{isDisabledNobg:o,afford:l}=eH(e$.VP.NOBG),a=o||!l||n;return(0,i.jsx)(eZ.M,{variation:ez.VARIATION_TYPE.NOBG,placement:"auto",prependLabel:"".concat(eY.CM," - "),children:(0,i.jsx)(S.Button,{px:2,variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},leftIcon:(0,i.jsx)(eV.L82,{style:{color:"white"}}),fontWeight:300,isDisabled:a,isLoading:n,loadingText:eq,onClick:t,children:eq})})},eX="Unzoom image",eJ=e=>{var n;let{loading:t,onClick:o}=e,{isDisabledUnzoom:l,afford:a,image:r}=eH(e$.VP.UNZOOM),s=l||!a||t;return(0,G.kt)(null==r?void 0:null===(n=r.generation)||void 0===n?void 0:n.sdVersion)?null:(0,i.jsx)(eZ.M,{prependLabel:"".concat(eY.W," - "),placement:"auto",variation:ez.VARIATION_TYPE.UNZOOM,children:(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},fontWeight:300,leftIcon:(0,i.jsx)(eB.lsh,{style:{color:"white"}}),isDisabled:s,isLoading:t,loadingText:eX,onClick:o,children:eX})})};var eQ=t(76849);let e0=e=>(0,i.jsx)("svg",{width:"calc(".concat(L.fb," * 1.5)"),height:"calc(".concat(L.fb," * 1.4375)"),viewBox:"0 0 24 23",...e,children:(0,i.jsx)("path",{d:"M12 15V13M12 15C10.3431 15 9 16.3431 9 18M12 15C13.6569 15 15 16.3431 15 18M14.121 15.879L15.536 14.464M15 18C15 19.6569 13.6569 21 12 21M15 18H17M12 21C10.3431 21 9 19.6569 9 18M12 21V23M9 18H7M14.121 20.121L15.536 21.536M9.879 20.121L8.464 21.536M9.879 15.879L8.464 14.464M12 9V5M12 5C13.1046 5 14 4.10457 14 3C14 1.89543 13.1046 1 12 1C10.8954 1 10 1.89543 10 3C10 4.10457 10.8954 5 12 5ZM3 5C4.10457 5 5 4.10457 5 3C5 1.89543 4.10457 1 3 1C1.89543 1 1 1.89543 1 3C1 4.10457 1.89543 5 3 5ZM3 5V9L5.564 11.564M21 5C22.1046 5 23 4.10457 23 3C23 1.89543 22.1046 1 21 1C19.8954 1 19 1.89543 19 3C19 4.10457 19.8954 5 21 5ZM21 5V9L18.436 11.564"})}),e1=e=>{var n;let{loading:t,onClick:o,isSdV3:l}=e,{tooltip:a,label:r,isDisabled:s}=(0,eQ.T)(l),{isDisabledUpscaleAlternate:d,afford:c,image:u}=eH(e$.VP.UPSCALE),g=a||er.Tooltip,m=a===eZ.M?{prependLabel:eY.Km}:{label:r};return(null==u?void 0:null===(n=u.generation)||void 0===n?void 0:n.alchemy)?null:(0,i.jsx)(g,{...m,variation:ez.VARIATION_TYPE.UPSCALE,placement:"auto",children:(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},fontWeight:300,leftIcon:(0,i.jsx)(e0,{width:"calc(".concat(L.fb," * 0.875)"),fill:"white"}),isDisabled:d||!c||s,isLoading:t,loadingText:r,onClick:o,children:"Alternate Upscale"})})};var e2=t(3038),e5=t(97742);let e3=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Box,{display:{xs:"block",md:"none"},children:"Upscale"}),(0,i.jsx)(p.Box,{display:{xs:"none",md:"block"},children:"Creative Upscale"})]}),e7=e=>{let{loading:n,onClick:t,isSdV3:o}=e,{tooltip:l,label:a,isDisabled:r}=(0,e5.A)(o),{isDisabledUpscaleDefault:s,afford:d}=eH(e$.VP.UPSCALE),c=l||er.Tooltip,u=l===eZ.M?{prependLabel:"Upscales and creatively improves images during the upscaling process - "}:{label:a};return(0,i.jsx)(c,{...u,variation:ez.VARIATION_TYPE.UPSCALE,children:(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},fontWeight:300,leftIcon:(0,i.jsx)(e2.A,{width:"calc(".concat(L.fb," * 0.875)"),fill:"white"}),isDisabled:s||!d||r,isLoading:n,loadingText:(0,i.jsx)(e3,{}),onClick:t,children:(0,i.jsx)(e3,{})})})};var e6=t(75264);let e8=e=>(0,i.jsxs)("svg",{width:"calc(".concat(L.fb," * 1.6250)"),height:"calc(".concat(L.fb," * 1.5)"),viewBox:"0 0 26 24",fill:"none",...e,children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3373 5.38056L16.0708 3.06152L16.8105 2.30469L19.077 4.62373L18.3373 5.38056ZM10.7085 8.54825L12.9749 10.8673L12.2353 11.6241L9.96878 9.30509L10.7085 8.54825ZM5.95886 17.6893L3.69238 15.3703L4.43206 14.6134L6.69854 16.9325L5.95886 17.6893Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8467 0.107174C15.0861 0.284694 15.1346 0.620479 14.955 0.857172C14.4198 1.56283 14.3481 2.7015 14.5452 4.19112C14.6412 4.91627 14.7941 5.68396 14.9571 6.47068C14.9792 6.57701 15.0014 6.68375 15.0237 6.79075C15.1649 7.46887 15.3084 8.15763 15.4175 8.82009C15.5439 9.58696 15.6289 10.3435 15.6099 11.0395C15.591 11.7334 15.4681 12.4042 15.1477 12.9749C14.4656 14.1896 13.0603 14.6935 10.8522 14.4613C10.5547 14.43 10.3391 14.1661 10.3708 13.8719C10.4024 13.5777 10.6693 13.3646 10.9669 13.3958C13.0029 13.61 13.8326 13.1095 14.2003 12.4548C14.4047 12.0908 14.5104 11.6106 14.5267 11.0106C14.543 10.4127 14.47 9.73223 14.348 8.99242C14.2428 8.35373 14.1044 7.68932 13.9629 7.00943C13.9405 6.90191 13.918 6.79399 13.8956 6.68573C13.7327 5.89949 13.5723 5.09771 13.4708 4.33012C13.2728 2.83426 13.2689 1.29436 14.0881 0.214317C14.2677 -0.0223761 14.6073 -0.0703455 14.8467 0.107174ZM8.65855 15.8435C8.85042 17.272 8.86697 18.7451 8.09503 19.7819C7.91763 20.0201 7.57847 20.0711 7.33749 19.8957C7.09652 19.7203 7.04499 19.3849 7.2224 19.1466C7.71461 18.4856 7.77628 17.4134 7.58437 15.9845C7.4911 15.2902 7.34504 14.5533 7.19092 13.7928C7.17955 13.7367 7.16815 13.6805 7.15672 13.6242C7.01437 12.9229 6.86845 12.2041 6.76179 11.5081C6.53612 10.0357 6.45648 8.51216 7.07931 7.35989C7.74504 6.12827 9.09999 5.491 11.2828 5.53865C11.582 5.54518 11.8191 5.79026 11.8125 6.08606C11.8059 6.38185 11.5581 6.61635 11.2589 6.60981C9.28784 6.56678 8.43036 7.13347 8.035 7.86491C7.59675 8.67569 7.60737 9.87432 7.83317 11.3476C7.93577 12.017 8.07672 12.7116 8.2202 13.4186C8.23126 13.4731 8.24233 13.5276 8.25341 13.5823C8.40686 14.3395 8.55992 15.1092 8.65855 15.8435ZM21.2273 6.05126C21.438 6.26129 21.4367 6.60048 21.2243 6.80887L21.2238 6.80936C21.0223 7.00699 20.6843 7.33856 20.0106 7.5788C19.3541 7.81288 18.416 7.94838 17.014 7.85596C16.7154 7.83628 16.4895 7.58101 16.5094 7.2858C16.5293 6.99059 16.7875 6.76723 17.0861 6.78691C18.3931 6.87307 19.1707 6.73931 19.643 6.57091C20.0914 6.41099 20.2958 6.21042 20.4547 6.05449L20.4611 6.04829C20.6735 5.83991 21.0165 5.84124 21.2273 6.05126ZM2.92993 13.3609C2.45527 13.4511 2.00973 13.6645 1.54016 14.1288C1.32857 14.338 0.985514 14.338 0.773926 14.1288C0.562337 13.9196 0.562337 13.5804 0.773926 13.3712C1.38797 12.764 2.02604 12.4417 2.72529 12.3087C3.40263 12.1799 4.10832 12.2356 4.83628 12.3256C5.1332 12.3623 5.34382 12.63 5.3067 12.9236C5.26959 13.2172 4.9988 13.4254 4.70188 13.3887C3.98503 13.3001 3.4265 13.2665 2.92993 13.3609Z"})]}),e9=e=>{var n;let{loading:t,onClick:o}=e,{isDisabledUpscaleHd:l,afford:a,image:r}=eH(e$.VP.UPSCALE),s=l||!a||t,d=(0,e6.J1)(!!(null==r?void 0:null===(n=r.generation)||void 0===n?void 0:n.alchemy));return(0,i.jsx)(eZ.M,{variation:ez.VARIATION_TYPE.UPSCALE,prependLabel:"".concat(eY.vh," - "),placement:"auto",children:(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},fontWeight:300,leftIcon:(0,i.jsx)(e8,{width:"calc(".concat(L.fb," * 0.875)"),fill:"white"}),isDisabled:s,isLoading:t,loadingText:d,onClick:o,children:d})})},e4=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"calc(".concat(L.fb," * 2.0000)"),height:"calc(".concat(L.fb," * 2.0000)"),viewBox:"0 0 32 32",stroke:"currentColor",...e,children:(0,i.jsxs)("g",{strokeLinecap:"square",strokeLinejoin:"miter",strokeWidth:"1",transform:"translate(0.5 0.5)",fill:"none",strokeMiterlimit:"10",children:[(0,i.jsx)("line",{x1:"18.887",y1:"16",x2:"13.113",y2:"16","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("polyline",{points:"10.226 21 13.113 26 18.887 26 21.774 21","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("polyline",{points:"21.774 11 18.887 6 13.113 6 10.226 11","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"13.113",y1:"16",x2:"18.887",y2:"16","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"13.113",y1:"6",x2:"10.226",y2:"1","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"1.566",y1:"6",x2:"4.453",y2:"11","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"27.547",y1:"11",x2:"30.434",y2:"6","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"21.774",y1:"1",x2:"18.887",y2:"6","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"18.887",y1:"26",x2:"21.774",y2:"31","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"30.434",y1:"26",x2:"27.547",y2:"21","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"4.453",y1:"21",x2:"1.566",y2:"26","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("line",{x1:"10.226",y1:"31",x2:"13.113",y2:"26","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("polygon",{points:"21.774 21 27.547 21 30.434 16 27.547 11 21.774 11 18.887 16 21.774 21","data-cap":"butt",strokeLinecap:"butt"}),(0,i.jsx)("polygon",{points:"10.226 21 4.453 21 1.566 16 4.453 11 10.226 11 13.113 16 10.226 21","data-cap":"butt",strokeLinecap:"butt"})]})}),ne=e=>{var n;let{loading:t,onClick:o}=e,{isDisabledUpscaleSmooth:l,afford:a,image:r}=eH(e$.VP.UPSCALE),s=l||!a||t,d=(0,e6.HJ)(!!(null==r?void 0:null===(n=r.generation)||void 0===n?void 0:n.alchemy));return(0,i.jsx)(eZ.M,{variation:ez.VARIATION_TYPE.UPSCALE,prependLabel:"".concat(eY.ED," - "),placement:"auto",children:(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},fontWeight:300,leftIcon:(0,i.jsx)(e4,{width:"calc(".concat(L.fb," * 0.875)"),fill:"white"}),isDisabled:s,isLoading:t,loadingText:d,onClick:o,children:d})})};var nn=t(90339),nt=t(55903),ni=t(91719),no=t(59936),nl=t(48513),na=t(49993);let nr=()=>{let{isUltraGenerationModeEnabled:e}=(0,ek.D)(),{image:n,selectedImageVariation:t,selectedVariation:o,loading:l}=(0,Y.g)(),a=ep(n),r=(0,nl.A)(),{hasPermission:s}=(0,eh.S)(),d=!s("generation","delete"),c=(0,ni.D)(null==n?void 0:n.generation),u=(0,no.D)(null==n?void 0:n.generation),g=(0,G.CV)(null==n?void 0:n.generation.sdVersion),{alchemyRefinerLoading:m,handleDelete:x,handleRemoveBg:v,handleReport:b,handleUnzoom:f,handleUpscaleAlt:C,handleUpscaleDefault:j,handleUpscaleHd:I,handleUpscaleSmooth:w,openAlchemyRefinerModal:y,removeBgLoading:L,unzoomLoading:k,upscaleAltLoading:M,upscaleDefaultLoading:T,upscaleHdLoading:A,upscaleSmoothLoading:_}=(0,ej.L)(),D="Delete ".concat((null==o?void 0:o.label.replace(/image/i,""))||"original"," Image");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(J.A,{placement:"bottom-end",menuButtons:(0,i.jsxs)(h.Flex,{flexDirection:"column",children:[(0,i.jsx)(eK,{loading:L,onClick:v}),(0,i.jsx)(eJ,{loading:k,onClick:f}),!e&&(0,i.jsx)(eI.T,{variant:"small",isLoading:m,isDisabled:l,onClick:y}),u&&(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(e7,{loading:T,onClick:j,isSdV3:g}),(0,i.jsx)(e1,{loading:M,onClick:C,isSdV3:g}),!e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ne,{loading:_,onClick:w}),(0,i.jsx)(e9,{loading:A,onClick:I})]})]}),a&&(0,i.jsx)(er.Tooltip,{hasArrow:!0,closeOnClick:!1,isDisabled:!d,label:"Upgrade to Premium to delete images",shouldWrapChildren:!0,children:(0,i.jsxs)(h.Flex,{position:"relative",justifyContent:"stretch",children:[(0,i.jsxs)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},leftIcon:(0,i.jsx)(ed.Q_v,{style:{color:na.lm.ORANGE}}),onClick:x,isDisabled:d,color:na.lm.ORANGE,width:"100%",children:[D,(0,i.jsx)(p.Box,{display:d?"block":"none",width:8,height:4})]}),(0,i.jsx)(p.Box,{display:d?"block":"none",position:"absolute",top:3,right:3,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:3,px:.5,children:(0,i.jsx)(nn.A,{display:"flex",width:4,height:4,m:"0.05rem"})})]})}),(0,i.jsx)(eG,{url:null==t?void 0:t.url}),(0,i.jsx)(S.Button,{variant:"ModalPopoverMenu",fontSize:{base:"xs",md:"sm"},borderBottom:"none",onClick:b,leftIcon:(0,i.jsx)(ed.eHT,{}),color:na.lm.ORANGE,children:"Report image"}),r&&(0,i.jsx)(eO,{image:n})]}),children:e=>{let{isOpen:n}=e;return(0,i.jsx)(O.IconButton,{h:8,variant:"ModalImageButtonsStyles",minW:0,px:2.5,icon:(0,i.jsx)(nt.A,{color:"white"}),bg:n?"#393B45":"none","aria-label":"Share"})}})})};var ns=t(67028),nd=t(71757);let nc=e=>{let{onDelete:n}=e,{image:t}=(0,Y.g)(),o=(0,nd.hw)(t),l=(0,nd.F2)(t);return(0,i.jsxs)(p.Box,{children:[!o&&(0,i.jsxs)(F.HStack,{my:3,gap:2,children:[(0,i.jsx)(ns.j,{}),(0,i.jsx)(nr,{})]}),(0,i.jsxs)(h.Flex,{gap:2,justifyContent:"space-between",children:[o&&!l&&(0,i.jsx)(el,{}),l&&(0,i.jsx)(eb,{onDelete:n}),!o&&!l&&(0,i.jsx)(eD,{})]})]})};var nu=t(29826),ng=t(17368),nm=t(76765),np=t(67223),nh=t(37996),nx=t(48035);let nv=e=>{var n;let{image:t,loading:o}=e,l=(0,eE.G)(e=>e.user.showNsfw),a=(0,nx.Gi)({image:t,generation:null==t?void 0:t.generation,nsfwAllowed:l}),[r,s]=(0,u.useState)(a),{isOpen:d,onOpen:c,onClose:g}=(0,ea.useDisclosure)(),m=null==t?void 0:t.motionMp4Url,x=null!==(n=null==t?void 0:t.originalUrl)&&void 0!==n?n:null==t?void 0:t.conditionalUrl;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(nu.Card,{p:0,rounded:"lg",maxW:{base:"none",md:"lg"},bg:"#202020",_hover:{textDeclaration:"none"},onClick:c,cursor:"pointer",children:[!m&&(0,i.jsx)(h.Flex,{justifyContent:"center",alignItems:"center",sx:{aspectRatio:"1/1"},children:(0,i.jsx)(nm.a,{})}),m&&(0,i.jsxs)(p.Box,{rounded:"lg",overflow:"hidden",children:[(0,i.jsx)(nh.C,{fallbackText:t.prompt,videoUrl:m,poster:x}),r&&(0,i.jsx)(np.I,{imageLoaded:!o,withButtonAndText:!0,onClose:()=>{s(!1)}})]})]}),(0,i.jsx)(ng.A,{image:t,isOpen:d,onClose:()=>{g()}})]})};var nb=t(98021);let nf=e=>{let{image:n,fallbackImage:t,loading:o,loadingSelectedVariation:l,onOpen:a}=e,r=(0,eE.G)(e=>e.user.showNsfw),{setLoadingSelectedVariation:s,selectedImageVariation:d}=(0,Y.g)(),[c,g]=(0,u.useState)(!r),m=(null==n?void 0:n.url)?n:t;if(!m)return null;let x=(0,nx.Gi)({image:m,generation:null==m?void 0:m.generation,nsfwAllowed:r,overlayOpen:c}),v=m.generation.imageHeight,b=m.generation.imageWidth,C=v&&b,j=(null==d?void 0:d.url)||m.url,I=(0,G.vM)(m.generation);return(0,i.jsxs)(nu.Card,{p:0,rounded:"lg",maxW:{base:"none",md:"lg"},bg:"#202020",_hover:{textDeclaration:"none"},...!x&&{role:"button",cursor:"pointer",onClick:a},children:[!j&&(0,i.jsx)(h.Flex,{justifyContent:"center",alignItems:"center",sx:{aspectRatio:"1/1"},children:(0,i.jsx)(nm.a,{})}),j&&(0,i.jsxs)(p.Box,{rounded:"lg",overflow:"hidden",...I&&na.c8,children:[(0,i.jsx)(nb._,{src:"".concat(j+e$.xN),alt:m.generation.prompt||"",fill:!0,...C&&{height:v,width:b,fill:!1},onLoad:()=>s(!1),priority:!0},m.id),(0,i.jsx)(nb._,{src:j||"",alt:"",height:0,width:0}),x&&(0,i.jsx)(np.I,{imageLoaded:!o,withButtonAndText:!0,onClose:()=>{g(!1)}})]}),l&&(0,i.jsxs)(h.Flex,{position:"absolute",bottom:0,right:0,m:2,transition:"0.1s",backgroundColor:"rgba(25, 25, 25, 0.9)",rounded:"lg",py:2,px:3,zIndex:2,w:"fit-content",h:"fit-content",alignItems:"center",children:[(0,i.jsx)(f.Text,{mr:1,fontWeight:400,fontSize:"xs",children:"Loading..."}),(0,i.jsx)(U.Spinner,{size:"xs"})]})]})};var nC=t(11649),nj=t(23006),nI=t(25812),nw=t(71579);let ny=e=>{var n;return(null==e?void 0:null===(n=e.generation)||void 0===n?void 0:n.source)===nw.r2},nL=e=>(0,i.jsx)("svg",{width:"calc(".concat(L.fb," * 0.8750)"),height:"calc(".concat(L.fb," * 0.7500)"),viewBox:"0 0 14 12",fill:"currentColor",...e,children:(0,i.jsx)("path",{d:"M13.5391 7.53138C13.2916 7.38945 12.9791 7.4787 12.841 7.73376C12.7924 7.82299 12.7268 7.88551 12.6345 7.92837L8.12826 10.0784C7.57848 10.3412 6.92273 10.3412 6.37227 10.0784L1.8599 7.92556C1.77443 7.88621 1.70879 7.82368 1.66024 7.73444C1.52143 7.48009 1.20823 7.39086 0.962065 7.53209C0.715215 7.67472 0.627009 7.99582 0.765136 8.24947C0.921041 8.53544 1.15422 8.75538 1.43457 8.88467L5.94012 11.0347C6.35655 11.2336 6.80375 11.3333 7.25095 11.3333C7.69815 11.3333 8.14466 11.2336 8.5611 11.0347L13.0612 8.88748C13.347 8.75538 13.5808 8.53544 13.7367 8.24947C13.8742 7.99442 13.786 7.67331 13.5391 7.53138ZM0.583252 4.48196C0.583252 3.88542 0.910097 3.35987 1.43662 3.10903L5.94012 0.963881C6.7723 0.567596 7.72688 0.567596 8.55974 0.963881L13.0632 3.10903C13.5897 3.35987 13.9166 3.88612 13.9166 4.48196C13.9166 5.07779 13.5897 5.60407 13.0632 5.85491L8.55974 8.00005C8.14399 8.19819 7.69678 8.29725 7.24957 8.29725C6.80237 8.29725 6.35586 8.19819 5.93943 8.00005L1.43595 5.85491C0.910113 5.60407 0.583252 5.07849 0.583252 4.48196ZM1.60895 4.48196C1.60895 4.55081 1.62741 4.78408 1.8681 4.89931L6.37158 7.04446C6.93024 7.31076 7.57096 7.31005 8.12826 7.04446L12.6317 4.89931C12.8724 4.78479 12.8909 4.55081 12.8909 4.48196C12.8909 4.4131 12.8724 4.17983 12.6317 4.0646L8.12826 1.91945C7.84927 1.78665 7.54908 1.71991 7.24957 1.71991C6.95007 1.71991 6.65057 1.78665 6.37089 1.91945L1.86741 4.0646C1.6274 4.17983 1.60895 4.4131 1.60895 4.48196Z"})}),nk=e=>{let{onClick:n,imageLoading:t}=e;return(0,i.jsx)(er.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:"Use as an image guidance input",children:(0,i.jsx)(S.Button,{w:"full",fontSize:{base:"xs",md:"sm"},fontWeight:300,size:"sm",color:"white",leftIcon:(0,i.jsx)(nL,{}),variant:"black",bgColor:"rgba(23, 23, 23, 1)",py:2,px:1,isDisabled:t,iconSpacing:1.5,onClick:n,_hover:{bg:"linear-gradient(81.02deg, #FA5560 -23.47%, #B14BF4 45.52%, #4D91FF 114.8%)",color:"white"},_disabled:{opacity:"0.5",cursor:"not-allowed",_hover:{bg:"rgba(23, 23, 23, 1)"}},children:"Image2Image"})})};var nM=t(84536);let nS=e=>{let{isDisabled:n,label:t,onClick:o}=e;return(0,i.jsx)(er.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:t||"Generate video from this image",children:(0,i.jsx)(S.Button,{w:"full",fontSize:{base:"xs",md:"sm"},fontWeight:300,size:"sm",color:"white",leftIcon:(0,i.jsx)(nM.A,{}),variant:"black",bgColor:"rgba(23, 23, 23, 1)",py:2,px:1,isDisabled:n,iconSpacing:1.5,onClick:o,_hover:{bg:"linear-gradient(81.02deg, #FA5560 -23.47%, #B14BF4 45.52%, #4D91FF 114.8%)",color:"white"},_disabled:{opacity:"0.5",cursor:"not-allowed",_hover:{bg:"rgba(23, 23, 23, 1)"}},children:"Image2Motion"})})};var nT=t(6874),nA=t.n(nT),n_=t(51196);let nD=e=>(0,i.jsx)("svg",{width:"calc(".concat(L.fb," * 0.7500)"),height:"calc(".concat(L.fb," * 0.7500)"),viewBox:"0 0 12 12",fill:"currentColor",...e,children:(0,i.jsx)("path",{d:"M5.47059 0.443955C5.49265 0.377581 5.55882 0.333332 5.64706 0.333332C5.71324 0.333332 5.77941 0.377581 5.80147 0.443955L6.11029 1.28469L6.94853 1.59444C7.01471 1.61656 7.05882 1.68293 7.05882 1.74931C7.05882 1.83781 7.01471 1.90418 6.94853 1.9263L6.11029 2.23605L5.80147 3.05466C5.77941 3.12103 5.71324 3.16528 5.64706 3.16528C5.55882 3.16528 5.49265 3.12103 5.47059 3.05466L5.16176 2.23605L4.32353 1.9263C4.25735 1.90418 4.23529 1.83781 4.23529 1.74931C4.23529 1.68293 4.25735 1.61656 4.32353 1.59444L5.16176 1.28469L5.47059 0.443955ZM10.9191 0.665201L11.6691 1.41744C12.0882 1.83781 12.0882 2.50154 11.6691 2.92191L3.26471 11.3514C2.84559 11.7718 2.18382 11.7718 1.76471 11.3514L1.01471 10.5992C0.595588 10.1788 0.595588 9.51505 1.01471 9.09468L9.41912 0.665201C9.83824 0.244834 10.5 0.244834 10.9191 0.665201ZM10.1691 1.39531L7.74265 3.82902L8.51471 4.60338L10.9191 2.16968L10.1691 1.39531ZM2.51471 10.5992L7.76471 5.35562L6.99265 4.58126L1.76471 9.84692L2.51471 10.5992ZM0.154412 2.94404L1.41176 2.45729L1.875 1.21832C1.89706 1.10769 2.00735 1.04132 2.11765 1.04132C2.20588 1.04132 2.31618 1.10769 2.33824 1.21832L2.82353 2.45729L4.05882 2.94404C4.16912 2.96616 4.23529 3.07678 4.23529 3.16528C4.23529 3.27591 4.16912 3.38653 4.05882 3.40865L2.82353 3.87327L2.33824 5.13437C2.31618 5.22287 2.20588 5.28925 2.11765 5.28925C2.00735 5.28925 1.89706 5.22287 1.875 5.13437L1.41176 3.87327L0.154412 3.40865C0.0441176 3.38653 0 3.27591 0 3.16528C0 3.07678 0.0441176 2.96616 0.154412 2.94404ZM7.91912 8.60794L9.17647 8.1212L9.63971 6.88222C9.66177 6.7716 9.77206 6.70522 9.88235 6.70522C9.97059 6.70522 10.0809 6.7716 10.1029 6.88222L10.5882 8.1212L11.8235 8.60794C11.9338 8.63006 12 8.74069 12 8.82918C12 8.93981 11.9338 9.05043 11.8235 9.07255L10.5882 9.53717L10.1029 10.7983C10.0809 10.8868 9.97059 10.9531 9.88235 10.9531C9.77206 10.9531 9.66177 10.8868 9.63971 10.7983L9.17647 9.53717L7.91912 9.07255C7.80882 9.05043 7.76471 8.93981 7.76471 8.82918C7.76471 8.74069 7.80882 8.63006 7.91912 8.60794Z"})});var nP=t(19321);let nU=e=>{let{imageId:n,isPrivate:t,onClick:o,modelId:l}=e,a=(0,ek.D)(),r=(0,n_.T)()(l||""),s=(0,G.W0)(r.sdVersion,a),d=t||!s,c=d?"This generation cannot be remixed as you do not have access to some of the settings that were used to make it.":"Send this prompt and settings to the image generation tool.",u="".concat(nP.a.IMAGE_GENERATION,"?remix=").concat(n);return(0,i.jsx)(er.Tooltip,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:c,children:(0,i.jsx)(S.Button,{as:nA(),href:u,w:"full",size:"sm",leftIcon:(0,i.jsx)(nD,{}),color:"white",variant:"black",fontSize:{base:"xs",md:"sm"},fontWeight:300,bg:"rgba(23, 23, 23, 1)",py:2,px:1,iconSpacing:1.5,isDisabled:d,...d&&{as:"button",href:void 0},_hover:{bg:"linear-gradient(81.02deg, #FA5560 -23.47%, #B14BF4 45.52%, #4D91FF 114.8%)",color:"white"},_disabled:{opacity:"0.5",cursor:"not-allowed",_hover:{bg:"rgba(23, 23, 23, 1)"}},onClick:d?void 0:o,children:"Remix"})})};var nE=t(30284),nR=t(83597),nG=t(55343),nB=t(12142),nF=t(31698);let nO=e=>{var n;let{imageId:t,isPrivate:o,isMotion:l,isSvd:a,imageLoading:r,showActions:s=!0}=e,{image:d,onClose:c,selectedImageVariation:u}=(0,Y.g)();ny(d);let g=(null==d?void 0:d.prompt)||"Unknown prompt",v=null==d?void 0:d.negativePrompt,b=null==d?void 0:d.generation.imageHeight,C=null==d?void 0:d.generation.imageWidth,j=s&&!l,I=(null==d?void 0:d.generated_image_variation_generics)&&d.generated_image_variation_generics.length>0&&(null==u?void 0:u.transformType)===ez.VARIATION_TYPE.NOBG,w={imageInputs:[{type:nF.w.Img2Img,initImageId:t,initImageType:R.AbP.Generated,weighting:(0,nE.WO)({imageInputType:nF.w.Img2Img}).default,dimensions:{width:null!=C?C:0,height:null!=b?b:0},isEnabled:!0}]},{handleImageGenV2Img2ImgLink:y}=(0,A.q)({generationProps:{prompt:g,height:b,width:C,...w,imageToImageStrategy:nB.rh.IMG_2_IMG},imageToImage:!0}),{isOpen:L,onOpen:k,onClose:M}=(0,ea.useDisclosure)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Divider,{display:{base:"block",md:"none"},my:4,borderColor:"border.grey"}),(0,i.jsxs)(h.Flex,{justifyContent:"flex-start",w:"100%",alignItems:"center",mb:1.5,children:[(0,i.jsx)(nC.Heading,{size:"sm",mr:3,fontWeight:500,children:"Prompt details"}),(0,i.jsx)(nG.i,{textToCopy:g,isDisabled:r,tooltipLabel:"Copy prompt to clipboard"})]}),(0,i.jsxs)(p.Box,{display:l?"flex":"block",gap:2,mt:2,p:2,bgColor:"rgba(32, 32, 32, 1)",borderRadius:8,children:[(0,i.jsx)(p.Box,{p:2.5,fontSize:14,bgColor:"rgba(23, 23, 23, 1)",borderRadius:6,mb:3*!!j,w:"full",children:(0,i.jsx)(nj.SkeletonText,{isLoaded:!r,noOfLines:1,skeletonHeight:4,startColor:"#202020",endColor:"#171717",children:(0,i.jsx)(f.Text,{fontWeight:"300",wordBreak:"break-word",lineHeight:1,minH:4,children:g})})}),j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Grid,{templateRows:{base:"repeat(1, 1fr)",md:"repeat(1, 1fr)"},templateColumns:{base:"repeat(3, 1fr)",md:"repeat(3, 1fr)"},gap:2,children:[(0,i.jsx)(nI.GridItem,{children:(0,i.jsx)(nS,{isDisabled:I||r,label:I?"Motion currently available for images with backgrounds.":void 0,onClick:()=>{k()}})}),(0,i.jsx)(nI.GridItem,{children:(0,i.jsx)(nk,{onClick:()=>{null==c||c(),y(t)},imageLoading:r})}),(0,i.jsx)(nI.GridItem,{colSpan:{base:2,md:1},children:(0,i.jsx)(nU,{imageId:t,isPrivate:o,modelId:null==d?void 0:null===(n=d.custom_model)||void 0===n?void 0:n.id,onClick:c})})]}),(0,i.jsx)(nR.U,{image:d,imageVariation:u,inputIsPrivate:o,isOpen:L,onClose:M})]})]}),l&&!a&&(0,i.jsx)(h.Flex,{mt:2,gap:2,children:(0,i.jsx)(nU,{imageId:t,isPrivate:o,onClick:c})}),!!v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.Flex,{mt:4,justifyContent:"flex-start",w:"100%",alignItems:"center",children:[(0,i.jsx)(nC.Heading,{size:"sm",display:"inline-block",mr:3,fontWeight:500,children:"Negative Prompt"}),(0,i.jsx)(nG.i,{textToCopy:v,isDisabled:r,tooltipLabel:"Copy prompt to clipboard"})]}),(0,i.jsx)(p.Box,{display:l?"flex":"block",gap:2,mt:2,p:2,bgColor:"rgba(32, 32, 32, 1)",borderRadius:8,children:(0,i.jsx)(p.Box,{p:2.5,fontSize:14,bgColor:"rgba(23, 23, 23, 1)",borderRadius:6,w:"full",children:(0,i.jsx)(f.Text,{fontWeight:300,lineHeight:1.2,wordBreak:"break-word",children:v})})})]})]})},nz=e=>{let{spec:n,value:t,imageLoading:o,isEven:l,LeftIcon:a,RightIcon:r}=e;return(0,i.jsxs)(p.Box,{w:"48%",mb:3,pr:2*!!l,children:[(0,i.jsx)(p.Box,{fontSize:"calc(".concat(L.fb," * 0.75)"),color:"secondary.inactive",lineHeight:1.2,children:n}),(0,i.jsx)(nj.SkeletonText,{isLoaded:!o,noOfLines:1,skeletonHeight:5,startColor:"#202020",endColor:"#171717",w:"100%",my:.5*!!o,children:(0,i.jsx)(h.Flex,{fontSize:"calc(".concat(L.fb," * 0.875)"),display:"flex",alignItems:"center",gap:1,children:(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a,{height:20,width:20})}),t,r&&(0,i.jsx)(p.Box,{ml:1,children:(0,i.jsx)(r,{height:20,width:20})})]})})})]})};var nV=t(66415);let nW=e=>{let{prompt:n,loading:t}=e;return(0,i.jsx)(nj.SkeletonText,{isLoaded:!t,noOfLines:1,skeletonHeight:6,startColor:"#202020",endColor:"#171717",mr:{base:8,md:0},children:(0,i.jsx)(nC.Heading,{fontWeight:500,wordBreak:"break-word",minH:6,mr:{base:8,md:0},isTruncated:!0,children:(0,nV.jV)(n)})})};var nN=t(30855),nH=t(69642),nZ=t(74907);let n$={base:"xs",md:"sm"};L.fb,L.fb,L.fb,L.fb,L.fb,L.fb,L.fb,L.fb,L.fb,L.fb;let nY=e=>{let{userId:n,username:t,loading:o}=e,{userSelectedTeam:l}=(0,ei.s)(),a=l();return(0,i.jsxs)(h.Flex,{gap:4,children:[(0,i.jsxs)(h.Flex,{gap:1,pr:4,align:"center",...t&&{as:nA(),href:"/profile/".concat(t)},children:[(0,i.jsx)(nN.SkeletonCircle,{isLoaded:!o,startColor:"#202020",endColor:"#171717",size:"auto",children:(0,i.jsx)(nH.Avatar,{w:7,h:7,borderRadius:"full",bgColor:"#7258F2",mr:1,overflow:"hidden",name:t||"?"})}),(0,i.jsx)(nj.SkeletonText,{isLoaded:!o,noOfLines:1,skeletonHeight:4,minW:o?"calc(".concat(L.fb," * 6.25)"):"auto",startColor:"#202020",endColor:"#171717",children:(0,i.jsx)(f.Text,{fontSize:n$,color:"rgba(189, 189, 189, 1)",textAlign:"left",lineHeight:1,children:t})})]}),n&&!a.id&&(0,i.jsx)(nZ.A,{followThisUserId:n})]})};var nq=t(80891),nK=t(1936);let nX=[],nJ=["Created","Resolution"],nQ=e=>{var n,t,o,l,a,r,s,d,c,u;let{imageId:g,fallbackImage:b,onUpdateCoverImageCompleted:f,onDelete:C}=e,j=(0,ek.D)(),I=(0,eg.w)(),{isUserFreePlan:w}=(0,nq.usePlan)(),{image:y,loading:L,selectedImageVariation:k,loadingSelectedVariation:M,setZoomedOpen:S,onClose:T}=(0,Y.g)(),A=(0,nK.p)(y),_=null==y?void 0:y.generation.id,D=null==y?void 0:y.userId,P=null==y?void 0:null===(n=y.custom_model)||void 0===n?void 0:n.userId,{id:U}=(null==y?void 0:y.custom_model)||{},E=(0,nd.hw)(y),R=(0,nd.F2)(y),F=(0,nd.ws)(y),O=(0,nd.DD)(y),z=!(0,G.CV)(null==y?void 0:null===(t=y.generation)||void 0===t?void 0:t.sdVersion)||(0,G.CV)(null==y?void 0:null===(o=y.generation)||void 0===o?void 0:o.sdVersion)&&j.isSdV3Enabled&&!w,V=!U&&!!(null==y?void 0:null===(l=y.generation)||void 0===l?void 0:l.modelId)||!_,W=!!(null==y?void 0:null===(a=y.generation)||void 0===a?void 0:a.custom_model),N=null==y?void 0:y.generation.photoReal,H=null==y?void 0:y.generation.sdVersion,Z=ny(y),$=!!H&&!(0,G.W0)(H,j),q=(null!==(d=null==y?void 0:null===(r=y.generation)||void 0===r?void 0:r.generation_elements)&&void 0!==d?d:[]).filter(e=>!!e.lora).map(e=>({akUUID:e.lora.akUUID,name:e.lora.name,weight:e.weightApplied,urlImage:e.lora.urlImage})),K=(null!==(c=null==y?void 0:null===(s=y.generation)||void 0===s?void 0:s.generation_elements)&&void 0!==c?c:[]).filter(e=>!!e.user_lora).map(e=>{var n,t;return{id:e.user_lora.id,name:e.user_lora.name,urlImage:null===(t=e.user_lora.dataset)||void 0===t?void 0:null===(n=t.dataset_images[0])||void 0===n?void 0:n.url,weight:e.weightApplied}}),X=R?null==y?void 0:y.specs.filter(e=>nJ.includes(e.spec)):F?null==y?void 0:y.specs.filter(e=>nX.includes(e.spec)):null==y?void 0:y.specs;F&&(null==X||X.push({spec:"Base Model",value:O}));let J=(e,n,t,i)=>"Preset"===e&&t?"Flow State":"Resolution"===e&&i?i:n,Q=(0,e6.c0)(k,X);return(0,i.jsxs)(m.Grid,{gridTemplateColumns:{base:"minmax(0, 1fr)",md:"repeat(2, minmax(0, 1fr))"},columnGap:{md:5},children:[(0,i.jsxs)(p.Box,{children:[(0,i.jsxs)(h.Flex,{display:{base:"flex",md:"none"},direction:"column",gap:2,children:[(0,i.jsx)(nW,{loading:L,prompt:null==y?void 0:y.prompt}),(0,i.jsx)(nY,{loading:L,userId:null==y?void 0:y.userId,username:null==y?void 0:y.username}),(0,i.jsx)(x.Divider,{mt:1,mb:4,borderColor:"border.grey"})]}),F?(0,i.jsx)(nv,{image:y,loading:L},g):(0,i.jsx)(nf,{image:A,fallbackImage:b,loadingSelectedVariation:M,onOpen:()=>y&&S(!0),loading:L},g),(0,i.jsx)(v.Skeleton,{isLoaded:!L,startColor:"#202020",endColor:"#171717",rounded:"lg",w:"100%",my:3,h:L?"1.875rem":"auto"}),(0,i.jsx)(nc,{onDelete:()=>{null==T||T(),null==C||C()}})]}),(0,i.jsxs)(p.Box,{children:[(0,i.jsxs)(h.Flex,{direction:"column",gap:2,display:{base:"none",md:"flex"},children:[(0,i.jsx)(nY,{loading:L,userId:null==y?void 0:y.userId,username:null!==(u=null==y?void 0:y.username)&&void 0!==u?u:""}),(0,i.jsx)(nW,{loading:L,prompt:null==y?void 0:y.prompt}),(0,i.jsx)(x.Divider,{mb:3,borderColor:"border.grey"})]}),(0,i.jsx)(nO,{imageId:g,isMotion:E,isSvd:R,isPrivate:V&&!N,imageLoading:L,showActions:!R}),(0,i.jsx)(x.Divider,{my:5,borderColor:"border.grey"}),(0,i.jsx)(h.Flex,{wrap:"wrap",gap:2,children:null==X?void 0:X.map((e,n)=>{let{spec:t,value:o,LeftIcon:l,RightIcon:a}=e;return(0,i.jsx)(nz,{spec:t,value:J(t,o,Z,Q),imageLoading:L,isEven:n%2==0,LeftIcon:l,RightIcon:a},n)})}),(0,i.jsx)(v.Skeleton,{startColor:"#202020",endColor:"#171717",rounded:"lg",isLoaded:!L,w:"100%",h:L?20:"auto",children:W&&(0,i.jsx)(B,{elements:q,userElements:K,isPrivate:V,customModel:null==y?void 0:y.custom_model,modelCreatedByUserId:P,generatedByUserId:D,currentUserId:I,imageId:null==y?void 0:y.id,onUpdateCoverImageCompleted:f,onClose:T,controlnets:null==y?void 0:y.generation.generation_controlnets,imagePromptStrength:null==y?void 0:y.generation.imagePromptStrength,initStrength:(null==y?void 0:y.generation.imageToImage)?null==y?void 0:y.generation.initStrength:void 0,showGenerateWithModel:!R&&z,disableGenerateWithModel:$,sdVersion:null==y?void 0:y.generation.sdVersion})})]})]})};var n0=t(89646),n1=t(70024),n2=t(54092);let n5=e=>{let{images:n,onClick:t}=e;return(0,i.jsx)(m.Grid,{templateColumns:{base:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:4,children:n.map(e=>(0,i.jsx)(nI.GridItem,{children:(0,i.jsx)(n0.AspectRatio,{ratio:1,borderRadius:"lg",overflow:"hidden",children:(0,i.jsxs)(p.Box,{position:"relative",as:"button",onClick:()=>t(e),children:[(0,i.jsx)(n1.Image,{src:"".concat(e.url+e$.xN),alt:"Image"}),e.generation.motion&&(0,i.jsx)(n2.A,{position:"absolute",right:3,bottom:3,width:10,height:10,zIndex:2})]})})},e.id))})},n3=(e,n)=>{let{data:t,loading:i}=(0,o.I)(R.I3Q,{skip:!e,variables:{limit:12,order_by:[{likeCount:R.V47.Desc},{createdAt:R.V47.Desc}],where:{public:{_eq:!0},generation:{modelId:{_eq:e},status:{_eq:"COMPLETE"},...n&&{motion:{_eq:!0}},...e$.am},...e$.e1}}});return{modelId:e,images:(null==t?void 0:t.generated_images.map(e=>{var n;let t=null===(n=(0,e6.c2)(e.generated_image_variation_generics))||void 0===n?void 0:n.url,i=(0,nK.p)(e);return i&&t&&(i.url=t),i}).filter(e=>null!==e))||[],loading:i}};var n7=t(54836);let n6=e=>{let{modelId:n,isMotion:t,onImageClick:o}=e,{images:l,loading:a}=n3(n,t);return(0,i.jsx)(p.Box,{w:"full",children:n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Divider,{borderColor:"border.grey",mt:3}),(0,i.jsxs)(h.Flex,{justify:"space-between",w:"full",align:"center",my:{base:4,md:6},children:[(0,i.jsxs)(nC.Heading,{mr:3.5,fontWeight:{base:400,md:500},fontSize:{base:"calc(".concat(L.fb," * 0.875)"),md:"calc(".concat(L.fb," * 1.125)")},children:["Related ",t?"Videos":"Images"]}),(0,i.jsx)(n7.L,{modelId:n})]}),a&&(0,i.jsx)(m.Grid,{gridTemplateColumns:{base:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:4,children:[...Array(12)].map((e,n)=>(0,i.jsx)(v.Skeleton,{height:197,rounded:8,startColor:"#202020",endColor:"#171717"},n))}),!a&&(0,i.jsx)(n5,{images:l,onClick:o})]})})};var n8=t(20151),n9=t(90898);let n4=e=>{var n;let{onDelete:t}=e,{image:o,zoomedOpen:l,setSelectedVariationId:m,setZoomedOpen:p}=(0,Y.g)(),h=(0,nK.p)(o),[x,v]=(0,u.useState)(),b=(0,u.useRef)(null),{modalNavigator:f,setDisableArrowKeys:C}=(0,n8.cr)({onNavigate:()=>{v(void 0),m(void 0)}});(0,n8.t)(n4.name);let{mainItem:j,mainItemId:I,setRelatedItemId:w,relatedItemId:y}=f,L=y||I,k=(0,nd.hw)(null!==(n=null==h?void 0:h.generation)&&void 0!==n?n:null),M=y&&y===(null==x?void 0:x.id)?x:void 0,S=(null==h?void 0:h.generation.modelId)||"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.ModalOverlay,{}),(0,i.jsxs)(r.ModalContent,{ref:b,children:[(0,i.jsx)(s.ModalCloseButton,{}),(0,i.jsx)(n9.X,{}),(0,i.jsx)(d.ModalBody,{children:(0,i.jsxs)(c.VStack,{children:[(0,i.jsx)(nQ,{imageId:L,fallbackImage:M||j,onDelete:t},L),(0,i.jsx)(n6,{isMotion:k,modelId:S,onImageClick:e=>{var n,t;m(void 0),v(e),w(e.id),null===(t=b.current)||void 0===t||null===(n=t.parentElement)||void 0===n||n.scrollTo({top:0,behavior:"smooth"})}})]})}),(0,i.jsx)(g.S,{isOpen:l,onClose:()=>{C(!1),p(!1)},modalNavigator:f,setDisableArrowKeys:C})]})]})};var te=t(22613),tn=t(61364),tt=t(92167);let ti=e=>{let{modalNavigator:n,isOpen:t,onClose:a,onDelete:r}=e,{mainItemId:s,relatedItemId:d}=n,c=n.mainItem,{platformPresets:u,allPresetPreferredStyles:g}=(0,tn.c)(),{data:m}=(0,o.I)(R.WCg,{skip:!g.length,variables:{where:{akUUID:{_in:g},isPublic:{_eq:!0},aesthetics:{_eq:"style"}}}}),p=(null==m?void 0:m.style)||[];return(0,i.jsx)(te.T,{presets:u,children:(0,i.jsx)(tt.u,{styles:p,children:(0,i.jsx)(l.Modal,{variant:"imageDetailModal",isOpen:t,onClose:a,autoFocus:!1,closeOnOverlayClick:!0,children:(0,i.jsx)(n8.K4,{modalNavigator:n,children:(0,i.jsx)(Y.z,{imageId:d||s,onClose:a,onDelete:r,fallbackImage:c,children:(0,i.jsx)(ej.S,{children:(0,i.jsx)(n4,{onDelete:r})})})})})})})}},66262:(e,n,t)=>{t.d(n,{K:()=>o});var i=t(31481);let o=e=>{let{width:n,height:t,isHighResolution:o,isUsingAlchemyV2:l,isUsingPhotoRealV2:a}=e,r=i.ALCHEMY_RESOLUTION_MULTIPLIER;return o&&(r=i.ALCHEMY_RESOLUTION_MULTIPLIER_HIGH_RESOLUTION),(l||a)&&(r=i.ALCHEMY_RESOLUTION_MULTIPLIER_V2),{finalResolutionWidth:r*n,finalResolutionHeight:r*t}}},67215:(e,n,t)=>{t.d(n,{ImageGenerationGuidanceDataProvider:()=>j,useImageGenerationGuidanceDataContext:()=>I});var i=t(95155),o=t(12115),l=t(69507),a=t(33383),r=t(42380),s=t(1107),d=t(48831),c=t(31698),u=t(35936);let g=e=>(0,u.kt)(e),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>e.preprocessors.find(e=>g(e.preprocessorBaseModel))).map(e=>e.preprocessors.filter(e=>g(e.preprocessorBaseModel)).map(n=>({...n,...e}))).flat()},p=e=>{let n=["StyleTransfer","ContentTransfer","FaceTransfer"];return e.sort((e,t)=>{let i=n.includes(e.controlnetType),o=n.includes(t.controlnetType);return i&&o?n.indexOf(e.controlnetType)-n.indexOf(t.controlnetType):i?-1:o?1:e.name.localeCompare(t.name)})},h=e=>p(m(function(e){if(!(null==e?void 0:e.controlnet_definition))return[];let n=e.controlnet_definition.filter(e=>!!(null==e?void 0:e.controlnetType)),t=Object.entries(n.reduce((e,n)=>{let t=n.controlnetType;return(e[t]=e[t]||[]).push(n),e},{})).reduce((e,n)=>{let[t,i]=n;return e[t]=i.map(e=>e.preprocessors).filter(Boolean).flat(),e},{});return[...Array.from(new Map(n.reverse().map(e=>[e.controlnetType,e])).values())].map(e=>{var n,i,o,l,a,r,s,u;return{akUUID:e.akUUID,type:c.w.ControlNet,controlnetType:e.controlnetType,displayDescription:null!==(n=e.displayDescription)&&void 0!==n?n:void 0,weightMin:null!==(i=e.weightMin)&&void 0!==i?i:void 0,weightMax:null!==(o=e.weightMax)&&void 0!==o?o:void 0,weightDefault:null!==(l=e.weightDefault)&&void 0!==l?l:void 0,tokenCost:null!==(a=e.tokenCost)&&void 0!==a?a:void 0,thumbnailURL:null!==(r=e.thumbnailURL)&&void 0!==r?r:void 0,thumbnailResultURL:null!==(s=e.thumbnailResultURL)&&void 0!==s?s:void 0,preprocessorBaseModel:null!==(u=e.baseModel)&&void 0!==u?u:void 0,preprocessors:(t[e.controlnetType]||[]).map(n=>{var t,i;return{id:n.id,name:"".concat(e.displayName||e.controlnetType),availableToPlan:null!==(t=n.availableToPlan)&&void 0!==t?t:void 0,preprocessorBaseModel:n.preprocessorBaseModel,preprocessorName:null!==(i=n.preprocessorName)&&void 0!==i?i:void 0}}),isDisabled:!1,isIncompatible:!1,disabledReason:"",limit:(0,d.nD)(e.controlnetType,e.baseModel)}})}(e)));var x=t(958),v=t(83833),b=t(52592);let f=()=>{var e;let n=(0,v.D)(),{modelVersion:t}=(0,r.R)(),i=null!==(e=(0,s.a)(e=>e.context.imageGuidanceInputs))&&void 0!==e?e:[],d=(0,u.L7)(t),g=(0,u.vT)(t),{data:m,loading:p,error:f}=(0,l.I)(x.kvz),C=(0,o.useMemo)(()=>h(m),[m]),j=[a.bG,...C].map(e=>{let o=(0,u.Kw)(e,t,i,n);return{...e,isDisabled:!o.value,isIncompatible:!o.value,disabledReason:o.reason}}),I={all:j,shortcuts:(()=>{let e=j.find(e=>e.controlnetType===b.bd.FaceTransfer),n=j.find(e=>e.controlnetType===b.bd.ContentTransfer),t=j.find(e=>e.controlnetType===b.bd.StyleTransfer),i=j.find(e=>e.akUUID===c.w.Img2Img);return d||g?[t,i,n].filter(Boolean):[t,e,n].filter(Boolean)})()};return{allGuidanceTypes:j,categorizedGuidanceTypes:I,loading:p,error:f}},C=(0,o.createContext)({allGuidanceTypes:[],categorizedGuidanceTypes:null,loading:!1,error:void 0}),j=e=>{let{children:n}=e,{allGuidanceTypes:t,categorizedGuidanceTypes:l,loading:a,error:r}=f(),s=(0,o.useMemo)(()=>({allGuidanceTypes:t,categorizedGuidanceTypes:l,loading:a,error:r}),[t,l,a,r]);return(0,i.jsx)(C.Provider,{value:s,children:n})},I=()=>(0,o.useContext)(C)},67223:(e,n,t)=>{t.d(n,{I:()=>g});var i=t(95155),o=t(77700),l=t(59108),a=t(60078),r=t(58670),s=t(85821),d=t(3740);t(12115);let c=e=>(0,i.jsx)(d.Icon,{width:6,height:6,viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.jsx)("path",{d:"M12.0181 2C9.77807 3.111 8 4 3 5C3 6.137 3 9.70192 3 10.8889C3 17.5559 8.667 20.889 12 22C15.333 20.889 21 17.5559 21 10.8889C21 9.66392 21 6.194 21 5C16 4 14.2221 3.111 12.0181 2ZM11.25 8.5C11.25 8.086 11.586 7.75 12 7.75C12.414 7.75 12.75 8.086 12.75 8.5V11.5C12.75 11.914 12.414 12.25 12 12.25C11.586 12.25 11.25 11.914 11.25 11.5V8.5ZM12.02 15.5C11.468 15.5 11.0149 15.052 11.0149 14.5C11.0149 13.948 11.458 13.5 12.01 13.5H12.02C12.573 13.5 13.02 13.948 13.02 14.5C13.02 15.052 12.572 15.5 12.02 15.5Z"})});var u=t(75591);let g=e=>{let{imageLoaded:n,onClose:t,withButtonAndText:d}=e;return(0,i.jsx)(o.Box,{role:"presentation",rounded:"lg",position:"absolute",zIndex:2,bottom:0,left:0,height:"100%",width:"100%",background:"rgba(0, 0, 0, 0.17)",backdropFilter:"blur(1.5rem)",onClick:d?void 0:e=>{e.stopPropagation(),t()},children:(0,i.jsx)(l.Flex,{height:"100%",width:"100%",padding:6,direction:"column",justifyContent:d?"flex-end ":"center",position:"absolute",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.00) 6.19%, rgba(0, 0, 0, 0.89) 59.62%)",children:n?(0,i.jsxs)(a.Stack,{direction:"column",gap:2,transition:".5s",children:[(0,i.jsxs)(a.Stack,{direction:"column",alignItems:"center",children:[(0,i.jsxs)(l.Flex,{justifyContent:"center",alignItems:"center",gap:1,children:[(0,i.jsx)(c,{fill:"secondary.inactive"}),(0,i.jsx)(r.Text,{textAlign:"center",fontSize:"md",fontWeight:500,children:"This image might be explicit"})]}),d&&(0,i.jsx)(r.Text,{color:"secondary.inactive",textAlign:"center",fontSize:"sm",fontWeight:"normal",lineHeight:5,children:"This image may contain explicit content. To view the image click on the button below. You can disable this message in user settings."})]}),d&&(0,i.jsx)(s.Button,{mt:2,variant:"glow",onClick:t,fontWeight:"medium",fontSize:"md",leftIcon:(0,i.jsx)(u.A,{fill:"white"}),children:"Click to view"})]}):(0,i.jsx)(i.Fragment,{})})})}},70070:(e,n,t)=>{t.d(n,{Z:()=>S});var i=t(12115),o=t(8536),l=t(9948),a=t(51196),r=t(50762),s=t(22761),d=t(30284),c=t(77062),u=t(14331),g=t(68691),m=t(83833),p=t(20389),h=t(69122),x=t(91073),v=t(80891),b=t(85756),f=t(33036),C=t(35936),j=t(47437),I=t(78373),w=t(69756),y=t(39264),L=t(60519),k=t(48392),M=t(78163);let S=()=>{let{isUpdatedUpgradeModalEnabled:e}=(0,m.D)(),{data:n}=(0,g.G)(e=>e.trial.alchemy),t=(0,g.G)(e=>e.user),{userSelectedTeam:S}=(0,h.s)(),T=S(),A=(0,g.G)(e=>e.generation.settings),_=(0,j.QL)(),{open:D,setData:P}=(0,c.A)(k.A.UPGRADE),{open:U,setData:E}=(0,c.A)(k.A.UPDATED_UPGRADE),{setPendingAiGenObjects:R}=(0,i.useContext)(o.V),{imageInputDefinitions:G}=(0,s.y)(),{isUserFreePlan:B}=(0,v.usePlan)(),F=(0,a.T)(),{hasPermission:O}=(0,u.S)(),z=O("generationImageGuidancePremium","create"),V=O("generationImageGuidancePremiumLimit","create"),W=O("generationModePremium","create"),N=(0,i.useMemo)(()=>({generationImageGuidancePremium:{create:z},generationImageGuidancePremiumLimit:{create:V}}),[z,V]),H=(0,r.N)(),Z=(0,g.G)(e=>e.generation.settings.prompt),$=(0,g.G)(e=>e.generation.settings.motionPrompts),Y=(0,g.G)(e=>e.generation.settings.usingMotion),q=(0,g.G)(e=>e.generation.isGenerating),K=(0,g.G)(e=>e.generation.modelInfo),X=(0,p.A)(),J=(0,g.j)(),Q=(0,x.A)(),ee=(0,m.D)(),{open:en,resetViewed:et}=(0,c.A)(k.A.USER_DETAILS),{open:ei}=(0,c.A)(k.A.ALCHEMY_GENERATIONS_USED),{open:eo}=(0,c.A)(k.A.ALCHEMY_EXPIRED),el=O("imageGenerationRapidGeneration","create"),ea=(0,i.useCallback)(n=>{let i=t.subscriptionTokens+t.paidTokens+t.rolloverTokens,o=T.id?_:i,l=o-n;if(B&&(l<=0||o>=20&&l<20)){let n;return n=0===l||0===o?b.GL.OutOfTokens:l<0?b.GL.NotEnoughTokens:b.GL.AlmostOutOfTokens,e?(E({subtitle:n}),U()):(P({subtitle:n}),D()),!0}return!1},[t.subscriptionTokens,t.paidTokens,t.rolloverTokens,T.id,_,B,P,D,E,U]);return(0,i.useCallback)(async(e,i,o,a)=>{var r,s,c;if(!t.username)return et(),en({force:!0}),setTimeout(()=>{document.getElementById("chakra-modal-".concat(k.A.USER_DETAILS))||window.location.reload()},500),Q({title:"Warning",description:"You must set your username before you start generating.",type:x.k.warning});let u=(null==e?void 0:e.prompt)||Z,g=null!==(s=null==e?void 0:e.motionPrompts)&&void 0!==s?s:$;if((0,l.e)({queryIsPushed:q&&!el,initImage:X,prompt:u,loadingModels:K.isLoading,motionPrompts:g,usingMotion:Y}).length)return;let m=(null==e?void 0:e.initImage)||X&&(null==e?void 0:e.initImage)!==null?{initImage:(null==e?void 0:e.initImage)||X}:{},p={},h=Object.assign({},A,e,{prompt:u,onPending:e=>{p=e,R(e=>[p,...e])},...m},T.akUUID&&{teamId:T.akUUID}),v=!W&&h.usingAlchemy;if(!(0,y.gL)()&&v){if(!n)return Q({title:"Error",description:"Missing alchemy trial data",type:x.k.error});let{isInTrialPeriod:e,hasReachedDailyLimit:t}=n;if(!e&&!W){eo(),J((0,L.oc)({newSettings:{usingAlchemy:!1}}));return}if(t){ei(),J((0,L.oc)({newSettings:{usingAlchemy:!1}}));return}}let S=F(h.modelId);h.usingAlchemy&&(0,C.kt)(S.sdVersion)&&(h.usingLeonardoMagic=!1);let D=null!==(c=null===(r=h.imageGuidanceInfo)||void 0===r?void 0:r.controlnets)&&void 0!==c?c:h.imageInputs.filter(d.Mc).filter(e=>e.isEnabled).map(e=>e.match.controlnetType),P=(0,f.Jv)({imageHeight:o||h.height,imageWidth:i||h.width,numImages:h.numberOfImages,isUsingAlchemy:h.usingAlchemy,usingMotion:h.usingMotion,motionPrompts:h.motionPrompts,usingSdxl:(0,C.kt)(S.sdVersion),usingSdxlLightning:(0,C.Ye)(S.sdVersion),highResolution:h.highResolution,inferenceSteps:h.stepCount,usingLeonardoMagic:h.usingLeonardoMagic,leonardoMagicVersion:h.leonardoMagicVersion,usingPhotoReal:h.usingPhotoReal,modelVersion:S.sdVersion,controlnets:D}),U=ea(P);if(!(0,j.tq)({cost:P,generationType:b.s1.IMAGE})){(0,I.u4)(w.JP),U||Q({title:"Error",description:"You do not have enough tokens to perform this action.",type:x.k.error});return}let E=T.id?_:t.subscriptionTokens+t.paidTokens,B=await J((0,L.ac)({settings:h,flags:ee,tokenData:{prevTokenBalance:E,afterTokenBalance:E-P,costOfGeneration:P},promptSource:a,permissions:N,imageInputDefinitions:G})).unwrap(),{error:O,newGenerationId:z,requestId:V}=B;return H({error:O,newGenerationId:z,requestId:V}),v&&J((0,M.U)()),B},[t.username,t.subscriptionTokens,t.paidTokens,Z,$,q,el,X,K.isLoading,Y,A,T.akUUID,T.id,N,G,W,F,ea,_,J,ee,H,et,en,Q,R,n,eo,ei])}},74907:(e,n,t)=>{t.d(n,{A:()=>m});var i=t(95155),o=t(69507),l=t(88095),a=t(85821),r=t(84492),s=t(12115),d=t(19222),c=t(64478),u=t(958),g=t(27593);let m=e=>{let{followThisUserId:n}=e,t=(0,c.w)(),m={userId:t,followThisUserId:n},p={refetchQueries:[{query:u._gI,variables:m}],awaitRefetchQueries:!0},{data:h,loading:x}=(0,o.I)(u._gI,{variables:m,skip:!n}),[v,{loading:b}]=(0,l.n)(u.p_K,{...p,variables:{object:{followingId:n}}}),[f,{loading:C}]=(0,l.n)(u.UKP,{...p,variables:{followerId:t,followingId:n}}),j=(0,s.useMemo)(()=>!!(null==h?void 0:h.follows.length),[null==h?void 0:h.follows.length]),I=(0,s.useMemo)(()=>n===t,[n,t]),w=(0,s.useMemo)(()=>b||C||x,[b,x,C]),y=async()=>{j?await f():await v()},L=!!t;return n&&!I&&L?(0,i.jsxs)(a.Button,{variant:"outline",bg:"none",borderRadius:"624.938rem",size:"sm",h:7,onClick:y,px:3,color:"rgba(189, 189, 189, 1)",...!w&&(j?{leftIcon:(0,i.jsx)(d.uDe,{fontSize:"calc(".concat(g.fb," * 1.000)"),color:"yellow"})}:{leftIcon:(0,i.jsx)(d.b_i,{fontSize:"calc(".concat(g.fb," * 1.000)"),color:"white"})}),iconSpacing:"calc(".concat(g.fb," * 0.125)"),_active:{"&:before":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:"-1",margin:"calc(".concat(g.fb," * -0.062)"),borderRadius:"calc(".concat(g.fb," * 624.938)"),backgroundClip:"padding-box",background:"linear-gradient(81.02deg, #FA5560 -23.47%, #B14BF4 45.52%, #4D91FF 114.8%)"}},children:[w&&(0,i.jsx)(r.Spinner,{speed:"1s",size:"sm"}),!w&&(j?"Unfollow":"Follow")]}):null}},81574:(e,n,t)=>{t.d(n,{A:()=>C});var i=t(95155),o=t(5643),l=t(19782),a=t(59108),r=t(33913),s=t(58670),d=t(84492),c=t(77700),u=t(16299),g=t(55872),m=t(17368),p=t(20927);let h=function(e){var n;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null!==(n=null==e?void 0:e.generated_images)&&void 0!==n?n:[],o=e?i.map(n=>{var t;return{id:n.id,url:n.url,generated_image_variation_generics:null===(t=n.generated_image_variation_generics)||void 0===t?void 0:t.map(e=>({__typename:"generated_image_variation_generic",...e})),generation:e,nsfw:n.nsfw,generated_image_moderation:n.generated_image_moderation}}):[];return(0,p.g)(o,{loopAround:!0,...t})};var x=t(20151),v=t(49993),b=t(76765);let f=e=>{var n;let{generation:t}=e,o=(null==t?void 0:null===(n=t.generated_images)||void 0===n?void 0:n.length)||0,l=h(t,{initialIndex:e.imageIndex}),{setDisableArrowKeys:a}=(0,x.cr)();return o?(null==t?void 0:t.motion)?(0,i.jsx)(m.A,{...e}):(0,i.jsx)(g.S,{modalNavigator:l,isOpen:e.isOpen,onClose:e.onClose,showCollectionDropdown:!0,setDisableArrowKeys:a,selectedVariationValue:e.selectValue}):null};f.Content=e=>{let{children:n}=e;return(0,i.jsx)(u.ModalContent,{rounded:"lg",w:{base:"inherit",md:"auto"},maxH:"100vh",maxW:{base:"none",md:"85vw",lg:"90vw"},mt:0,mb:0,mx:{base:0,md:4},position:"relative",children:n})},f.Body=e=>{let{isTransparent:n,intrinsicHeight:t,intrinsicWidth:u,isLoading:g,children:m}=e;return(0,i.jsxs)(o.ModalBody,{bg:"gradient.background",w:{base:"inherit",md:"auto"},maxH:{base:"100vh",md:"auto"},maxW:{base:"none",md:"85vw",lg:"90vw"},rounded:{base:"none",md:"lg"},p:"0",children:[(0,i.jsx)(l.ModalCloseButton,{size:{base:"lg",md:"md"},zIndex:7}),(0,i.jsx)(a.Flex,{justifyContent:"center",m:"auto",minH:{base:38,md:64,xl:"lg"},minW:{base:38,md:64,xl:"lg"},maxH:"calc(100vh - ".concat(r.w4.space["40"],")"),maxW:{base:"100vw",md:"90vw"},position:"relative",sx:{aspectRatio:"auto ".concat(u," / ").concat(t)},children:(0,i.jsxs)(a.Flex,{justifyContent:"center",w:"full",position:"relative",zIndex:5,borderTopRadius:{base:"none",md:"lg"},sx:{aspectRatio:"inherit"},...n&&v.c8,children:[g&&(0,i.jsxs)(a.Flex,{position:"absolute",bottom:0,right:0,m:2,alignItems:"center",transition:"0.1s",backgroundColor:"rgba(25, 25, 25, 0.9)",rounded:"3xl",py:2,px:3,zIndex:6,children:[(0,i.jsx)(s.Text,{mr:1,fontWeight:300,children:"Loading..."})," ",(0,i.jsx)(d.Spinner,{size:"sm"})]}),m,g&&(0,i.jsx)(c.Box,{position:"absolute",top:0,left:0,w:"full",h:"full",zIndex:4,children:(0,i.jsx)(a.Flex,{bgColor:"#202020",w:"full",minH:"20vh",h:"full",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(b.a,{})})})]})})]})};let C=f},85438:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(95155),o=t(66415);let l=e=>{let{children:n,limit:t=50}=e;return(0,i.jsx)(i.Fragment,{children:(0,o.b9)(n,t)})}},91690:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(95155),o=t(59108);let l=e=>{let{weight:n,strengthType:t,...l}=e;return(0,i.jsx)(o.Flex,{p:.5,px:3,bg:"rgba(11, 15, 23, 1)",fontWeight:"bold",rounded:"xl",fontSize:"sm",ml:2,...l,children:t||n.toFixed(2)})}},91697:(e,n,t)=>{t.d(n,{s:()=>r});var i=t(65352),o=t(33383),l=t(31188),a=t(14331);let r=()=>{let{hasPermission:e}=(0,a.S)(),n=e("generationImageCountPremium","create"),t=(0,i.d4)(l.$,e=>e.context.numberOfImages),r=n?o.yB:o.Tb;return{inputNumberOfImages:e=>{l.$.send({type:"input.numberOfImages",params:{numberOfImages:e,isUserFreePlan:!n}})},inputNumberOfImagesEnabled:(0,i.d4)(l.$,e=>e.can({type:"input.numberOfImages",params:{numberOfImages:t,isUserFreePlan:!n}})),numberOfImages:t,isIncreasedImageCountAllowed:n,imageCountLimit:r}}}}]);